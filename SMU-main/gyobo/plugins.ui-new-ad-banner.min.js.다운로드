/*! @kyobobook/kbb-js v1.0.10 (build 20250618-103334) */
"use strict";!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.__KbbJS__=n():(e.__KbbJS__=e.__KbbJS__||{},e.__KbbJS__["plugins.ui-new-ad-banner"]=n())}(self,(function(){return(self.webpackChunk_KbbJS_=self.webpackChunk_KbbJS_||[]).push([[513],{90457:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var a=t(51956),o=t(22859);function i(e){let{data:n,type:t,eventType:a,isMobile:o,$el:i}=e;dataLayer.push({event:"ad_banner",event_name:"".concat(a,"_ad_banner"),type:t,title:null==n?void 0:n.contentsName,device_type:o?"모바일":"인터넷",ad_id:null==n?void 0:n.adCampaignId,publisher_id:null==n?void 0:n.publisherCode})}function l(e){let{data:n,eventType:t}=e;i({data:n,type:"PC GNB 광고",eventType:t})}function s(e){let{data:n,eventType:t}=e;i({data:n,type:"모바일 플로팅 광고",eventType:t,isMobile:!0})}function c(e){let{data:n,eventType:t,isMobile:a}=e;i({data:n,type:"".concat(a?"모바일":"PC"," 웰컴 스페셜 배너"),eventType:t,isMobile:a})}const r=(e,n,t)=>{const o=(0,a.parseStageURL)(n?"/STO/realtime":"/EVT/today-mission"),i={src:n?"https://contents.kyobobook.co.kr/etc/special_adv_banner_m_670_180.jpg":"https://contents.kyobobook.co.kr/pmtn/2024/event/a092ded57dc94fab957bf53a79f408b8.jpg",alt:n?"실시간 베스트":"오늘의 미션 바로가기"},l=null==e?void 0:e[n?"mobile":"pc"],s=(null==l?void 0:l.bannerWebLink)||o,r=(null==l?void 0:l.bannerImageFileUrl)||i.src,d=(null==l?void 0:l.contentsName)||i.alt,p=(0,a.createEl)({href:s,class:n?"blurb_link":""},"a"),b=(0,a.createEl)({src:r,alt:d},"img");return p.append(b),null!=l&&(c({data:l,eventType:"view",isMobile:n}),p.on("click",(function(e){e.stopPropagation(),c({data:l,eventType:"click",isMobile:n})}))),p};function d(e){const n=(0,a.customURL)((0,a.getGlobalApiGwURL)("onk","ad/gnb"),{termlDvsnCode:e?"003":"002"});return this.$http(n).then((e=>e.data))}const p="선착순 교환권 받기",b="오늘의 미션 교환권 받기";function m(e){const n=this.$root.find(".tip_wrap"),t=(0,a.createEl)({class:"tip",href:e.gnbWebLink},"a"),o=(0,a.createEl)("icon_logo","span"),i=(0,a.createEl)({src:e.gnbImageFileUrl,alt:e.contentsName},"img");o.append(i);const s=(0,a.createEl)({class:"content"},"span"),c=(0,a.createEl)({class:"desc",html:p});return[(0,a.createEl)({html:e.contentsName},"b"),(0,a.createEl)({class:"icon_ad",html:"AD"},"span"),c].forEach((e=>s.append(e))),[o,s].forEach((e=>t.append(e))),t.on("click",(function(n){n.stopPropagation(),l({data:e,eventType:"click"})})),n.prepend(t)}function u(){const e=(0,a.parseStageURL)("/EVT/today-mission"),n=this.$root.find(".tip_wrap"),t=(0,a.createEl)({class:"tip",href:e},"a");return[(0,a.createEl)("icon_coin","span"),(0,a.createEl)({class:"content",html:p},"span")].forEach((e=>t.append(e))),n.prepend(t)}function h(e){this.$root.addClass("has_bg");const n=(0,a.createEl)({class:"link_golden_time",href:e.gnbWebLink},"a"),t=(0,a.createEl)("icon_img","span"),o=(0,a.createEl)({html:e.contentsName},"b"),i=(0,a.createEl)({class:"desc",html:p}),l=(0,a.createEl)("content");[o,i].forEach((e=>l.append(e))),[l,t].forEach((e=>n.append(e)));const c=(0,a.createEl)({class:"icon_ad",html:"AD"},"span"),r=(0,a.createEl)("bg_img").append((0,a.createEl)({src:e.gnbImageFileUrl,alt:e.contentsName},"img"));return[n,r,c].forEach((e=>this.$root.prepend(e))),n.on("click",(function(n){n.stopPropagation(),s({data:e,eventType:"click"})})),n}function _(){const e=(0,a.createEl)({class:"link_golden_time",href:(0,a.parseStageURL)("/EVT/today-mission"),"data-tag-index":"today-mission","data-tag-type":"플로팅 링크 메뉴","data-tag-section":"텍스트링크"},"a"),n=(0,a.createEl)("icon_coin","span"),t=(0,a.createEl)({class:"text",html:b},"span");[(0,a.createEl)("content").append(t),n].forEach((n=>e.append(n))),this.$root.prepend(e)}const f={root:"#today_mission",banner:{pc:"#welcomeWingAdBanner",mo:"#welcomeMokSpecialBanner"},skeleton:"#skeletonWelcomeWingAdBanner"};class E extends a.UiPluginsModule{constructor(){super("new-ad-banner"),Object.assign(this.options,{elements:f})}domReady(){null!=this.$root&&(a.IS_MOBILE&&this.initTodayMissionElems(),this.initDOM())}initDOM(){const{banner:e}=this.options.elements,n=$(document.body).find(e[a.IS_MOBILE?"mo":"pc"]).length>0;d.call(this,a.IS_MOBILE).then((e=>{n&&this.initWelcomeBanner(e);const t=null==e?void 0:e[a.IS_MOBILE?"mobile":"pc"],o=null!=(null==t?void 0:t.gnbImageFileUrl)&&null!=(null==t?void 0:t.gnbWebLink);return a.IS_MOBILE?o?(s({data:t,eventType:"view"}),h.call(this,t)):void _.call(this):o?(l({data:t,eventType:"view"}),m.call(this,t)):u.call(this)})).catch((()=>{[a.IS_MOBILE?_:u].call(this)}))}initTodayMissionElems(){if(!(null==Cookies.get("today-mission")))return this.$root.remove();this.$root.each(((e,n)=>{$(n).find(".btn_close_golden_time").on(a.CommonEvent.CLICK,(()=>{(0,o.d)("today-mission"),$(n).addClass("hidden")})),$(n).show()}))}initWelcomeBanner(e){if(this.isMobile&&null==e)return;const{banner:n}=this.options.elements;let t=$(document.body).find(n[a.IS_MOBILE?"mo":"pc"]);const o=r.call(this,e,a.IS_MOBILE,t);this.isMobile&&(t.removeClass("hidden"),t=t.find(".showcase_blurb_box")),t.children().remove(),t.append(o),t.find("#skeletonWelcomeWingAdBanner").remove()}}var g=new E}},function(e){return e.O(0,[321,160,712],(function(){return n=90457,e(e.s=n);var n})),e.O()}])}));