/*!
 * Web analytics for Snowplow v4.3.1 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

"use strict";
!(function () {
  function e(e, n) {
    var t,
      o = {};
    for (t in e)
      Object.prototype.hasOwnProperty.call(e, t) &&
        0 > n.indexOf(t) &&
        (o[t] = e[t]);
    if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
      var r = 0;
      for (t = Object.getOwnPropertySymbols(e); r < t.length; r++)
        0 > n.indexOf(t[r]) &&
          Object.prototype.propertyIsEnumerable.call(e, t[r]) &&
          (o[t[r]] = e[t[r]]);
    }
    return o;
  }
  function n(e, n, t, o) {
    return new (t || (t = Promise))(function (r, i) {
      function a(e) {
        try {
          u(o.next(e));
        } catch (e) {
          i(e);
        }
      }
      function c(e) {
        try {
          u(o.throw(e));
        } catch (e) {
          i(e);
        }
      }
      function u(e) {
        e.done
          ? r(e.value)
          : (function (e) {
              return e instanceof t
                ? e
                : new t(function (n) {
                    n(e);
                  });
            })(e.value).then(a, c);
      }
      u((o = o.apply(e, n || [])).next());
    });
  }
  function t(e, n) {
    function t(t) {
      return function (u) {
        return (function (t) {
          if (o) throw new TypeError("Generator is already executing.");
          for (; c && ((c = 0), t[0] && (a = 0)), a; )
            try {
              if (
                ((o = 1),
                r &&
                  (i =
                    2 & t[0]
                      ? r.return
                      : t[0]
                      ? r.throw || ((i = r.return) && i.call(r), 0)
                      : r.next) &&
                  !(i = i.call(r, t[1])).done)
              )
                return i;
              switch (((r = 0), i && (t = [2 & t[0], i.value]), t[0])) {
                case 0:
                case 1:
                  i = t;
                  break;
                case 4:
                  return a.label++, { value: t[1], done: !1 };
                case 5:
                  a.label++, (r = t[1]), (t = [0]);
                  continue;
                case 7:
                  (t = a.ops.pop()), a.trys.pop();
                  continue;
                default:
                  if (
                    !((i = a.trys),
                    (i = 0 < i.length && i[i.length - 1]) ||
                      (6 !== t[0] && 2 !== t[0]))
                  ) {
                    a = 0;
                    continue;
                  }
                  if (3 === t[0] && (!i || (t[1] > i[0] && t[1] < i[3])))
                    a.label = t[1];
                  else if (6 === t[0] && a.label < i[1])
                    (a.label = i[1]), (i = t);
                  else {
                    if (!(i && a.label < i[2])) {
                      i[2] && a.ops.pop(), a.trys.pop();
                      continue;
                    }
                    (a.label = i[2]), a.ops.push(t);
                  }
              }
              t = n.call(e, a);
            } catch (e) {
              (t = [6, e]), (r = 0);
            } finally {
              o = i = 0;
            }
          if (5 & t[0]) throw t[1];
          return { value: t[0] ? t[1] : void 0, done: !0 };
        })([t, u]);
      };
    }
    var o,
      r,
      i,
      a = {
        label: 0,
        sent: function () {
          if (1 & i[0]) throw i[1];
          return i[1];
        },
        trys: [],
        ops: [],
      },
      c = Object.create(
        ("function" == typeof Iterator ? Iterator : Object).prototype
      );
    return (
      (c.next = t(0)),
      (c.throw = t(1)),
      (c.return = t(2)),
      "function" == typeof Symbol &&
        (c[Symbol.iterator] = function () {
          return this;
        }),
      c
    );
  }
  function o(e, n, t) {
    if (t || 2 === arguments.length)
      for (var o, r = 0, i = n.length; r < i; r++)
        (!o && r in n) ||
          (o || (o = Array.prototype.slice.call(n, 0, r)), (o[r] = n[r]));
    return e.concat(o || Array.prototype.slice.call(n));
  }
  function r() {
    if (
      !dn &&
      !(dn =
        "undefined" != typeof crypto &&
        crypto.getRandomValues &&
        crypto.getRandomValues.bind(crypto))
    )
      throw Error(
        "crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported"
      );
    return dn(pn);
  }
  function i(e, n, t) {
    if (vn.randomUUID && !n && !e) return vn.randomUUID();
    if (
      (((e = (e = e || {}).random || (e.rng || r)())[6] = (15 & e[6]) | 64),
      (e[8] = (63 & e[8]) | 128),
      n)
    ) {
      t = t || 0;
      for (var o = 0; 16 > o; ++o) n[t + o] = e[o];
      return n;
    }
    return (function (e, n = 0) {
      return (
        sn[e[n + 0]] +
        sn[e[n + 1]] +
        sn[e[n + 2]] +
        sn[e[n + 3]] +
        "-" +
        sn[e[n + 4]] +
        sn[e[n + 5]] +
        "-" +
        sn[e[n + 6]] +
        sn[e[n + 7]] +
        "-" +
        sn[e[n + 8]] +
        sn[e[n + 9]] +
        "-" +
        sn[e[n + 10]] +
        sn[e[n + 11]] +
        sn[e[n + 12]] +
        sn[e[n + 13]] +
        sn[e[n + 14]] +
        sn[e[n + 15]]
      ).toLowerCase();
    })(e);
  }
  function a() {
    var e,
      n = {},
      t = [],
      o = [],
      r = [],
      i = function (e, t) {
        null != t && "" !== t && (n[e] = t);
      };
    return {
      add: i,
      addDict: function (e) {
        for (var n in e)
          Object.prototype.hasOwnProperty.call(e, n) && i(n, e[n]);
      },
      addJson: function (e, n, r) {
        r &&
          u(r) &&
          ((e = { keyIfEncoded: e, keyIfNotEncoded: n, json: r }),
          o.push(e),
          t.push(e));
      },
      addContextEntity: function (e) {
        r.push(e);
      },
      getPayload: function () {
        return n;
      },
      getJson: function () {
        return t;
      },
      withJsonProcessor: function (n) {
        e = n;
      },
      build: function () {
        return null == e || e(this, o, r), n;
      },
    };
  }
  function c(e) {
    return function (n, t, r) {
      for (
        var i = function (t, o, r) {
            if (((t = JSON.stringify(t)), e)) {
              if (((r = n.add), t)) {
                var i = 0,
                  a = 0,
                  c = [];
                if (t) {
                  t = unescape(encodeURIComponent(t));
                  do {
                    var u = t.charCodeAt(i++),
                      s = t.charCodeAt(i++),
                      l = t.charCodeAt(i++),
                      d = (u << 16) | (s << 8) | l;
                    (u = (d >> 18) & 63),
                      (s = (d >> 12) & 63),
                      (l = (d >> 6) & 63),
                      (d &= 63),
                      (c[a++] =
                        gn.charAt(u) +
                        gn.charAt(s) +
                        gn.charAt(l) +
                        gn.charAt(d));
                  } while (i < t.length);
                  (i = c.join("")),
                    (t =
                      ((t = t.length % 3) ? i.slice(0, t - 3) : i) +
                      "===".slice(t || 3));
                }
                t = t.replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
              }
              r.call(n, o, t);
            } else n.add(r, t);
          },
          a = function (t, o) {
            if (!t) {
              var r = n.getPayload();
              if (e ? r.cx : r.co) {
                var i = (t = JSON).parse;
                if (e) {
                  if ((r = r.cx)) {
                    switch (4 - (r.length % 4)) {
                      case 2:
                        r += "==";
                        break;
                      case 3:
                        r += "=";
                    }
                    r = (function (e) {
                      var n,
                        t = 0,
                        o = 0,
                        r = "",
                        i = [];
                      if (!e) return e;
                      e += "";
                      do {
                        var a = gn.indexOf(e.charAt(t++)),
                          c = gn.indexOf(e.charAt(t++));
                        r = gn.indexOf(e.charAt(t++));
                        var u = gn.indexOf(e.charAt(t++)),
                          s = (a << 18) | (c << 12) | (r << 6) | u;
                        (a = (s >> 16) & 255),
                          (c = (s >> 8) & 255),
                          (s &= 255),
                          (i[o++] =
                            64 === r
                              ? String.fromCharCode(a)
                              : 64 === u
                              ? String.fromCharCode(a, c)
                              : String.fromCharCode(a, c, s));
                      } while (t < e.length);
                      return (
                        (r = i.join("")),
                        (n = r.replace(/\0+$/, "")),
                        decodeURIComponent(
                          n
                            .split("")
                            .map(function (e) {
                              return (
                                "%" +
                                ("00" + e.charCodeAt(0).toString(16)).slice(-2)
                              );
                            })
                            .join("")
                        )
                      );
                    })((r = r.replace(/-/g, "+").replace(/_/g, "/")));
                  }
                } else r = r.co;
                t = i.call(t, r);
              } else t = void 0;
            }
            return t ? (t.data = t.data.concat(o.data)) : (t = o), t;
          },
          c = void 0,
          u = 0;
        u < t.length;
        u++
      ) {
        var s = t[u];
        "cx" === s.keyIfEncoded
          ? (c = a(c, s.json))
          : i(s.json, s.keyIfEncoded, s.keyIfNotEncoded);
      }
      (t.length = 0),
        r.length &&
          ((c = a(
            c,
            (t = {
              schema:
                "iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",
              data: o([], r, !0),
            })
          )),
          (r.length = 0)),
        c && i(c, "cx", "co");
    };
  }
  function u(e) {
    if (!s(e)) return !1;
    for (var n in e) if (Object.prototype.hasOwnProperty.call(e, n)) return !0;
    return !1;
  }
  function s(e) {
    return (
      null != e &&
      (e.constructor === {}.constructor || e.constructor === [].constructor)
    );
  }
  function l() {
    var e = [],
      n = [],
      t = {},
      o = {};
    return {
      getGlobalPrimitives: function () {
        return e.concat(Object.values(t));
      },
      getConditionalProviders: function () {
        return n.concat(Object.values(o));
      },
      addGlobalContexts: function (r) {
        if (Array.isArray(r)) {
          for (var i = [], a = [], c = 0; c < r.length; c++) {
            var u = r[c];
            T(u) ? i.push(u) : w(u) && a.push(u);
          }
          (e = e.concat(a)), (n = n.concat(i));
        } else
          for (i = 0, r = Object.entries(r); i < r.length; i++)
            (a = (u = r[i])[0]),
              T((u = u[1])) ? (o[a] = u) : w(u) && (t[a] = u);
      },
      clearGlobalContexts: function () {
        (n = []), (e = []), (o = {}), (t = {});
      },
      removeGlobalContexts: function (r) {
        for (
          var i = function (r) {
              "string" == typeof r
                ? (delete o[r], delete t[r])
                : T(r)
                ? (n = n.filter(function (e) {
                    return !x(r, e);
                  }))
                : w(r) &&
                  (e = e.filter(function (e) {
                    return !x(r, e);
                  }));
            },
            a = 0;
          a < r.length;
          a++
        )
          i(r[a]);
      },
      getApplicableContexts: function (r) {
        e: {
          for (var i = 0, a = r.getJson(); i < a.length; i++) {
            var c = a[i];
            if (
              "ue_px" === c.keyIfEncoded &&
              "object" == typeof c.json.data &&
              "string" == typeof (c = c.json.data.schema)
            ) {
              i = c;
              break e;
            }
          }
          i = "";
        }
        (c = "string" == typeof (a = r.getPayload().e) ? a : ""), (a = []);
        var u = S(e.concat(Object.values(t)), r, c, i);
        return (
          a.push.apply(a, u),
          (r = (function (e, n, t, o) {
            var r;
            return (
              (e = E(e).map(function (e) {
                e: {
                  if (k(e)) {
                    var r = e[0],
                      i = !1;
                    try {
                      i = r({
                        event: n.getPayload(),
                        eventType: t,
                        eventSchema: o,
                      });
                    } catch (e) {
                      i = !1;
                    }
                    if (!0 === i) {
                      e = S(e[1], n, t, o);
                      break e;
                    }
                  } else if (
                    b(e) &&
                    (function (e, n) {
                      var t = 0,
                        o = 0,
                        r = e.accept;
                      return (
                        Array.isArray(r)
                          ? e.accept.some(function (e) {
                              return C(e, n);
                            }) && o++
                          : "string" == typeof r && C(r, n) && o++,
                        (r = e.reject),
                        Array.isArray(r)
                          ? e.reject.some(function (e) {
                              return C(e, n);
                            }) && t++
                          : "string" == typeof r && C(r, n) && t++,
                        0 < o && 0 === t
                      );
                    })(e[0], o)
                  ) {
                    e = S(e[1], n, t, o);
                    break e;
                  }
                  e = [];
                }
                if (e && 0 !== e.length) return e;
              })),
              (r = []).concat.apply(
                r,
                e.filter(function (e) {
                  return null != e && e.filter(Boolean);
                })
              )
            );
          })(n.concat(Object.values(o)), r, c, i)),
          a.push.apply(a, r),
          a
        );
      },
    };
  }
  function d(e) {
    for (var n, t = [], o = 1; o < arguments.length; o++)
      t[o - 1] = arguments[o];
    return null !==
      (n =
        null == e
          ? void 0
          : e
              .map(function (e) {
                if ("function" != typeof e) return e;
                try {
                  return e.apply(void 0, t);
                } catch (e) {}
              })
              .filter(Boolean)) && void 0 !== n
      ? n
      : [];
  }
  function f(e) {
    return (
      !!((e = e.split(".")) && 1 < e.length) &&
      (function (e) {
        if ("*" === e[0] || "*" === e[1]) return !1;
        if (0 < e.slice(2).length) {
          var n = !1,
            t = 0;
          for (e = e.slice(2); t < e.length; t++)
            if ("*" === e[t]) n = !0;
            else if (n) return !1;
          return !0;
        }
        return 2 == e.length;
      })(e)
    );
  }
  function m(e) {
    if (
      null !==
        (e =
          /^iglu:((?:(?:[a-zA-Z0-9-_]+|\*).)+(?:[a-zA-Z0-9-_]+|\*))\/([a-zA-Z0-9-_.]+|\*)\/jsonschema\/([1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)-(0|[1-9][0-9]*|\*)$/.exec(
            e
          )) &&
      f(e[1])
    )
      return e.slice(1, 6);
  }
  function p(e) {
    if ((e = m(e))) {
      var n = e[0];
      return 5 === e.length && f(n);
    }
    return !1;
  }
  function v(e) {
    return (
      Array.isArray(e) &&
      e.every(function (e) {
        return "string" == typeof e;
      })
    );
  }
  function g(e) {
    return v(e)
      ? e.every(function (e) {
          return p(e);
        })
      : "string" == typeof e && p(e);
  }
  function h(e) {
    return (
      !!(u(e) && "schema" in e && "data" in e) &&
      "string" == typeof e.schema &&
      "object" == typeof e.data
    );
  }
  function y(e) {
    return "function" == typeof e && 1 >= e.length;
  }
  function w(e) {
    return y(e) || h(e);
  }
  function k(e) {
    return (
      !(!Array.isArray(e) || 2 !== e.length) &&
      (Array.isArray(e[1]) ? y(e[0]) && e[1].every(w) : y(e[0]) && w(e[1]))
    );
  }
  function b(e) {
    return (
      !(!Array.isArray(e) || 2 !== e.length) &&
      !!(function (e) {
        var n = 0;
        if (null != e && "object" == typeof e && !Array.isArray(e)) {
          if (Object.prototype.hasOwnProperty.call(e, "accept")) {
            if (!g(e.accept)) return !1;
            n += 1;
          }
          if (Object.prototype.hasOwnProperty.call(e, "reject")) {
            if (!g(e.reject)) return !1;
            n += 1;
          }
          return 0 < n && 2 >= n;
        }
        return !1;
      })(e[0]) &&
      (Array.isArray(e[1]) ? e[1].every(w) : w(e[1]))
    );
  }
  function T(e) {
    return k(e) || b(e);
  }
  function C(e, n) {
    if (!p(e)) return !1;
    if (
      ((e = m(e)),
      (n =
        null !==
        (n =
          /^iglu:([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_]+)\/jsonschema\/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$/.exec(
            n
          ))
          ? n.slice(1, 6)
          : void 0),
      e && n)
    ) {
      if (
        !(function (e, n) {
          if (((n = n.split(".")), (e = e.split(".")), n && e)) {
            if (n.length !== e.length) return !1;
            for (var t = 0; t < e.length; t++) if (!_(n[t], e[t])) return !1;
            return !0;
          }
          return !1;
        })(e[0], n[0])
      )
        return !1;
      for (var t = 1; 5 > t; t++) if (!_(e[t], n[t])) return !1;
      return !0;
    }
    return !1;
  }
  function _(e, n) {
    return (e && n && "*" === e) || e === n;
  }
  function E(e) {
    return Array.isArray(e) ? e : [e];
  }
  function S(e, n, t, o) {
    var r;
    return (
      (e = E(e).map(function (e) {
        e: if (h(e)) e = [e];
        else {
          if (y(e)) {
            n: {
              var r = void 0;
              try {
                if (
                  ((r = e({
                    event: n.getPayload(),
                    eventType: t,
                    eventSchema: o,
                  })),
                  (Array.isArray(r) && r.every(h)) || h(r))
                ) {
                  var i = r;
                  break n;
                }
                i = void 0;
                break n;
              } catch (e) {}
              i = void 0;
            }
            if (h(i)) {
              e = [i];
              break e;
            }
            if (Array.isArray(i)) {
              e = i;
              break e;
            }
          }
          e = void 0;
        }
        if (e && 0 !== e.length) return e;
      })),
      (r = []).concat.apply(
        r,
        e.filter(function (e) {
          return null != e && e.filter(Boolean);
        })
      )
    );
  }
  function P(e, n) {
    return "function" == typeof e
      ? e === n
      : JSON.stringify(e) === JSON.stringify(n);
  }
  function x(e, n) {
    if (T(e)) {
      if (!T(n)) return !1;
      var t = e[1],
        o = n[1];
      return (
        !!P(e[0], n[0]) &&
        (Array.isArray(t)
          ? !(!Array.isArray(o) || t.length !== o.length) &&
            t.reduce(function (e, n, t) {
              return e && P(n, o[t]);
            }, !0)
          : !Array.isArray(o) && P(t, o))
      );
    }
    return !!w(e) && !!w(n) && P(e, n);
  }
  function O(e) {
    void 0 === e && (e = {});
    var n,
      t,
      r,
      a,
      u,
      d,
      f,
      m = !0,
      p = e.base64,
      v = e.corePlugins,
      g = null != v ? v : [];
    (n = null == p || p),
      (t = g),
      (r = e.callback),
      (a = (function (e) {
        return {
          addPluginContexts: function (n) {
            var t = n ? o([], n, !0) : [];
            return (
              e.forEach(function (e) {
                try {
                  e.contexts && t.push.apply(t, e.contexts());
                } catch (e) {
                  hn.error("Error adding plugin contexts", e);
                }
              }),
              t
            );
          },
        };
      })(t)),
      (u = l()),
      (d = n),
      (f = {});
    var h = un(
      un(
        {},
        (e = {
          track: function (e, n, o) {
            if (m) {
              if (
                (e.withJsonProcessor(c(d)),
                e.add("eid", i()),
                e.addDict(f),
                (o = (function (e) {
                  return null == e
                    ? { type: "dtm", value: new Date().getTime() }
                    : "number" == typeof e
                    ? { type: "dtm", value: e }
                    : "ttm" === e.type
                    ? { type: "ttm", value: e.value }
                    : { type: "dtm", value: e.value || new Date().getTime() };
                })(o)),
                e.add(o.type, o.value.toString()),
                (n = (function (e, n) {
                  e = u.getApplicableContexts(e);
                  var t = [];
                  return (
                    n && n.length && t.push.apply(t, n),
                    e && e.length && t.push.apply(t, e),
                    t
                  );
                })(e, a.addPluginContexts(n))),
                void 0 !==
                  (n =
                    n && n.length
                      ? {
                          schema:
                            "iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",
                          data: n,
                        }
                      : void 0) && e.addJson("cx", "co", n),
                t.forEach(function (n) {
                  try {
                    n.beforeTrack && n.beforeTrack(e);
                  } catch (e) {
                    hn.error("Plugin beforeTrack", e);
                  }
                }),
                !t.find(function (n) {
                  try {
                    return n.filter && !1 === n.filter(e.build());
                  } catch (e) {
                    return hn.error("Plugin filter", e), !1;
                  }
                }))
              ) {
                "function" == typeof r && r(e);
                var s = e.build();
                return (
                  t.forEach(function (e) {
                    try {
                      e.afterTrack && e.afterTrack(s);
                    } catch (e) {
                      hn.error("Plugin afterTrack", e);
                    }
                  }),
                  s
                );
              }
            } else hn.error("Track called on deactivated tracker");
          },
          addPayloadPair: function (e, n) {
            f[e] = n;
          },
          getBase64Encoding: function () {
            return d;
          },
          setBase64Encoding: function (e) {
            d = e;
          },
          addPayloadDict: function (e) {
            for (var n in e)
              Object.prototype.hasOwnProperty.call(e, n) && (f[n] = e[n]);
          },
          resetPayloadPairs: function (e) {
            f = s(e) ? e : {};
          },
          setTrackerVersion: function (e) {
            f.tv = e;
          },
          setTrackerNamespace: function (e) {
            f.tna = e;
          },
          setAppId: function (e) {
            f.aid = e;
          },
          setPlatform: function (e) {
            f.p = e;
          },
          setUserId: function (e) {
            f.uid = e;
          },
          setScreenResolution: function (e, n) {
            f.res = e + "x" + n;
          },
          setViewport: function (e, n) {
            f.vp = e + "x" + n;
          },
          setColorDepth: function (e) {
            f.cd = e;
          },
          setTimezone: function (e) {
            f.tz = e;
          },
          setLang: function (e) {
            f.lang = e;
          },
          setIpAddress: function (e) {
            f.ip = e;
          },
          setUseragent: function (e) {
            f.ua = e;
          },
          addGlobalContexts: function (e) {
            u.addGlobalContexts(e);
          },
          clearGlobalContexts: function () {
            u.clearGlobalContexts();
          },
          removeGlobalContexts: function (e) {
            u.removeGlobalContexts(e);
          },
        })
      ),
      {
        addPlugin: function (e) {
          var n, t;
          (e = e.plugin),
            g.push(e),
            null === (n = e.logger) || void 0 === n || n.call(e, hn),
            null === (t = e.activateCorePlugin) || void 0 === t || t.call(e, h);
        },
        deactivate: function () {
          g.forEach(function (e) {
            var n;
            null === (n = e.deactivatePlugin) || void 0 === n || n.call(e, h);
          }),
            (g.length = 0),
            (m = !1);
        },
      }
    );
    return (
      null == g ||
        g.forEach(function (e) {
          var n, t;
          null === (n = e.logger) || void 0 === n || n.call(e, hn),
            null === (t = e.activateCorePlugin) || void 0 === t || t.call(e, h);
        }),
      h
    );
  }
  function A(e) {
    var n = e.event;
    return (
      (e = {
        schema:
          "iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",
        data: { schema: (e = n.schema), data: n.data },
      }),
      (n = a()).add("e", "ue"),
      n.addJson("ue_px", "ue_pr", e),
      n
    );
  }
  function j(e) {
    return A({
      event: (e = {
        schema:
          "iglu:com.snowplowanalytics.snowplow/link_click/jsonschema/1-0-1",
        data: I({
          targetUrl: e.targetUrl,
          elementId: e.elementId,
          elementClasses: e.elementClasses,
          elementTarget: e.elementTarget,
          elementContent: e.elementContent,
        }),
      }),
    });
  }
  function I(e, n) {
    void 0 === n && (n = {});
    var t,
      o = {};
    for (t in e) (n[t] || (null !== e[t] && void 0 !== e[t])) && (o[t] = e[t]);
    return o;
  }
  function L(e) {
    var n = e.maxSize,
      t = void 0 === n ? 1e3 : n,
      r = o([], void 0 === (e = e.events) ? [] : e, !0),
      i = function () {
        return Promise.resolve(r.length);
      };
    return {
      count: i,
      add: function (e) {
        for (r.push(e); r.length > t; ) r.shift();
        return i();
      },
      removeHead: function (e) {
        for (var n = 0; n < e; n++) r.shift();
        return Promise.resolve();
      },
      iterator: function () {
        var e = 0,
          n = o([], r, !0);
        return {
          next: function () {
            return e < n.length
              ? Promise.resolve({ value: n[e++], done: !1 })
              : Promise.resolve({ value: void 0, done: !0 });
          },
        };
      },
      getAll: function () {
        return Promise.resolve(o([], r, !0));
      },
      getAllPayloads: function () {
        return Promise.resolve(
          r.map(function (e) {
            return e.payload;
          })
        );
      },
    };
  }
  function U(e) {
    function n() {
      var e = b.reduce(function (e, n) {
        return (
          e + (T ? n.getPOSTRequestBytesCount() : n.getGETRequestBytesCount())
        );
      }, 0);
      return T && (e += 88), e;
    }
    function t() {
      var e = new Headers();
      return (
        T && e.append("Content-Type", "application/json; charset=UTF-8"),
        m &&
          Object.keys(m).forEach(function (n) {
            e.append(n, m[n]);
          }),
        0 < b.length &&
          b[0].getServerAnonymization() &&
          e.append("SP-Anonymous", "*"),
        e
      );
    }
    function o() {
      var e = c;
      return (
        c.includes("://") || (e = "".concat(s, "://").concat(c)),
        l && (e = "".concat(e, ":").concat(l)),
        e + (T ? h : "/i")
      );
    }
    function r(e, n) {
      return (
        a(!1),
        (f = new AbortController()),
        (d = setTimeout(
          function () {
            console.error("Request timed out"),
              (d = void 0),
              a(!1, "Request timed out");
          },
          null != p ? p : 5e3
        )),
        (n = un(
          { headers: t(), signal: f.signal, keepalive: g, credentials: k },
          n
        )),
        new Request(e, n)
      );
    }
    function i() {
      var e = (function (e) {
        for (var n = new Date().getTime().toString(), t = 0; t < e.length; t++)
          e[t].stm = n;
        return e;
      })(
        b.map(function (e) {
          return e.getPOSTRequestBody();
        })
      );
      return r(o(), {
        method: "POST",
        body: JSON.stringify({
          schema:
            "iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",
          data: e,
        }),
      });
    }
    function a(e, n) {
      if ((void 0 !== d && (clearTimeout(d), (d = void 0)), void 0 !== f)) {
        var t = f;
        (f = void 0), e || t.abort(n);
      }
    }
    var c = e.endpoint,
      u = e.protocol,
      s = void 0 === u ? "https" : u,
      l = e.port;
    u = e.eventMethod;
    var d,
      f,
      m = e.customHeaders,
      p = e.connectionTimeout,
      v = e.keepalive,
      g = void 0 !== v && v,
      h =
        void 0 === (v = e.postPath) ? "/com.snowplowanalytics.snowplow/tp2" : v,
      y = void 0 === (v = e.useStm) || v,
      w = void 0 === (v = e.maxPostBytes) ? 4e4 : v,
      k = void 0 === (e = e.credentials) ? "include" : e,
      b = [],
      T = "post" === (void 0 === u ? "post" : u).toLowerCase();
    return {
      addEvent: function (e) {
        return (
          !(
            0 < b.length &&
            (0 < b.length ? b[0].getServerAnonymization() : void 0) !==
              e.getServerAnonymization()
          ) && (b.push(e), !0)
        );
      },
      getEvents: function () {
        return b;
      },
      toRequest: function () {
        if (0 !== b.length) {
          if (T) return i();
          if (1 !== b.length)
            throw Error("Only one event can be sent in a GET request");
          return r(b[0].getGETRequestURL(o(), y), { method: "GET" });
        }
      },
      countBytes: n,
      countEvents: function () {
        return b.length;
      },
      isFull: function () {
        return T ? n() >= w : 1 <= b.length;
      },
      closeRequest: a,
    };
  }
  function B(e) {
    for (var n = 0, t = 0; t < e.length; t++) {
      var o = e.charCodeAt(t);
      127 >= o
        ? (n += 1)
        : 2047 >= o
        ? (n += 2)
        : 55296 <= o && 57343 >= o
        ? ((n += 4), t++)
        : (n = 65535 > o ? n + 3 : n + 4);
    }
    return n;
  }
  function R(e) {
    function n() {
      return e.payload;
    }
    function t(e) {
      if (null === r) {
        var n,
          t = { co: !0, cx: !0 },
          o = [];
        for (n in e)
          e.hasOwnProperty(n) &&
            !t[n] &&
            o.push(n + "=" + encodeURIComponent(e[n]));
        for (var i in t)
          e.hasOwnProperty(i) &&
            t[i] &&
            o.push(i + "=" + encodeURIComponent(e[i]));
        r = "?" + o.join("&");
      }
      return r;
    }
    function o() {
      return (
        null === i &&
          (i = (function (e) {
            return Object.keys(e)
              .map(function (n) {
                return [n, e[n]];
              })
              .reduce(function (e, n) {
                return (e[n[0]] = n[1].toString()), e;
              }, {});
          })(n())),
        i
      );
    }
    var r = null,
      i = null,
      a = null,
      c = null;
    return {
      getPayload: n,
      getServerAnonymization: function () {
        var n;
        return null !== (n = e.svrAnon) && void 0 !== n && n;
      },
      getGETRequestURL: function (e, o) {
        var r = t(n());
        return o
          ? e + r.replace("?", "?stm=" + new Date().getTime() + "&")
          : e + r;
      },
      getGETRequestBytesCount: function () {
        if (null === a) {
          var e = t(n());
          a = B(e);
        }
        return a;
      },
      getPOSTRequestBody: o,
      getPOSTRequestBytesCount: function () {
        return null === c && (c = B(JSON.stringify(o()))), c;
      },
    };
  }
  function D(e) {
    function o(e, n) {
      void 0 !== S &&
        setTimeout(function () {
          try {
            null == S || S(e, n);
          } catch (e) {
            hn.error("Error in onRequestFailure", e);
          }
        }, 0);
    }
    function r(e) {
      return n(this, void 0, void 0, function () {
        var n, r, i, a, c, u;
        return t(this, function (t) {
          switch (t.label) {
            case 0:
              if (void 0 === (n = e.toRequest())) throw Error("Empty batch");
              (r = e.getEvents().map(function (e) {
                return e.getPayload();
              })),
                (t.label = 1);
            case 1:
              return t.trys.push([1, 4, , 5]), [4, x(n)];
            case 2:
              return [4, (i = t.sent()).text()];
            case 3:
              return (
                t.sent(),
                e.closeRequest(!0),
                i.ok
                  ? ((function (e, n) {
                      void 0 !== P &&
                        setTimeout(function () {
                          try {
                            null == P || P(e, n);
                          } catch (e) {
                            hn.error("Error in onRequestSuccess", e);
                          }
                        }, 0);
                    })(r, i),
                    [2, { success: !0, retry: !1, status: i.status }])
                  : ((a = (function (e) {
                      return !(
                        (200 <= e && 300 > e) ||
                        !E ||
                        (!_.includes(e) && C.includes(e))
                      );
                    })(i.status)),
                    o(
                      {
                        events: r,
                        status: i.status,
                        message: i.statusText,
                        willRetry: a,
                      },
                      i
                    ),
                    [2, { success: !1, retry: a, status: i.status }])
              );
            case 4:
              return (
                (c = t.sent()),
                e.closeRequest(!1),
                (u =
                  "string" == typeof c ? c : c ? c.message : "Unknown error"),
                o({ events: r, message: u, willRetry: !0 }),
                [2, { success: !1, retry: !0 }]
              );
            case 5:
              return [2];
          }
        });
      });
    }
    function i() {
      return U({
        endpoint: s,
        protocol: m,
        port: p,
        eventMethod: d,
        customHeaders: y,
        connectionTimeout: k,
        keepalive: b,
        maxPostBytes: v,
        useStm: O,
        credentials: j,
        postPath: f,
      });
    }
    function a() {
      return n(this, void 0, void 0, function () {
        var e;
        return t(this, function (n) {
          switch (n.label) {
            case 0:
              return !T || I
                ? [3, 2]
                : ((I = !0),
                  (e = new Request(T, { method: "GET" })),
                  [4, x(e)]);
            case 1:
              n.sent(), (n.label = 2);
            case 2:
              return [2];
          }
        });
      });
    }
    function c() {
      return n(this, void 0, void 0, function () {
        var e;
        return t(this, function (n) {
          switch (n.label) {
            case 0:
              if (B) return [3, 5];
              (B = !0), (n.label = 1);
            case 1:
              return n.trys.push([1, 3, 4, 5]), [4, u()];
            case 2:
              return n.sent(), [3, 5];
            case 3:
              return (
                (e = n.sent()), hn.error("Error sending events", e), [3, 5]
              );
            case 4:
              return (B = !1), [7];
            case 5:
              return [2];
          }
        });
      });
    }
    function u() {
      return n(this, void 0, void 0, function () {
        var e, n, o, c, s, l, d, f, m;
        return t(this, function (t) {
          switch (t.label) {
            case 0:
              return [4, a()];
            case 1:
              t.sent(), (e = i()), (n = A.iterator()), (t.label = 2);
            case 2:
              return e.isFull() ? [3, 4] : [4, n.next()];
            case 3:
              return (
                (o = t.sent()),
                (c = o.value),
                o.done || void 0 === c
                  ? [3, 4]
                  : ((s = R(c)), e.addEvent(s) ? [3, 2] : [3, 4])
              );
            case 4:
              return 0 === e.countEvents() ? [2] : [4, r(e)];
            case 5:
              return (
                (l = t.sent()),
                (d = l.success),
                (f = l.retry),
                (m = l.status),
                !d && f
                  ? [3, 7]
                  : (d || hn.error("Status ".concat(m, ", will not retry.")),
                    [4, A.removeHead(e.countEvents())])
              );
            case 6:
              t.sent(), (t.label = 7);
            case 7:
              return d ? [4, u()] : [3, 9];
            case 8:
              t.sent(), (t.label = 9);
            case 9:
              return [2];
          }
        });
      });
    }
    var s = e.endpoint,
      l = e.eventMethod,
      d = void 0 === l ? "post" : l,
      f = e.postPath,
      m = e.protocol,
      p = e.port,
      v = void 0 === (l = e.maxPostBytes) ? 4e4 : l,
      g = e.maxGetBytes,
      h = void 0 === (l = e.bufferSize) ? 1 : l,
      y = e.customHeaders,
      w = e.serverAnonymization,
      k = e.connectionTimeout,
      b = e.keepalive,
      T = e.idService,
      C = void 0 === (l = e.dontRetryStatusCodes) ? [] : l,
      _ = void 0 === (l = e.retryStatusCodes) ? [] : l,
      E = void 0 === (l = e.retryFailedRequests) || l,
      S = e.onRequestFailure,
      P = e.onRequestSuccess,
      x = void 0 === (l = e.customFetch) ? fetch : l,
      O = e.useStm,
      A = void 0 === (l = e.eventStore) ? L({}) : l,
      j = e.credentials,
      I = !1,
      B = !1,
      D = "post" === d.toLowerCase();
    return (
      (C = C.concat([400, 401, 403, 410, 422])),
      {
        flush: c,
        input: function (e) {
          return n(this, void 0, void 0, function () {
            var n, o, a;
            return t(this, function (t) {
              switch (t.label) {
                case 0:
                  e: {
                    if (
                      ((t = o =
                        R(
                          (n = { payload: e, svrAnon: void 0 !== (t = w) && t })
                        )),
                      D)
                    ) {
                      var u = (t = t.getPOSTRequestBytesCount() + 88) > v;
                      u && hn.warn("Event (" + t + "B) too big, max is " + v);
                    } else {
                      if (void 0 === g) {
                        t = !1;
                        break e;
                      }
                      (u = (t = t.getGETRequestBytesCount()) > g) &&
                        hn.warn("Event (" + t + "B) too big, max is " + g);
                    }
                    t = u;
                  }
                  return t ? ((a = i()).addEvent(o), [4, r(a)]) : [3, 2];
                case 1:
                  return t.sent(), [3, 5];
                case 2:
                  return [4, A.add(n)];
                case 3:
                  return t.sent() >= h ? [4, c()] : [3, 5];
                case 4:
                  t.sent(), (t.label = 5);
                case 5:
                  return [2];
              }
            });
          });
        },
        setCollectorUrl: function (e) {
          s = e;
        },
        setAnonymousTracking: function (e) {
          w = e;
        },
        setBufferSize: function (e) {
          h = e;
        },
      }
    );
  }
  function N(e) {
    try {
      var n = window.localStorage;
      return n.removeItem(e), n.removeItem(e + ".expires"), !0;
    } catch (e) {
      return !1;
    }
  }
  function V(e) {
    try {
      return window.sessionStorage.getItem(e);
    } catch (e) {}
  }
  function F(e) {
    return btoa(e).replace(/\+/g, "-").replace(/\//g, "_").replace(/=+$/, "");
  }
  function M(e) {
    return (
      (Number.isInteger && Number.isInteger(e)) ||
      ("number" == typeof e && isFinite(e) && Math.floor(e) === e)
    );
  }
  function z(e) {
    return !(!e || "function" != typeof e);
  }
  function G(e) {
    var n = !(!e || "string" != typeof e.valueOf());
    return (
      n ||
        ((e = e.text || ""),
        (n = document.getElementsByTagName("title")) &&
          null != n[0] &&
          (e = n[0].text)),
      e
    );
  }
  function q(e) {
    var n = /^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(e);
    return n ? n[1] : e;
  }
  function H(e) {
    var n = e.length;
    return (
      "." === e.charAt(--n) && (e = e.slice(0, n)),
      "*." === e.slice(0, 2) && (e = e.slice(1)),
      e
    );
  }
  function J(e) {
    var n = window,
      t = Z("referrer", n.location.href) || Z("referer", n.location.href);
    if (t) return t;
    if (e) return e;
    try {
      if (n.top) return n.top.document.referrer;
      if (n.parent) return n.parent.document.referrer;
    } catch (e) {}
    return document.referrer;
  }
  function W(e, n, t, o) {
    return e.addEventListener
      ? (e.addEventListener(n, t, o), !0)
      : e.attachEvent
      ? e.attachEvent("on" + n, t)
      : void (e["on" + n] = t);
  }
  function Z(e, n) {
    return (e = new RegExp("^[^#]*[?&]" + e + "=([^&#]*)").exec(n))
      ? decodeURIComponent(e[1].replace(/\+/g, " "))
      : null;
  }
  function X(e, n, t, o, r) {
    Q(e, "", -1, n, t, o, r);
  }
  function Q(e, n, t, o, r, i, a) {
    return 1 < arguments.length
      ? (document.cookie =
          e +
          "=" +
          encodeURIComponent(null != n ? n : "") +
          (t
            ? "; Expires=" + new Date(+new Date() + 1e3 * t).toUTCString()
            : "") +
          (o ? "; Path=" + o : "") +
          (r ? "; Domain=" + r : "") +
          (i ? "; SameSite=" + i : "") +
          (a ? "; Secure" : ""))
      : decodeURIComponent(
          (("; " + document.cookie).split("; " + e + "=")[1] || "").split(
            ";"
          )[0]
        );
  }
  function Y(e) {
    if (null == e || "object" != typeof e || Array.isArray(e))
      return function () {
        return !0;
      };
    var n = Object.prototype.hasOwnProperty.call(e, "allowlist"),
      t = ne(e);
    return ee(e, function (e) {
      e: {
        var o = 0;
        for (e = $(e); o < e.length; o++)
          if (t[e[o]]) {
            o = !0;
            break e;
          }
        o = !1;
      }
      return o === n;
    });
  }
  function K(e) {
    if (null == e || "object" != typeof e || Array.isArray(e))
      return function () {
        return !0;
      };
    var n = e.hasOwnProperty("allowlist"),
      t = ne(e);
    return ee(e, function (e) {
      return e.name in t === n;
    });
  }
  function $(e) {
    return e.className.match(/\S+/g) || [];
  }
  function ee(e, n) {
    return e.hasOwnProperty("filter") && e.filter ? e.filter : n;
  }
  function ne(e) {
    var n = {};
    if ((e = e.allowlist || e.denylist)) {
      Array.isArray(e) || (e = [e]);
      for (var t = 0; t < e.length; t++) n[e[t]] = !0;
    }
    return n;
  }
  function te(e, n) {
    var t,
      o =
        null !== (t = e.eventStore) && void 0 !== t
          ? t
          : (function (e) {
              function n() {
                return r
                  ? a().then(function (e) {
                      window.localStorage.setItem(i, JSON.stringify(e));
                    })
                  : Promise.resolve();
              }
              var t = e.maxLocalStorageQueueSize,
                o = void 0 === t ? 1e3 : t,
                r = void 0 === (t = e.useLocalStorage) || t,
                i = "snowplowOutQueue_".concat(e.trackerId),
                a = (e = (function () {
                  if (r) {
                    var e = window.localStorage.getItem(i);
                    return (
                      (e = e ? JSON.parse(e) : []), L({ maxSize: o, events: e })
                    );
                  }
                  return L({ maxSize: o });
                })()).getAll,
                c = e.add,
                u = e.count,
                s = e.removeHead;
              return {
                count: u,
                add: function (e) {
                  return c(e), n().then(u);
                },
                removeHead: function (e) {
                  return s(e), n();
                },
                iterator: e.iterator,
                getAll: a,
                getAllPayloads: e.getAllPayloads,
                setUseLocalStorage: function (e) {
                  r = e;
                },
              };
            })(e);
    return (
      (e.eventStore = o),
      (e = D(e)),
      n.bufferFlushers.push(e.flush),
      {
        enqueueRequest: e.input,
        executeQueue: e.flush,
        setAnonymousTracking: e.setAnonymousTracking,
        setCollectorUrl: e.setCollectorUrl,
        setBufferSize: e.setBufferSize,
        setUseLocalStorage: function (e) {
          o.hasOwnProperty("setUseLocalStorage") && o.setUseLocalStorage(e);
        },
      }
    );
  }
  function oe(e, n, t) {
    return (
      "translate.googleusercontent.com" === e
        ? ("" === t && (t = n),
          (e = q(
            (n =
              null !=
              (e =
                (e = /^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(n)) &&
                1 < (null == e ? void 0 : e.length)
                  ? Z("u", e[1])
                  : null)
                ? e
                : "")
          )))
        : ("cc.bingj.com" !== e && "webcache.googleusercontent.com" !== e) ||
          (e = q((n = document.links[0].href))),
      [e, n, t]
    );
  }
  function re(e, n) {
    return (
      void 0 === n && (n = { memorizedVisitCount: 1 }),
      (n = n.memorizedVisitCount),
      "0" === e[0] ? ((e[7] = e[6]), (e[5] = e[4]), e[3]++) : (e[3] = n),
      (n = i()),
      (e[6] = n),
      (e[10] = 0),
      (e[8] = ""),
      (e[9] = void 0),
      n
    );
  }
  function ie(e) {
    e[4] = Math.round(new Date().getTime() / 1e3);
  }
  function ae(e, n, t) {
    var o = e[9];
    return {
      userId: t ? "00000000-0000-0000-0000-000000000000" : e[1],
      sessionId: e[6],
      eventIndex: e[10],
      sessionIndex: e[3],
      previousSessionId: t ? null : e[7] || null,
      storageMechanism: "localStorage" == n ? "LOCAL_STORAGE" : "COOKIE_1",
      firstEventId: e[8] || null,
      firstEventTimestamp: o ? new Date(o).toISOString() : null,
    };
  }
  function ce() {
    return "ResizeObserver" in window
      ? (Tn || (Tn = ue()),
        (function () {
          if (!Sn && document && document.body && document.documentElement) {
            Sn = !0;
            var e = new ResizeObserver(function (e) {
              for (var n = 0; n < e.length; n++) {
                var t = e[n];
                (t.target !== document.body &&
                  t.target !== document.documentElement) ||
                  (Tn = ue());
              }
            });
            e.observe(document.body), e.observe(document.documentElement);
          }
        })(),
        Tn)
      : ue();
  }
  function ue() {
    var e = se;
    if ("innerWidth" in window)
      var n = window.innerWidth,
        t = window.innerHeight;
    else
      (n = (t = document.documentElement || document.body).clientWidth),
        (t = t.clientHeight);
    (e = e(Math.max(0, n) + Pn + Math.max(0, t))), (n = se);
    var o = document.documentElement,
      r = document.body;
    return (
      (t = Math.max(o.clientWidth, o.offsetWidth, o.scrollWidth)),
      (o = Math.max(
        o.clientHeight,
        o.offsetHeight,
        o.scrollHeight,
        r ? Math.max(r.offsetHeight, r.scrollHeight) : 0
      )),
      {
        viewport: e,
        documentSize: n((t = isNaN(t) || isNaN(o) ? "" : t + Pn + o)),
        resolution: se(screen.width + Pn + screen.height),
        colorDepth: screen.colorDepth,
        devicePixelRatio: window.devicePixelRatio,
        cookiesEnabled: window.navigator.cookieEnabled,
        online: window.navigator.onLine,
        browserLanguage:
          window.navigator.language || window.navigator.userLanguage,
        documentLanguage: document.documentElement.lang,
        webdriver: window.navigator.webdriver,
        deviceMemory: window.navigator.deviceMemory,
        hardwareConcurrency: window.navigator.hardwareConcurrency,
      }
    );
  }
  function se(e) {
    return (
      e &&
      e
        .split(Pn)
        .map(function (e) {
          return Math.floor(Number(e));
        })
        .join(Pn)
    );
  }
  function le(e, n, t, r, c, u) {
    void 0 === u && (u = {});
    var s = [];
    e = (function (e, n, t, r, c, u) {
      function l() {
        (We = oe(window.location.hostname, window.location.href, J()))[1] !==
          Xe && (Qe = J(Xe)),
          (Ze = H(We[0])),
          (Xe = We[1]);
      }
      function d(e) {
        return function (n) {
          var t = n.currentTarget;
          if (
            ((n = (function (e, n, t) {
              var o,
                r = new Date().getTime();
              n = un(un({}, En), n);
              var i = t.domainUserId,
                a = t.userId,
                c = t.sessionId,
                u = t.sourceId,
                s = t.sourcePlatform,
                l = t.event,
                d = l.currentTarget;
              return (
                (l =
                  "function" == typeof n.reason
                    ? n.reason(l)
                    : null === (o = null == d ? void 0 : d.textContent) ||
                      void 0 === o
                    ? void 0
                    : o.trim()),
                e
                  ? [
                      i,
                      r,
                      n.sessionId && c,
                      n.userId && F(a || ""),
                      n.sourceId && F(u || ""),
                      n.sourcePlatform && s,
                      n.reason && F(l || ""),
                    ]
                      .map(function (e) {
                        return e || "";
                      })
                      .join(".")
                      .replace(/([.]*$)/, "")
                  : t.domainUserId + "." + r
              );
            })(e, Rn, {
              domainUserId: Fe,
              userId: ze || void 0,
              sessionId: Me,
              sourceId: Ke,
              sourcePlatform: Ye,
              event: n,
            })),
            null != t && t.href)
          ) {
            n = "_sp=" + n;
            var o = t.href.split("#"),
              r = o[0].split("?"),
              i = r.shift();
            if ((r = r.join("?"))) {
              for (var a = !0, c = r.split("&"), u = 0; u < c.length; u++)
                if ("_sp=" === c[u].substr(0, 4)) {
                  (a = !1), (c[u] = n), (r = c.join("&"));
                  break;
                }
              a && (r = n + "&" + r);
            } else r = n;
            (o[0] = i + "?" + r), (n = o.join("#")), (t.href = n);
          }
        };
      }
      function f(e) {
        for (var n = d(Bn), t = 0; t < document.links.length; t++) {
          var o = document.links[t];
          !o.spDecorationEnabled &&
            e(o) &&
            (o.addEventListener("click", n, !0),
            o.addEventListener("mousedown", n, !0),
            (o.spDecorationEnabled = !0));
        }
      }
      function m(e) {
        if (je) {
          var n = /#.*/;
          e = e.replace(n, "");
        }
        return Ie && ((n = /[{}]/g), (e = e.replace(n, ""))), e;
      }
      function p(e) {
        return (e = /^([a-z]+):/.exec(e)) ? e[1] : null;
      }
      function v(e) {
        if (((e = on + e + "." + Ve), "localStorage" == wn)) {
          try {
            var n = window.localStorage,
              t = n.getItem(e + ".expires");
            if (null === t || +t > Date.now()) var o = n.getItem(e);
            else n.removeItem(e), n.removeItem(e + ".expires"), (o = void 0);
          } catch (e) {
            o = void 0;
          }
          return o;
        }
        if ("cookie" == wn || "cookieAndLocalStorage" == wn)
          return Pe.getCookie(e);
      }
      function g() {
        l(), (Ve = _n((rn || Ze) + (cn || "/")).slice(0, 4));
      }
      function h() {
        Ue = new Date().getTime();
      }
      function y() {
        var e = w(),
          n = e[0];
        n < Be ? (Be = n) : n > Re && (Re = n),
          (e = e[1]) < De ? (De = e) : e > Ne && (Ne = e),
          h();
      }
      function w() {
        var e = document.documentElement;
        return e
          ? [
              e.scrollLeft || window.pageXOffset,
              e.scrollTop || window.pageYOffset,
            ]
          : [0, 0];
      }
      function k() {
        var e = w(),
          n = e[0];
        (Re = Be = n), (Ne = De = e = e[1]);
      }
      function b() {
        return C(on + "ses." + Ve, "*", pn);
      }
      function T(e) {
        var n = on + "id." + Ve,
          t = yn;
        return (
          (e = o([], e, !0)),
          t && ((e[1] = ""), (e[7] = "")),
          e.shift(),
          C(n, (t = e.join(".")), mn)
        );
      }
      function C(e, n, t) {
        if (yn && !vn) return !1;
        if ("localStorage" == wn) {
          void 0 === t && (t = 63072e3);
          try {
            var o = window.localStorage,
              r = Date.now() + 1e3 * t;
            o.setItem("".concat(e, ".expires"), r.toString()), o.setItem(e, n);
            var i = !0;
          } catch (e) {
            i = !1;
          }
          return i;
        }
        return (
          ("cookie" == wn || "cookieAndLocalStorage" == wn) &&
          Pe.setCookie(e, n, t, cn, rn, sn, ln)
        );
      }
      function _(e) {
        var n = on + "id." + Ve,
          t = on + "ses." + Ve;
        N(n),
          N(t),
          Pe.deleteCookie(n, cn, rn, sn, ln),
          Pe.deleteCookie(t, cn, rn, sn, ln),
          (null != e && e.preserveSession) || ((Me = i()), (bn = 1)),
          (null != e && e.preserveUser) || ((Fe = yn ? "" : i()), (ze = null));
      }
      function E(e) {
        e &&
          e.stateStorageStrategy &&
          ((u.stateStorageStrategy = e.stateStorageStrategy), (wn = Te(u))),
          (yn = !!u.anonymousTracking),
          (vn = Ce(u)),
          (gn = _e(u)),
          Tn.setUseLocalStorage(
            "localStorage" == wn || "cookieAndLocalStorage" == wn
          ),
          Tn.setAnonymousTracking(gn);
      }
      function S() {
        if (!yn || vn) {
          var e = "none" != wn && !!v("ses"),
            n = P();
          if (n[1]) var t = n[1];
          else (t = yn ? "" : i()), (n[1] = t);
          (Fe = t),
            (Me = e ? n[6] : re(n)),
            (bn = n[3]),
            "none" != wn && (b(), ie(n), T(n), n[10] || Pe.flush());
        }
      }
      function P() {
        return "none" == wn
          ? ["1", "", 0, 0, 0, void 0, "", "", "", void 0, 0]
          : (function (e, n, t, o) {
              var r = Math.round(new Date().getTime() / 1e3);
              e
                ? (e = e.split(".")).unshift("0")
                : (e = ["1", n, r, o, r, "", t]),
                (e[6] && "undefined" !== e[6]) || (e[6] = i()),
                (e[7] && "undefined" !== e[7]) || (e[7] = ""),
                (e[8] && "undefined" !== e[8]) || (e[8] = ""),
                (e[9] && "undefined" !== e[9]) || (e[9] = ""),
                (e[10] && "undefined" !== e[10]) || (e[10] = 0);
              var a = function (e, n) {
                return (e = parseInt(e)), isNaN(e) ? n : e;
              };
              return (
                (n = function (e) {
                  return e ? a(e, void 0) : void 0;
                }),
                [
                  e[0],
                  e[1],
                  a(e[2], r),
                  a(e[3], o),
                  a(e[4], r),
                  n(e[5]),
                  e[6],
                  e[7],
                  e[8],
                  n(e[9]),
                  a(e[10], 0),
                ]
              );
            })(v("id") || void 0, Fe, Me, bn);
      }
      function x(e) {
        return 0 === e.indexOf("http")
          ? e
          : ("https:" === document.location.protocol ? "https" : "http") +
              "://" +
              e;
      }
      function A() {
        (Cn && null != c.pageViewId) ||
          ((c.pageViewId = i()), (c.pageViewUrl = Oe || Xe));
      }
      function j() {
        return (
          (function () {
            if (null == c.pageViewId) return !0;
            if (Cn || !Sn) return !1;
            if (void 0 === c.pageViewUrl) return !0;
            var e = Oe || Xe;
            if (!0 === Sn || "full" == Sn || !("URL" in window))
              return c.pageViewUrl != e;
            e = new URL(e);
            var n = new URL(c.pageViewUrl);
            return "pathname" == Sn
              ? e.pathname != n.pathname
              : "pathnameAndSearch" == Sn &&
                  (e.pathname != n.pathname || e.search != n.search);
          })() && ((c.pageViewId = i()), (c.pageViewUrl = Oe || Xe)),
          c.pageViewId
        );
      }
      function I() {
        if ("none" === wn || yn || !Se) return null;
        var e = V("_sp_tab_id");
        if (!e) {
          e = i();
          try {
            window.sessionStorage.setItem("_sp_tab_id", e);
          } catch (e) {}
          e = V("_sp_tab_id");
        }
        return e || null;
      }
      function L(e) {
        var n = e.title,
          t = e.context,
          o = e.timestamp;
        if (
          ((e = e.contextCallback),
          l(),
          Pn && Pn == j() && A(),
          (Pn = j()),
          (en = document.title),
          n ? ((Ae = n), (nn = !0)) : nn && (Ae = null),
          (n = G(Ae || en)),
          He.track(
            (function (e) {
              var n = e.pageUrl,
                t = e.pageTitle;
              e = e.referrer;
              var o = a();
              return (
                o.add("e", "pv"),
                o.add("url", n),
                o.add("page", t),
                o.add("refr", e),
                o
              );
            })({ pageUrl: m(Oe || Xe), pageTitle: n, referrer: m(xe || Qe) }),
            (t || []).concat(e ? e() : []),
            o
          ),
          (o = new Date()),
          (n = !1),
          An.enabled && !An.installed)
        ) {
          n = An.installed = !0;
          var r = {
            update: function () {
              if (
                "undefined" != typeof window &&
                "function" == typeof window.addEventListener
              ) {
                var e = !1,
                  n = Object.defineProperty({}, "passive", {
                    get: function () {
                      e = !0;
                    },
                    set: function () {},
                  }),
                  t = function () {};
                window.addEventListener("testPassiveEventSupport", t, n),
                  window.removeEventListener("testPassiveEventSupport", t, n),
                  (r.hasSupport = e);
              }
            },
          };
          r.update();
          var i =
            "onwheel" in document.createElement("div")
              ? "wheel"
              : void 0 !== document.onmousewheel
              ? "mousewheel"
              : "DOMMouseScroll";
          Object.prototype.hasOwnProperty.call(r, "hasSupport")
            ? W(document, i, h, { passive: !0 })
            : W(document, i, h),
            k(),
            (i = function (e, n) {
              return (
                void 0 === n && (n = h),
                function (e) {
                  return W(document, e, n);
                }
              );
            }),
            "click mouseup mousedown mousemove keypress keydown keyup touchend touchstart"
              .split(" ")
              .forEach(i(document)),
            ["resize", "focus", "blur"].forEach(i(window)),
            i(window, y)("scroll");
        }
        if (An.enabled && (tn || n))
          for (o in ((Ue = o.getTime()), (o = void 0), An.configurations))
            (n = An.configurations[o]) &&
              (window.clearInterval(n.activityInterval), U(n, t, e));
      }
      function U(e, n, t) {
        var o = function (e, n) {
            l(),
              e({
                context: n,
                pageViewId: j(),
                minXOffset: Be,
                minYOffset: De,
                maxXOffset: Re,
                maxYOffset: Ne,
              }),
              k();
          },
          r = function () {
            Ue + e.configHeartBeatTimer > new Date().getTime() &&
              o(e.callback, (n || []).concat(t ? t() : []));
          };
        e.activityInterval =
          0 === e.configMinimumVisitLength
            ? window.setInterval(r, e.configHeartBeatTimer)
            : window.setTimeout(function () {
                Ue + e.configMinimumVisitLength > new Date().getTime() &&
                  o(e.callback, (n || []).concat(t ? t() : [])),
                  (e.activityInterval = window.setInterval(
                    r,
                    e.configHeartBeatTimer
                  ));
              }, e.configMinimumVisitLength);
      }
      function B(e) {
        var n = e.minimumVisitLength,
          t = e.heartbeatDelay;
        if (((e = e.callback), M(n) && M(t)))
          return {
            configMinimumVisitLength: 1e3 * n,
            configHeartBeatTimer: 1e3 * t,
            callback: e,
          };
        hn.error(
          "Activity tracking minimumVisitLength & heartbeatDelay must be integers"
        );
      }
      function R(e) {
        var n = e.context,
          t = e.minXOffset,
          o = e.minYOffset,
          r = e.maxXOffset,
          i = e.maxYOffset;
        (e = document.title) !== en && ((en = e), (Ae = void 0));
        var c = (e = He).track,
          u = m(Oe || Xe),
          s = G(Ae || en),
          l = m(xe || Qe);
        (t = Math.round(t)),
          (r = Math.round(r)),
          (o = Math.round(o)),
          (i = Math.round(i));
        var d = a();
        d.add("e", "pp"),
          d.add("url", u),
          d.add("page", s),
          d.add("refr", l),
          t && !isNaN(Number(t)) && d.add("pp_mix", t.toString()),
          r && !isNaN(Number(r)) && d.add("pp_max", r.toString()),
          o && !isNaN(Number(o)) && d.add("pp_miy", o.toString()),
          i && !isNaN(Number(i)) && d.add("pp_may", i.toString()),
          c.call(e, d, n);
      }
      function D(e) {
        var n = An.configurations[e];
        0 === (null == n ? void 0 : n.configMinimumVisitLength)
          ? window.clearTimeout(null == n ? void 0 : n.activityInterval)
          : window.clearInterval(null == n ? void 0 : n.activityInterval),
          (An.configurations[e] = void 0);
      }
      var z,
        Y,
        K,
        $,
        ee,
        ne,
        ue,
        se,
        le,
        de,
        fe,
        me,
        pe,
        ve,
        ge,
        he,
        ye,
        we,
        ke,
        be;
      u.eventMethod = null !== (z = u.eventMethod) && void 0 !== z ? z : "post";
      var Te = function (e) {
          var n;
          return null !== (n = e.stateStorageStrategy) && void 0 !== n
            ? n
            : "cookieAndLocalStorage";
        },
        Ce = function (e) {
          var n;
          return (
            "boolean" != typeof e.anonymousTracking &&
            !0 ===
              (null === (n = e.anonymousTracking) || void 0 === n
                ? void 0
                : n.withSessionTracking)
          );
        },
        _e = function (e) {
          var n;
          return (
            "boolean" != typeof e.anonymousTracking &&
            !0 ===
              (null === (n = e.anonymousTracking) || void 0 === n
                ? void 0
                : n.withServerAnonymisation)
          );
        },
        Ee =
          null !==
            (K =
              null === (Y = null == u ? void 0 : u.contexts) || void 0 === Y
                ? void 0
                : Y.browser) &&
          void 0 !== K &&
          K,
        Se =
          null ===
            (ee =
              null === ($ = null == u ? void 0 : u.contexts) || void 0 === $
                ? void 0
                : $.webPage) ||
          void 0 === ee ||
          ee,
        Pe = u.synchronousCookieWrite ? On : xn;
      s.push({
        beforeTrack: function (e) {
          var n = v("ses"),
            t = P(),
            o = 0 === t[10];
          if (((Ge = !!Le && !!Pe.getCookie(Le)), fn || Ge)) _();
          else {
            if (
              ("0" === t[0]
                ? ((Me = n || "none" == wn ? t[6] : re(t)), (bn = t[3]))
                : new Date().getTime() - kn > 1e3 * pn &&
                  (bn++, (Me = re(t, { memorizedVisitCount: bn }))),
              ie(t),
              0 === t[10])
            ) {
              var r = e.build();
              (t[8] = r.eid),
                (r = r.dtm || r.ttm),
                (t[9] = r ? parseInt(r) : void 0);
            }
            t[10] += 1;
            var i = (r = ce()).documentSize;
            e.add("vp", r.viewport),
              e.add("ds", i),
              e.add("vid", vn ? bn : yn ? null : bn),
              e.add("sid", vn ? Me : yn ? null : Me),
              e.add("duid", yn ? null : t[1]),
              e.add("uid", yn ? null : ze),
              l(),
              e.add("refr", m(xe || Qe)),
              e.add("url", m(Oe || Xe)),
              (r = ae(t, wn, yn)),
              !jn ||
                (yn && !vn) ||
                e.addContextEntity({
                  schema:
                    "iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",
                  data: r,
                }),
              "none" != wn &&
                (T(t),
                (e = b()),
                (n && !o) || !e || !In || Ln || (Pe.flush(), In(r), (Ln = !1))),
              (kn = new Date().getTime());
          }
        },
      }),
        Se &&
          s.push({
            contexts: function () {
              return [
                {
                  schema:
                    "iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",
                  data: { id: j() },
                },
              ];
            },
          }),
        Ee &&
          s.push({
            contexts: function () {
              return [
                {
                  schema:
                    "iglu:com.snowplowanalytics.snowplow/browser_context/jsonschema/2-0-0",
                  data: un(un({}, ce()), { tabId: I() }),
                },
              ];
            },
          }),
        s.push.apply(s, null !== (ne = u.plugins) && void 0 !== ne ? ne : []);
      var xe,
        Oe,
        Ae,
        je,
        Ie,
        Le,
        Ue,
        Be,
        Re,
        De,
        Ne,
        Ve,
        Fe,
        Me,
        ze,
        Ge,
        qe,
        He = O({
          base64:
            null !== (ue = u.encodeBase64) && void 0 !== ue
              ? ue
              : "post" !== u.eventMethod,
          corePlugins: s,
          callback: function (e) {
            fn || Ge || Tn.enqueueRequest(e.build());
          },
        }),
        Je = document.characterSet || document.charset,
        We = oe(window.location.hostname, window.location.href, J()),
        Ze = H(We[0]),
        Xe = We[1],
        Qe = We[2],
        Ye = null !== (se = u.platform) && void 0 !== se ? se : "web",
        Ke = null !== (le = u.appId) && void 0 !== le ? le : "",
        $e = u.appVersion,
        en = document.title,
        nn = !1,
        tn =
          null === (de = u.resetActivityTrackingOnPageView) ||
          void 0 === de ||
          de,
        on = null !== (fe = u.cookieName) && void 0 !== fe ? fe : "_sp_",
        rn = null !== (me = u.cookieDomain) && void 0 !== me ? me : void 0,
        an =
          null !== (pe = u.discoverRootDomain) && void 0 !== pe
            ? pe
            : void 0 === rn,
        cn = "/",
        sn = null !== (ve = u.cookieSameSite) && void 0 !== ve ? ve : "Lax",
        ln = null === (ge = u.cookieSecure) || void 0 === ge || ge,
        dn =
          window.navigator.doNotTrack ||
          window.navigator.msDoNotTrack ||
          window.doNotTrack,
        fn =
          void 0 !== u.respectDoNotTrack &&
          u.respectDoNotTrack &&
          ("yes" === dn || "1" === dn),
        mn = null !== (he = u.cookieLifetime) && void 0 !== he ? he : 63072e3,
        pn =
          null !== (ye = u.sessionCookieTimeout) && void 0 !== ye ? ye : 1800,
        vn = Ce(u),
        gn = _e(u),
        yn = !!u.anonymousTracking,
        wn = Te(u),
        kn = new Date().getTime(),
        bn = 1,
        Tn = te(
          un(
            {
              trackerId: e,
              endpoint: x(r),
              serverAnonymization: gn,
              useLocalStorage:
                "localStorage" == wn || "cookieAndLocalStorage" == wn,
            },
            u
          ),
          c
        ),
        Cn = !1,
        Sn = null !== (we = u.preservePageViewIdForUrl) && void 0 !== we && we,
        Pn = void 0,
        An = { enabled: !1, installed: !1, configurations: {} },
        jn =
          null !==
            (be =
              null === (ke = u.contexts) || void 0 === ke
                ? void 0
                : ke.session) &&
          void 0 !== be &&
          be,
        In = u.onSessionUpdateCallback,
        Ln = !1,
        Un =
          "boolean" == typeof (qe = u.useExtendedCrossDomainLinker || !1)
            ? { useExtendedCrossDomainLinker: qe }
            : {
                useExtendedCrossDomainLinker: !0,
                collectCrossDomainAttributes: qe,
              },
        Bn = Un.useExtendedCrossDomainLinker,
        Rn = Un.collectCrossDomainAttributes;
      an &&
        !rn &&
        (rn = (function (e, n) {
          for (
            var t = window.location.hostname,
              o = "_sp_root_domain_test_" + new Date().getTime(),
              r = "_test_value_" + new Date().getTime(),
              i = t.split("."),
              a = i.length - 2;
            0 <= a;
            a--
          ) {
            var c = i.slice(a).join(".");
            if ((Q(o, r, 0, "/", c, e, n), Q(o) === r)) {
              for (
                X(o, "/", c, e, n),
                  t = document.cookie.split("; "),
                  o = [],
                  r = 0;
                r < t.length;
                r++
              )
                "_sp_root_domain_test_" === t[r].substring(0, 21) &&
                  o.push(t[r]);
              for (t = o, o = 0; o < t.length; o++) X(t[o], "/", c, e, n);
              return c;
            }
          }
          return t;
        })(sn, ln));
      var Dn = ce(),
        Nn = Dn.browserLanguage,
        Vn = Dn.resolution,
        Fn = Dn.colorDepth,
        Mn = Dn.cookiesEnabled,
        zn =
          "object" == typeof Intl && "function" == typeof Intl.DateTimeFormat
            ? new Intl.DateTimeFormat().resolvedOptions().timeZone
            : void 0;
      return (
        He.setTrackerVersion(t),
        He.setTrackerNamespace(n),
        He.setAppId(Ke),
        He.setPlatform(Ye),
        He.addPayloadPair("cookie", Mn ? "1" : "0"),
        He.addPayloadPair("cs", Je),
        He.addPayloadPair("lang", Nn),
        He.addPayloadPair("res", Vn),
        He.addPayloadPair("cd", Fn),
        zn && He.addPayloadPair("tz", zn),
        $e &&
          He.addPlugin({
            plugin: {
              contexts: function () {
                return [
                  {
                    schema:
                      "iglu:com.snowplowanalytics.snowplow/application/jsonschema/1-0-0",
                    data: { version: $e },
                  },
                ];
              },
            },
          }),
        g(),
        S(),
        u.crossDomainLinker && f(u.crossDomainLinker),
        un(
          un(
            {},
            {
              getDomainSessionIndex: function () {
                return bn;
              },
              getPageViewId: j,
              getTabId: I,
              newSession: function () {
                var e = P();
                if (
                  ("0" === e[0]
                    ? ((Me = "none" != wn ? re(e) : e[6]), (bn = e[3]))
                    : (bn++, (Me = re(e, { memorizedVisitCount: bn }))),
                  ie(e),
                  "none" != wn)
                ) {
                  var n = ae(e, wn, yn);
                  T(e), (e = b()), Pe.flush(), e && In && ((Ln = !0), In(n));
                }
                kn = new Date().getTime();
              },
              getCookieName: function (e) {
                return on + e + "." + Ve;
              },
              getUserId: function () {
                return ze;
              },
              getDomainUserId: function () {
                return P()[1];
              },
              getDomainUserInfo: function () {
                return P();
              },
              setReferrerUrl: function (e) {
                xe = e;
              },
              setCustomUrl: function (e) {
                l();
                var n,
                  t = Xe;
                p(e)
                  ? (Oe = e)
                  : "/" === e.slice(0, 1)
                  ? (Oe = p(t) + "://" + q(t) + e)
                  : (0 <= (n = (t = m(t)).indexOf("?")) && (t = t.slice(0, n)),
                    (n = t.lastIndexOf("/")) !== t.length - 1 &&
                      (t = t.slice(0, n + 1)),
                    (Oe = t + e));
              },
              setDocumentTitle: function (e) {
                (en = document.title), (Ae = e), (nn = !1);
              },
              discardHashTag: function (e) {
                je = e;
              },
              discardBrace: function (e) {
                Ie = e;
              },
              setCookiePath: function (e) {
                (cn = e), g();
              },
              setVisitorCookieTimeout: function (e) {
                mn = e;
              },
              crossDomainLinker: function (e) {
                f(e);
              },
              enableActivityTracking: function (e) {
                An.configurations.pagePing ||
                  ((An.enabled = !0),
                  (An.configurations.pagePing = B(
                    un(un({}, e), { callback: R })
                  )));
              },
              enableActivityTrackingCallback: function (e) {
                An.configurations.callback ||
                  ((An.enabled = !0), (An.configurations.callback = B(e)));
              },
              disableActivityTracking: function () {
                D("pagePing");
              },
              disableActivityTrackingCallback: function () {
                D("callback");
              },
              updatePageActivity: function () {
                h();
              },
              setOptOutCookie: function (e) {
                Le = e;
              },
              setUserId: function (e) {
                ze = e;
              },
              setUserIdFromLocation: function (e) {
                l(), (ze = Z(e, Xe));
              },
              setUserIdFromReferrer: function (e) {
                l(), (ze = Z(e, Qe));
              },
              setUserIdFromCookie: function (e) {
                ze = Pe.getCookie(e);
              },
              setCollectorUrl: function (e) {
                Tn.setCollectorUrl(x(e));
              },
              setBufferSize: function (e) {
                Tn.setBufferSize(e);
              },
              flushBuffer: function (e) {
                void 0 === e && (e = {}),
                  Tn.executeQueue(),
                  e.newBufferSize && Tn.setBufferSize(e.newBufferSize);
              },
              trackPageView: function (e) {
                void 0 === e && (e = {}), L(e);
              },
              preservePageViewId: function () {
                Cn = !0;
              },
              preservePageViewIdForUrl: function (e) {
                Sn = e;
              },
              disableAnonymousTracking: function (e) {
                (u.anonymousTracking = !1), E(e), S(), Tn.executeQueue();
              },
              enableAnonymousTracking: function (e) {
                var n;
                (u.anonymousTracking =
                  null === (n = e && (null == e ? void 0 : e.options)) ||
                  void 0 === n ||
                  n),
                  E(e),
                  vn || A();
              },
              clearUserData: _,
            }
          ),
          { id: e, namespace: n, core: He, sharedState: c }
        )
      );
    })(e, n, t, r, c, u);
    var l = un(un({}, e), {
      addPlugin: function (e) {
        var n, t;
        l.core.addPlugin(e),
          null === (t = (n = e.plugin).activateBrowserPlugin) ||
            void 0 === t ||
            t.call(n, l);
      },
    });
    return (
      s.forEach(function (e) {
        var n;
        null === (n = e.activateBrowserPlugin) || void 0 === n || n.call(e, l);
      }),
      l
    );
  }
  function de(e, n) {
    try {
      pe(null != e ? e : Object.keys(An), An).forEach(n);
    } catch (e) {
      hn.error("Function failed", e);
    }
  }
  function fe(e, n, t) {
    try {
      pe(null != e ? e : Object.keys(n), n).forEach(t);
    } catch (e) {
      hn.error("Function failed", e);
    }
  }
  function me(e, n, t, o, r, i) {
    return An.hasOwnProperty(e)
      ? null
      : ((An[e] = le(e, n, t, o, r, i)), An[e]);
  }
  function pe(e, n) {
    for (var t = [], o = 0; o < e.length; o++) {
      var r = e[o];
      n.hasOwnProperty(r) ? t.push(n[r]) : hn.warn(r + " not configured");
    }
    return t;
  }
  function ve() {
    function e() {
      var e;
      if (!n.hasLoaded)
        for (
          n.hasLoaded = !0, e = 0;
          e < n.registeredOnLoadHandlers.length;
          e++
        )
          n.registeredOnLoadHandlers[e]();
      return !0;
    }
    var n = new jn(),
      t = document,
      o = window;
    return (
      t.visibilityState &&
        W(
          t,
          "visibilitychange",
          function () {
            "hidden" == t.visibilityState &&
              n.bufferFlushers.forEach(function (e) {
                e(!1);
              });
          },
          !1
        ),
      W(
        o,
        "beforeunload",
        function () {
          n.bufferFlushers.forEach(function (e) {
            e(!1);
          });
        },
        !1
      ),
      "loading" === document.readyState
        ? (t.addEventListener
            ? t.addEventListener("DOMContentLoaded", function n() {
                t.removeEventListener("DOMContentLoaded", n, !1), e();
              })
            : t.attachEvent &&
              t.attachEvent("onreadystatechange", function n() {
                "complete" === t.readyState &&
                  (t.detachEvent("onreadystatechange", n), e());
              }),
          W(o, "load", e, !1))
        : e(),
      n
    );
  }
  function ge(e) {
    return (
      void 0 === e && (e = Un),
      {
        contexts: function () {
          var n = [],
            t = un(un({}, Un), e),
            r = t.ga4,
            i = t.ga4MeasurementId,
            a = t.cookiePrefix;
          if (t.ua) {
            var c = {
              schema: "iglu:com.google.analytics/cookies/jsonschema/1-0-0",
              data: {},
            };
            "__utma __utmb __utmc __utmv __utmz _ga"
              .split(" ")
              .forEach(function (e) {
                var n = Q(e);
                n && (c.data[e] = n);
              }),
              n.push(c);
          }
          return (
            r &&
              ((t = Array.isArray(a) ? o([], a, !0) : [a]).unshift(""),
              t.forEach(function (e) {
                var t = Q(e + "_ga"),
                  r = [];
                i &&
                  (Array.isArray(i) ? o([], i, !0) : [i]).forEach(function (n) {
                    var t = Q(e + n.replace("G-", "_ga_"));
                    t && r.push({ measurement_id: n, session_cookie: t });
                  }),
                  (t || r.length) &&
                    n.push({
                      schema: "iglu:com.google.ga4/cookies/jsonschema/1-0-0",
                      data: {
                        _ga: t,
                        session_cookies: r.length ? r : void 0,
                        cookie_prefix: e || void 0,
                      },
                    });
              })),
            n
          );
        },
      }
    );
  }
  function he() {
    return {
      activateBrowserPlugin: function (e) {
        Vn[e.id] = e;
      },
      logger: function (e) {
        zn = e;
      },
    };
  }
  function ye(e) {
    void 0 === e && (e = Object.keys(Vn)),
      e.forEach(function (e) {
        Vn[e] &&
          Fn[e] &&
          (window.removeEventListener("click", Fn[e], !0),
          window.removeEventListener("mouseup", Fn[e], !0),
          window.removeEventListener("mousedown", Fn[e], !0));
      });
  }
  function we(e, n) {
    void 0 === n && (n = Object.keys(Vn)),
      fe(n, Vn, function (n) {
        var t, o, r;
        if ("element" in e) {
          var i =
            null !==
              (r =
                null !== (t = e.trackContent) && void 0 !== t
                  ? t
                  : null === (o = Mn[n.id]) || void 0 === o
                  ? void 0
                  : o.linkTrackingContent) &&
            void 0 !== r &&
            r;
          t = (function (e, n) {
            void 0 === n && (n = !1);
            var t = e.hostname || q(e.href),
              o = e.href.replace(t, function (e) {
                return e.toLowerCase();
              });
            if (!Nn.test(o)) {
              t = e.id;
              var r = $(e),
                i = e.target;
              return (
                (n = n ? e.innerHTML : void 0),
                o || null == zn || zn.warn("Link click target URL empty", e),
                j({
                  targetUrl: o || "about:invalid",
                  elementId: t,
                  elementClasses: r,
                  elementTarget: i,
                  elementContent: n,
                })
              );
            }
          })(e.element, i);
        } else t = j(e);
        t && n.core.track(t, e.context, e.timestamp);
      }),
      xn.flush();
  }
  function ke(e, n) {
    var t = Mn[e].linkTrackingContext,
      o = Mn[e].linkTrackingFilter,
      r = (n = n || window.event).which || n.button;
    e: {
      var i = n.composed ? n.composedPath()[0] : n.target || n.srcElement;
      if (i instanceof Element) {
        if ("function" == typeof i.closest) {
          i = i.closest(Dn);
          break e;
        }
        for (; i; ) {
          var a = i.tagName.toLowerCase();
          if (-1 !== Rn.indexOf(a)) break e;
          i = i.parentElement;
        }
      }
      i = null;
    }
    !i ||
      null == i.href ||
      (o && !o(i)) ||
      ("click" === n.type
        ? we({ element: i, context: d(t, i) }, [e])
        : "mousedown" === n.type
        ? 1 === r || 2 === r
          ? ((Mn[e].lastButton = r), (Mn[e].lastTarget = i))
          : delete Mn[e].lastButton
        : "mouseup" === n.type &&
          (r === Mn[e].lastButton &&
            i === Mn[e].lastTarget &&
            we({ element: i, context: d(t, i) }, [e]),
          delete Mn[e].lastButton,
          delete Mn[e].lastTarget));
  }
  function be(e, n) {
    var t,
      o = n.options;
    n = n.context;
    var r = (function (e) {
        if (e) {
          var n = function (e) {
              return !0;
            },
            t = null;
          return (
            !(function (e) {
              return null != e && 0 < Array.prototype.slice.call(e).length;
            })(e.forms)
              ? (n = Y(e.forms))
              : (t = e.forms),
            {
              forms: t,
              formFilter: n,
              fieldFilter: K(e.fields),
              fieldTransform: Se(e.fields),
            }
          );
        }
        return {
          forms: null,
          formFilter: function () {
            return !0;
          },
          fieldFilter: function () {
            return !0;
          },
          fieldTransform: Jn,
        };
      })(o),
      i = null !== (t = null == o ? void 0 : o.events) && void 0 !== t ? t : Hn;
    (t = Qn[e.id] =
      (function (e, n) {
        var t = null != e ? e : [document];
        return (
          n &&
            Array.prototype.forEach.call(n, function (e) {
              t.push(e.ownerDocument.documentElement);
            }),
          t
        );
      })(null == o ? void 0 : o.targets, r.forms)),
      -1 !== i.indexOf(Cn.FOCUS_FORM) &&
        ((Wn[e.id] = xe(e, r, Cn.FOCUS_FORM, n)),
        t.forEach(function (n) {
          return W(n, "focus", Wn[e.id], !0);
        })),
      -1 !== i.indexOf(Cn.CHANGE_FORM) &&
        ((Zn[e.id] = xe(e, r, Cn.CHANGE_FORM, n)),
        t.forEach(function (n) {
          return W(n, "change", Zn[e.id], !0);
        })),
      -1 !== i.indexOf(Cn.SUBMIT_FORM) &&
        ((Xn[e.id] = (function (e, n, t) {
          return function (o) {
            var r;
            if (
              Ce((o = o.target), "FORM") &&
              n.formFilter(o) &&
              Ee(o, n.forms)
            ) {
              var i = [];
              (function (e) {
                var n = [];
                return (
                  Array.prototype.forEach.call(e.elements, function (e) {
                    if (_e(e)) {
                      var t = (e.type || "text").toLowerCase();
                      if ("submit" !== t && "image" !== t) {
                        var o = {
                          elementData: {
                            name: Pe(e),
                            value: e.value,
                            nodeName: e.nodeName,
                          },
                          originalElement: e,
                        };
                        Ce(e, "INPUT") &&
                          ((o.elementData.type = t),
                          ("password" !== t &&
                            (("checkbox" !== t && "radio" !== t) ||
                              e.checked)) ||
                            (o.elementData.value = null)),
                          n.push(o);
                      }
                    }
                  }),
                  n
                );
              })(o).forEach(function (e) {
                var t = e.elementData;
                (e = e.originalElement),
                  n.fieldFilter(e) &&
                    "password" !== e.type.toLowerCase() &&
                    ((t.value = n.fieldTransform(t.value, t, e)), i.push(t));
              }),
                e.core.track(
                  (function (e) {
                    return A({
                      event: {
                        schema:
                          "iglu:com.snowplowanalytics.snowplow/submit_form/jsonschema/1-0-0",
                        data: I({
                          formId: e.formId,
                          formClasses: e.formClasses,
                          elements: e.elements,
                        }),
                      },
                    });
                  })({
                    formId: null !== (r = Pe(o)) && void 0 !== r ? r : "",
                    formClasses: $(o),
                    elements: i,
                  }),
                  d(t, o, i)
                ),
                xn.flush();
            }
          };
        })(e, r, n)),
        t.forEach(function (n) {
          return W(n, "submit", Xn[e.id], !0);
        }));
  }
  function Te(e) {
    var n;
    (null !== (n = Qn[e.id]) && void 0 !== n ? n : [document]).forEach(
      function (n) {
        Wn[e.id] && n.removeEventListener("focus", Wn[e.id], !0),
          Zn[e.id] && n.removeEventListener("change", Zn[e.id], !0),
          Xn[e.id] && n.removeEventListener("submit", Xn[e.id], !0);
      }
    );
  }
  function Ce(e, n) {
    return (
      !(
        "object" != typeof e ||
        !e ||
        !("tagName" in e) ||
        "string" != typeof e.tagName
      ) && e.tagName.toUpperCase() === n
    );
  }
  function _e(e) {
    return Ce(e, "INPUT") || Ce(e, "SELECT") || Ce(e, "TEXTAREA");
  }
  function Ee(e, n) {
    if (!n) return !0;
    for (var t = 0; t < n.length; t++) if (n[t].isSameNode(e)) return !0;
    return !1;
  }
  function Se(e) {
    return e && "function" == typeof e.transform ? e.transform : Jn;
  }
  function Pe(e) {
    for (var n = 0, t = ["name", "id", "type", "nodeName"]; n < t.length; n++) {
      var o = t[n];
      if (e[o] && "string" == typeof e[o]) return e[o];
    }
    return null;
  }
  function xe(e, n, t, o) {
    return function (r) {
      var i,
        a,
        c = r.composed ? r.composedPath()[0] : r.target;
      if (
        (c !== r.target &&
          r.composed &&
          _e(c) &&
          (c.form
            ? (Zn[e.id] && W(c.form, "change", Zn[e.id], !0),
              Xn[e.id] && W(c.form, "submit", Xn[e.id], !0))
            : Zn[e.id] && W(c, "change", Zn[e.id], !0)),
        _e(c) && n.fieldFilter(c))
      ) {
        var u = null;
        Ce(c, "INPUT")
          ? (r =
              ("checkbox" === (u = (c.type || "text").toLowerCase()) &&
                !c.checked) ||
              "password" === u
                ? null
                : n.fieldTransform(c.value, c, c))
          : (r = n.fieldTransform(c.value, c, c));
        e: if (c && c.form) var s = c.form;
        else {
          for (var l = c; l; ) {
            if (Ce(l, "FORM")) {
              s = l;
              break e;
            }
            l = l.parentNode;
          }
          s = l;
        }
        if (
          s &&
          n.formFilter(s) &&
          Ee(s, n.forms) &&
          ("change_form" === t || ("checkbox" !== u && "radio" !== u))
        ) {
          var f = (l = e.core).track;
          (s = null !== (i = Pe(null != s ? s : {})) && void 0 !== i ? i : ""),
            (i = null !== (a = Pe(c)) && void 0 !== a ? a : ""),
            (a = u);
          var m = "";
          (s = {
            formId: s,
            elementId: i,
            nodeName: c.nodeName,
            elementClasses: $(c),
            value: null != r ? r : null,
          }),
            "change_form" === t
              ? ((m =
                  "iglu:com.snowplowanalytics.snowplow/change_form/jsonschema/1-0-0"),
                (s.type = a))
              : "focus_form" === t &&
                ((m =
                  "iglu:com.snowplowanalytics.snowplow/focus_form/jsonschema/1-0-0"),
                (s.elementType = a)),
            (s = A({ event: { schema: m, data: I(s, { value: !0 }) } })),
            f.call(l, s, d(o, c, u, r));
        }
      }
    };
  }
  function Oe() {
    return {
      activateBrowserPlugin: function (e) {
        Yn[e.id] = e;
      },
    };
  }
  function Ae(e, n) {
    return (
      void 0 === n && (n = 8192), e && e.length > n ? e.substring(0, n) : e
    );
  }
  function je() {
    return {
      activateBrowserPlugin: function (e) {
        $n[e.id] = e;
      },
    };
  }
  function Ie(e, n) {
    void 0 === n && (n = Object.keys($n));
    var t = e.message,
      o = e.filename,
      r = e.lineno,
      i = e.colno,
      a = e.error,
      c = e.context,
      u = e.timestamp,
      s = a && Ae(a.stack, 8192),
      l = t && Ae(t, 2048);
    fe(n, $n, function (e) {
      e.core.track(
        A({
          event: {
            schema:
              "iglu:com.snowplowanalytics.snowplow/application_error/jsonschema/1-0-1",
            data: {
              programmingLanguage: "JAVASCRIPT",
              message:
                null != l ? l : "trackError called without required message",
              stackTrace: s,
              lineNumber: r,
              lineColumn: i,
              fileName: o,
            },
          },
        }),
        c,
        u
      );
    });
  }
  function Le() {
    return {
      activateBrowserPlugin: function (e) {
        nt[e.id] = e;
      },
    };
  }
  function Ue() {
    return {
      activateBrowserPlugin: function (e) {
        ot[e.id] = e;
      },
    };
  }
  function Be(e) {
    e = un({}, e);
    var n,
      t = {};
    for (n in e) null !== e[n] && void 0 !== e[n] && (t[n] = e[n]);
    return A({
      event: {
        schema:
          "iglu:com.snowplowanalytics.snowplow.ecommerce/snowplow_ecommerce_action/jsonschema/1-0-2",
        data: t,
      },
    });
  }
  function Re() {
    var e;
    return {
      activateBrowserPlugin: function (n) {
        (e = n.id), (it[e] = n), (at[e] = []);
      },
      contexts: function () {
        return at[e] || [];
      },
    };
  }
  function De(n, t) {
    void 0 === t && (t = Object.keys(it));
    var o = n.context,
      r = void 0 === o ? [] : o,
      i = n.timestamp;
    (n = e(n, ["context", "timestamp"])),
      r.push({
        schema:
          "iglu:com.snowplowanalytics.snowplow.ecommerce/checkout_step/jsonschema/1-0-0",
        data: un({}, n),
      }),
      fe(t, it, function (e) {
        e.core.track(Be({ type: "checkout_step" }), r, i);
      });
  }
  function Ne(e, n) {
    void 0 === n && (n = Object.keys(it));
    var t = e.context,
      o = void 0 === t ? [] : t,
      r = e.timestamp;
    t = e.products;
    var i = e.name;
    (void 0 === t ? [] : t).forEach(function (e) {
      return o.push({
        schema:
          "iglu:com.snowplowanalytics.snowplow.ecommerce/product/jsonschema/1-0-0",
        data: un({}, e),
      });
    }),
      fe(n, it, function (e) {
        e.core.track(Be({ type: "list_view", name: i }), o, r);
      });
  }
  function Ve(e, n) {
    void 0 === n && (n = Object.keys(it));
    var t = e.context,
      o = void 0 === t ? [] : t,
      r = e.timestamp,
      i = e.name;
    o.push({
      schema:
        "iglu:com.snowplowanalytics.snowplow.ecommerce/product/jsonschema/1-0-0",
      data: e.product,
    }),
      fe(n, it, function (e) {
        e.core.track(Be({ type: "list_click", name: i }), o, r);
      });
  }
  function Fe(n, t) {
    void 0 === t && (t = Object.keys(it));
    var o = n.context,
      r = void 0 === o ? [] : o,
      i = n.timestamp;
    (n = e(n, ["context", "timestamp"])),
      r.push({
        schema:
          "iglu:com.snowplowanalytics.snowplow.ecommerce/promotion/jsonschema/1-0-0",
        data: un({}, n),
      }),
      fe(t, it, function (e) {
        e.core.track(Be({ type: "promo_view" }), r, i);
      });
  }
  function Me(n, t) {
    void 0 === t && (t = Object.keys(it));
    var o = n.context,
      r = void 0 === o ? [] : o,
      i = n.timestamp;
    (n = e(n, ["context", "timestamp"])),
      r.push({
        schema:
          "iglu:com.snowplowanalytics.snowplow.ecommerce/promotion/jsonschema/1-0-0",
        data: un({}, n),
      }),
      fe(t, it, function (e) {
        e.core.track(Be({ type: "promo_click" }), r, i);
      });
  }
  function ze(n, t) {
    void 0 === t && (t = Object.keys(it));
    var o = n.context,
      r = void 0 === o ? [] : o,
      i = n.timestamp;
    (n = e(n, ["context", "timestamp"])),
      r.push({
        schema:
          "iglu:com.snowplowanalytics.snowplow.ecommerce/product/jsonschema/1-0-0",
        data: un({}, n),
      }),
      fe(t, it, function (e) {
        e.core.track(Be({ type: "product_view" }), r, i);
      });
  }
  function Ge(n, t) {
    void 0 === t && (t = Object.keys(it));
    var o = n.context,
      r = void 0 === o ? [] : o,
      i = n.timestamp;
    (o = void 0 === (o = n.products) ? [] : o),
      (n = e(n, ["context", "timestamp", "products"])),
      o.forEach(function (e) {
        return r.push({
          schema:
            "iglu:com.snowplowanalytics.snowplow.ecommerce/product/jsonschema/1-0-0",
          data: un({}, e),
        });
      }),
      r.push({
        schema:
          "iglu:com.snowplowanalytics.snowplow.ecommerce/cart/jsonschema/1-0-0",
        data: un({}, n),
      }),
      fe(t, it, function (e) {
        e.core.track(Be({ type: "add_to_cart" }), r, i);
      });
  }
  function qe(n, t) {
    void 0 === t && (t = Object.keys(it));
    var o = n.context,
      r = void 0 === o ? [] : o,
      i = n.timestamp;
    (o = void 0 === (o = n.products) ? [] : o),
      (n = e(n, ["context", "timestamp", "products"])),
      o.forEach(function (e) {
        return r.push({
          schema:
            "iglu:com.snowplowanalytics.snowplow.ecommerce/product/jsonschema/1-0-0",
          data: un({}, e),
        });
      }),
      r.push({
        schema:
          "iglu:com.snowplowanalytics.snowplow.ecommerce/cart/jsonschema/1-0-0",
        data: un({}, n),
      }),
      fe(t, it, function (e) {
        e.core.track(Be({ type: "remove_from_cart" }), r, i);
      });
  }
  function He(n, t) {
    void 0 === t && (t = Object.keys(it));
    var o = 0,
      r = n.context,
      i = void 0 === r ? [] : r,
      a = n.timestamp;
    (r = void 0 === (r = n.products) ? [] : r),
      (n = e(n, ["context", "timestamp", "products"])),
      r.forEach(function (e) {
        e.quantity && (o += e.quantity),
          i.push({
            schema:
              "iglu:com.snowplowanalytics.snowplow.ecommerce/product/jsonschema/1-0-0",
            data: e,
          });
      }),
      i.push({
        schema:
          "iglu:com.snowplowanalytics.snowplow.ecommerce/transaction/jsonschema/1-0-0",
        data: un({ total_quantity: o || void 0 }, n),
      }),
      fe(t, it, function (e) {
        e.core.track(Be({ type: "transaction" }), i, a);
      });
  }
  function Je(e, n) {
    return e.filter(function (e) {
      return e.schema !== n;
    });
  }
  function We(e, n) {
    return e.map(function (e) {
      return {
        currency: n,
        id: e.id || e.name,
        price: Number(e.price),
        name: e.name,
        position: e.position,
        brand: e.brand,
        category: e.category,
        variant: e.variant,
        quantity: e.quantity,
      };
    });
  }
  function Ze(e) {
    return e.map(function (e) {
      return {
        name: e.name,
        slot: e.position,
        id: e.id || e.name,
        creative_id: e.creative,
      };
    });
  }
  function Xe(e, n) {
    var t = e.categorySeparator,
      o = void 0 === t ? "/" : t;
    return e.items.map(function (e) {
      var t = [
        e.item_category,
        e.item_category2,
        e.item_category3,
        e.item_category4,
        e.item_category5,
      ]
        .filter(Boolean)
        .join(o);
      return {
        currency: n,
        id: e.item_id,
        name: e.item_name,
        list_price: e.price,
        price: +(Math.round(e.price - (e.discount || 0) + "e+2") + "e-2"),
        position: e.index,
        brand: e.item_brand,
        category: t,
        variant: e.item_variant,
        quantity: e.quantity,
      };
    });
  }
  function Qe(e) {
    var n = e.items.map(function (e) {
      return e.item_id;
    });
    return {
      id: e.promotion_id,
      name: e.promotion_name,
      creative_id: e.creative_name,
      slot: e.creative_slot,
      product_ids: n,
    };
  }
  function Ye(e) {
    var n,
      t = {};
    for (n in e) null !== e[n] && void 0 !== e[n] && (t[n] = e[n]);
    return t;
  }
  function Ke() {
    var e;
    return {
      activateBrowserPlugin: function (n) {
        (e = n.id), (ut[e] = n);
      },
    };
  }
  function $e(n, t) {
    void 0 === t && (t = Object.keys(ut));
    var o = n.context,
      r = n.timestamp,
      i = e(n, ["context", "timestamp"]);
    fe(t, ut, function (e) {
      e.core.track(
        A({
          event: {
            schema:
              "iglu:com.snowplowanalytics.snowplow/consent_preferences/jsonschema/1-0-0",
            data: Ye(un({}, i)),
          },
        }),
        o,
        r
      );
    });
  }
  function en() {
    return {
      activateBrowserPlugin: function (e) {
        lt[e.id] = e;
      },
    };
  }
  function nn(e, n) {
    void 0 === n && (n = Object.keys(lt)),
      fe(n, lt, function (n) {
        var t = (n = n.core).track,
          o = {
            schema:
              "iglu:com.snowplowanalytics.snowplow/button_click/jsonschema/1-0-0",
            data: I({
              label: e.label,
              id: e.id,
              classes: e.classes,
              name: e.name,
            }),
          };
        (o = A({ event: o })), t.call(n, o, e.context, e.timestamp);
      });
  }
  function tn() {
    for (var e in lt) dt[e] && document.removeEventListener("click", dt[e], !0);
  }
  function on(e) {
    return [
      {
        schema: "iglu:org.w3/PerformanceNavigationTiming/jsonschema/1-0-0",
        data: "entryType duration nextHopProtocol workerStart redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart secureConnectionStart connectEnd requestStart responseStart responseEnd transferSize encodedBodySize decodedBodySize serverTiming unloadEventStart unloadEventEnd domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd type redirectCount activationStart deliveryType"
          .split(" ")
          .reduce(function (n, t) {
            var o = e[t];
            return (
              "serverTiming" === t && Array.isArray(o)
                ? (n[t] = o.length
                    ? o.map(function (e) {
                        return {
                          description: e.description,
                          duration: e.duration,
                          name: e.name,
                        };
                      })
                    : void 0)
                : o && (n[t] = o),
              n
            );
          }, {}),
      },
    ];
  }
  function rn() {
    return {
      activateBrowserPlugin: function () {
        "undefined" != typeof PerformanceObserver &&
          new PerformanceObserver(function (e) {
            0 < (e = e.getEntries()[0]).loadEventEnd && (qn = on(e));
          }).observe({ type: "navigation", buffered: !0 });
      },
      contexts: function () {
        var e;
        return (
          (e = qn) ||
            (e =
              (e =
                window.performance ||
                window.mozPerformance ||
                window.msPerformance ||
                window.webkitPerformance ||
                {}).getEntriesByType &&
              (e = e.getEntriesByType("navigation")[0])
                ? on(e)
                : []),
          e
        );
      },
    };
  }
  function an(e) {
    function n(n) {
      return function (t) {
        (e[n] = t.value), (e.navigationType = t.navigationType);
      };
    }
    if (window.webVitals) {
      var t = window.webVitals;
      t.onCLS(n("cls")),
        t.onFID(n("fid")),
        t.onLCP(n("lcp")),
        t.onFCP(n("fcp")),
        t.onINP(n("inp")),
        t.onTTFB(n("ttfb"));
    } else
      hn.warn(
        "The window.webVitals API is currently unavailable. web_vitals events will not be collected."
      );
  }
  function cn(e) {
    void 0 === e && (e = gt);
    var n,
      t,
      o = {},
      r = un(un({}, gt), e);
    return {
      activateBrowserPlugin: function (e) {
        (n = e.id),
          (pt[n] = e),
          r.loadWebVitalsScript &&
            (t = (function (e) {
              var n = document.createElement("script");
              return (
                n.setAttribute("src", e),
                n.setAttribute("async", "1"),
                n.addEventListener("error", function () {
                  hn.error("Failed to load ".concat(e));
                }),
                document.head.appendChild(n),
                n
              );
            })(r.webVitalsSource)),
          vt ||
            (t
              ? t.addEventListener("load", function () {
                  return an(o);
                })
              : an(o),
            (function (e) {
              if (
                -1 !==
                (
                  (PerformanceObserver &&
                    PerformanceObserver.supportedEntryTypes) ||
                  []
                ).indexOf("layout-shift")
              ) {
                var n = function () {
                  "hidden" === document.visibilityState &&
                    (e(),
                    window.removeEventListener("visibilitychange", n, !0));
                };
                window.addEventListener("visibilitychange", n, !0);
              } else
                window.addEventListener("pagehide", e, {
                  capture: !0,
                  once: !0,
                });
            })(function () {
              Object.keys(o).length &&
                fe(Object.keys(pt), pt, function (e) {
                  var n;
                  e.core.track(
                    A({
                      event: {
                        schema:
                          "iglu:com.snowplowanalytics.snowplow/web_vitals/jsonschema/1-0-0",
                        data: o,
                      },
                    }),
                    d(null !== (n = r.context) && void 0 !== n ? n : [], o)
                  );
                });
            }),
            (vt = !0));
      },
    };
  }
  var un = function () {
    return (
      (un =
        Object.assign ||
        function (e) {
          for (var n, t = 1, o = arguments.length; t < o; t++)
            for (var r in (n = arguments[t]))
              Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
          return e;
        }),
      un.apply(this, arguments)
    );
  };
  "function" == typeof SuppressedError && SuppressedError;
  for (var sn = [], ln = 0; 256 > ln; ++ln)
    sn.push((ln + 256).toString(16).slice(1));
  var dn,
    fn,
    mn,
    pn = new Uint8Array(16),
    vn = {
      randomUUID:
        "undefined" != typeof crypto &&
        crypto.randomUUID &&
        crypto.randomUUID.bind(crypto),
    },
    gn = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
  ((mn = fn || (fn = {}))[(mn.none = 0)] = "none"),
    (mn[(mn.error = 1)] = "error"),
    (mn[(mn.warn = 2)] = "warn"),
    (mn[(mn.debug = 3)] = "debug"),
    (mn[(mn.info = 4)] = "info");
  var hn = (function (e) {
      return (
        void 0 === e && (e = fn.warn),
        {
          setLogLevel: function (n) {
            e = fn[n] ? n : fn.warn;
          },
          warn: function (n, t) {
            for (var r = [], i = 2; i < arguments.length; i++)
              r[i - 2] = arguments[i];
            e >= fn.warn &&
              "undefined" != typeof console &&
              ((i = "Snowplow: " + n),
              t
                ? console.warn.apply(console, o([i + "\n", t], r, !1))
                : console.warn.apply(console, o([i], r, !1)));
          },
          error: function (n, t) {
            for (var r = [], i = 2; i < arguments.length; i++)
              r[i - 2] = arguments[i];
            e >= fn.error &&
              "undefined" != typeof console &&
              ((i = "Snowplow: " + n + "\n"),
              t
                ? console.error.apply(console, o([i + "\n", t], r, !1))
                : console.error.apply(console, o([i], r, !1)));
          },
          debug: function (n) {
            for (var t = [], r = 1; r < arguments.length; r++)
              t[r - 1] = arguments[r];
            e >= fn.debug &&
              "undefined" != typeof console &&
              console.debug.apply(console, o(["Snowplow: " + n], t, !1));
          },
          info: function (n) {
            for (var t = [], r = 1; r < arguments.length; r++)
              t[r - 1] = arguments[r];
            e >= fn.info &&
              "undefined" != typeof console &&
              console.info.apply(console, o(["Snowplow: " + n], t, !1));
          },
        }
      );
    })(),
    yn = {},
    wn = {};
  !(function () {
    var e = {
      rotl: function (e, n) {
        return (e << n) | (e >>> (32 - n));
      },
      rotr: function (e, n) {
        return (e << (32 - n)) | (e >>> n);
      },
      endian: function (n) {
        if (n.constructor == Number)
          return (16711935 & e.rotl(n, 8)) | (4278255360 & e.rotl(n, 24));
        for (var t = 0; t < n.length; t++) n[t] = e.endian(n[t]);
        return n;
      },
      randomBytes: function (e) {
        for (var n = []; 0 < e; e--) n.push(Math.floor(256 * Math.random()));
        return n;
      },
      bytesToWords: function (e) {
        for (var n = [], t = 0, o = 0; t < e.length; t++, o += 8)
          n[o >>> 5] |= e[t] << (24 - (o % 32));
        return n;
      },
      wordsToBytes: function (e) {
        for (var n = [], t = 0; t < 32 * e.length; t += 8)
          n.push((e[t >>> 5] >>> (24 - (t % 32))) & 255);
        return n;
      },
      bytesToHex: function (e) {
        for (var n = [], t = 0; t < e.length; t++)
          n.push((e[t] >>> 4).toString(16)), n.push((15 & e[t]).toString(16));
        return n.join("");
      },
      hexToBytes: function (e) {
        for (var n = [], t = 0; t < e.length; t += 2)
          n.push(parseInt(e.substr(t, 2), 16));
        return n;
      },
      bytesToBase64: function (e) {
        for (var n = [], t = 0; t < e.length; t += 3)
          for (
            var o = (e[t] << 16) | (e[t + 1] << 8) | e[t + 2], r = 0;
            4 > r;
            r++
          )
            8 * t + 6 * r <= 8 * e.length
              ? n.push(
                  "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(
                    (o >>> (6 * (3 - r))) & 63
                  )
                )
              : n.push("=");
        return n.join("");
      },
      base64ToBytes: function (e) {
        e = e.replace(/[^A-Z0-9+\/]/gi, "");
        for (var n = [], t = 0, o = 0; t < e.length; o = ++t % 4)
          0 != o &&
            n.push(
              (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(
                e.charAt(t - 1)
              ) &
                (Math.pow(2, -2 * o + 8) - 1)) <<
                (2 * o)) |
                ("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(
                  e.charAt(t)
                ) >>>
                  (6 - 2 * o))
            );
        return n;
      },
    };
    wn = e;
  })();
  var kn = {
      utf8: {
        stringToBytes: function (e) {
          return kn.bin.stringToBytes(unescape(encodeURIComponent(e)));
        },
        bytesToString: function (e) {
          return decodeURIComponent(escape(kn.bin.bytesToString(e)));
        },
      },
      bin: {
        stringToBytes: function (e) {
          for (var n = [], t = 0; t < e.length; t++)
            n.push(255 & e.charCodeAt(t));
          return n;
        },
        bytesToString: function (e) {
          for (var n = [], t = 0; t < e.length; t++)
            n.push(String.fromCharCode(e[t]));
          return n.join("");
        },
      },
    },
    bn = kn;
  !(function () {
    var e = wn,
      n = bn.utf8,
      t = bn.bin,
      o = function (o, r) {
        var i = e.wordsToBytes,
          a = o;
        a.constructor == String
          ? (a = n.stringToBytes(a))
          : "undefined" != typeof Buffer &&
            "function" == typeof Buffer.isBuffer &&
            Buffer.isBuffer(a)
          ? (a = Array.prototype.slice.call(a, 0))
          : Array.isArray(a) || (a = a.toString()),
          (o = e.bytesToWords(a));
        var c = 8 * a.length;
        a = [];
        var u = 1732584193,
          s = -271733879,
          l = -1732584194,
          d = 271733878,
          f = -1009589776;
        for (
          o[c >> 5] |= 128 << (24 - (c % 32)),
            o[15 + (((c + 64) >>> 9) << 4)] = c,
            c = 0;
          c < o.length;
          c += 16
        ) {
          for (var m = u, p = s, v = l, g = d, h = f, y = 0; 80 > y; y++) {
            if (16 > y) a[y] = o[c + y];
            else {
              var w = a[y - 3] ^ a[y - 8] ^ a[y - 14] ^ a[y - 16];
              a[y] = (w << 1) | (w >>> 31);
            }
            (w =
              ((u << 5) | (u >>> 27)) +
              f +
              (a[y] >>> 0) +
              (20 > y
                ? 1518500249 + ((s & l) | (~s & d))
                : 40 > y
                ? 1859775393 + (s ^ l ^ d)
                : 60 > y
                ? ((s & l) | (s & d) | (l & d)) - 1894007588
                : (s ^ l ^ d) - 899497514)),
              (f = d),
              (d = l),
              (l = (s << 30) | (s >>> 2)),
              (s = u),
              (u = w);
          }
          (u += m), (s += p), (l += v), (d += g), (f += h);
        }
        return (
          (i = i.call(e, [u, s, l, d, f])),
          r && r.asBytes
            ? i
            : r && r.asString
            ? t.bytesToString(i)
            : e.bytesToHex(i)
        );
      };
    (o._blocksize = 16), (o._digestsize = 20), (yn = o);
  })();
  var Tn,
    Cn,
    _n = yn,
    En = {
      sessionId: !0,
      sourceId: !0,
      sourcePlatform: !1,
      userId: !1,
      reason: !1,
    },
    Sn = !1,
    Pn = "x",
    xn = (function () {
      function e(e) {
        return (
          n[e] ||
            (n[e] = (function (e) {
              function n() {
                void 0 !== t && (clearTimeout(t), (t = void 0)),
                  i ||
                    ((i = !0),
                    void 0 !== o && Q(e, o[0], o[1], o[2], o[3], o[4], o[5]));
              }
              var t,
                o,
                r,
                i = !0;
              return {
                getValue: function () {
                  var n;
                  return o &&
                    (!r || r > new Date()) &&
                    null !== (n = o[0]) &&
                    void 0 !== n
                    ? n
                    : Q(e);
                },
                setValue: function (e, a, c, u, s, l) {
                  return (
                    (o = [e, a, c, u, s, l]),
                    (i = !1),
                    void 0 === t &&
                      (t = setTimeout(function () {
                        (t = void 0), n();
                      }, 10)),
                    (r = new Date(
                      Date.now() + 1e3 * Math.min(0.05, null != a ? a : 0.05)
                    )),
                    !0
                  );
                },
                deleteValue: function (n, r, a, c) {
                  (o = void 0),
                    (i = !0),
                    void 0 !== t && (clearTimeout(t), (t = void 0)),
                    X(e, n, r, a, c);
                },
                flush: n,
              };
            })(e)),
          n[e]
        );
      }
      var n = {};
      return {
        getCookie: function (n) {
          return e(n).getValue();
        },
        setCookie: function (n, t, o, r, i, a, c) {
          return e(n).setValue(t, o, r, i, a, c);
        },
        deleteCookie: function (n, t, o, r, i) {
          e(n).deleteValue(t, o, r, i);
        },
        clearCache: function () {
          n = {};
        },
        flush: function () {
          for (var e = 0, t = Object.values(n); e < t.length; e++) t[e].flush();
        },
      };
    })(),
    On = {
      getCookie: Q,
      setCookie: function (e, n, t, o, r, i, a) {
        return (
          Q(e, n, t, o, r, i, a),
          -1 !== document.cookie.indexOf("".concat(e, "="))
        );
      },
      deleteCookie: X,
      flush: function () {},
    },
    An = {},
    jn = function () {
      (this.bufferFlushers = []),
        (this.hasLoaded = !1),
        (this.registeredOnLoadHandlers = []);
    },
    In = "undefined" != typeof window ? ve() : void 0,
    Ln = Object.freeze({
      __proto__: null,
      addGlobalContexts: function (e, n) {
        de(n, function (n) {
          n.core.addGlobalContexts(e);
        });
      },
      addPlugin: function (e, n) {
        de(n, function (n) {
          n.addPlugin(e);
        });
      },
      clearGlobalContexts: function (e) {
        de(e, function (e) {
          e.core.clearGlobalContexts();
        });
      },
      clearUserData: function (e, n) {
        de(n, function (n) {
          n.clearUserData(e);
        });
      },
      crossDomainLinker: function (e, n) {
        de(n, function (n) {
          n.crossDomainLinker(e);
        });
      },
      disableActivityTracking: function (e) {
        de(e, function (e) {
          e.disableActivityTracking();
        });
      },
      disableActivityTrackingCallback: function (e) {
        de(e, function (e) {
          e.disableActivityTrackingCallback();
        });
      },
      disableAnonymousTracking: function (e, n) {
        de(n, function (n) {
          n.disableAnonymousTracking(e);
        });
      },
      discardBrace: function (e, n) {
        de(n, function (n) {
          n.discardBrace(e);
        });
      },
      discardHashTag: function (e, n) {
        de(n, function (n) {
          n.discardHashTag(e);
        });
      },
      enableActivityTracking: function (e, n) {
        de(n, function (n) {
          n.enableActivityTracking(e);
        });
      },
      enableActivityTrackingCallback: function (e, n) {
        de(n, function (n) {
          n.enableActivityTrackingCallback(e);
        });
      },
      enableAnonymousTracking: function (e, n) {
        de(n, function (n) {
          n.enableAnonymousTracking(e);
        });
      },
      flushBuffer: function (e, n) {
        de(n, function (n) {
          n.flushBuffer(e);
        });
      },
      newSession: function (e) {
        de(e, function (e) {
          e.newSession();
        });
      },
      newTracker: function (e, n, t) {
        if (In) return me(e, e, "js-".concat("4.3.1"), n, In, t);
      },
      preservePageViewId: function (e) {
        de(e, function (e) {
          e.preservePageViewId();
        });
      },
      removeGlobalContexts: function (e, n) {
        de(n, function (n) {
          n.core.removeGlobalContexts(e);
        });
      },
      setBufferSize: function (e, n) {
        de(n, function (n) {
          n.setBufferSize(e);
        });
      },
      setCollectorUrl: function (e, n) {
        de(n, function (n) {
          n.setCollectorUrl(e);
        });
      },
      setCookiePath: function (e, n) {
        de(n, function (n) {
          n.setCookiePath(e);
        });
      },
      setCustomUrl: function (e, n) {
        de(n, function (n) {
          n.setCustomUrl(e);
        });
      },
      setDocumentTitle: function (e, n) {
        de(n, function (n) {
          n.setDocumentTitle(e);
        });
      },
      setOptOutCookie: function (e, n) {
        de(n, function (n) {
          n.setOptOutCookie(e);
        });
      },
      setReferrerUrl: function (e, n) {
        de(n, function (n) {
          n.setReferrerUrl(e);
        });
      },
      setUserId: function (e, n) {
        de(n, function (n) {
          n.setUserId(e);
        });
      },
      setUserIdFromCookie: function (e, n) {
        de(n, function (n) {
          n.setUserIdFromCookie(e);
        });
      },
      setUserIdFromLocation: function (e, n) {
        de(n, function (n) {
          n.setUserIdFromLocation(e);
        });
      },
      setUserIdFromReferrer: function (e, n) {
        de(n, function (n) {
          n.setUserIdFromReferrer(e);
        });
      },
      setVisitorCookieTimeout: function (e, n) {
        de(n, function (n) {
          n.setVisitorCookieTimeout(e);
        });
      },
      trackPageView: function (e, n) {
        de(n, function (n) {
          n.trackPageView(e);
        });
      },
      trackSelfDescribingEvent: function (e, n) {
        de(n, function (n) {
          n.core.track(A({ event: e.event }), e.context, e.timestamp);
        });
      },
      trackStructEvent: function (e, n) {
        de(n, function (n) {
          var t = (n = n.core).track,
            o = e.category,
            r = e.action,
            i = e.label,
            c = e.property,
            u = e.value,
            s = a();
          s.add("e", "se"),
            s.add("se_ca", o),
            s.add("se_ac", r),
            s.add("se_la", i),
            s.add("se_pr", c),
            s.add("se_va", null == u ? void 0 : u.toString()),
            t.call(n, s, e.context, e.timestamp);
        });
      },
      updatePageActivity: function (e) {
        de(e, function (e) {
          e.updatePageActivity();
        });
      },
      SharedState: jn,
      version: "4.3.1",
    }),
    Un = { ua: !1, ga4: !0, ga4MeasurementId: "", cookiePrefix: [] },
    Bn = Object.freeze({ __proto__: null, GaCookiesPlugin: ge }),
    Rn = ["a", "area"],
    Dn = Rn.join(", "),
    Nn = /^(javascript|vbscript|jscript|mocha|livescript|ecmascript):/i,
    Vn = {},
    Fn = {},
    Mn = {},
    zn = void 0,
    Gn = Object.freeze({
      __proto__: null,
      LinkClickTrackingPlugin: he,
      disableLinkClickTracking: ye,
      enableLinkClickTracking: function (e, n) {
        void 0 === e && (e = {}),
          void 0 === n && (n = Object.keys(Vn)),
          ye(n),
          n.forEach(function (n) {
            if (Vn[n]) {
              var t = void 0 === e ? {} : e;
              (Mn[n] = {
                linkTrackingContent: t.trackContent,
                linkTrackingContext: t.context,
                linkTrackingPseudoClicks: t.pseudoClicks,
                linkTrackingFilter: Y(t.options),
              }),
                (Fn[n] = Fn[n] || ke.bind(null, n)),
                Mn[n].linkTrackingPseudoClicks
                  ? (W(window, "mouseup", Fn[n], !0),
                    W(window, "mousedown", Fn[n], !0))
                  : W(window, "click", Fn[n], !0);
            }
          });
      },
      refreshLinkClickTracking: function (e) {
        null == zn ||
          zn.warn(
            "refreshLinkClickTracking is deprecated in v4 and has no effect"
          );
      },
      trackLinkClick: we,
    });
  !(function (e) {
    (e.CHANGE_FORM = "change_form"),
      (e.FOCUS_FORM = "focus_form"),
      (e.SUBMIT_FORM = "submit_form");
  })(Cn || (Cn = {}));
  var qn,
    Hn = [Cn.CHANGE_FORM, Cn.FOCUS_FORM, Cn.SUBMIT_FORM],
    Jn = function (e) {
      return e;
    },
    Wn = {},
    Zn = {},
    Xn = {},
    Qn = {},
    Yn = {},
    Kn = Object.freeze({
      __proto__: null,
      FormTrackingPlugin: Oe,
      disableFormTracking: function (e) {
        void 0 === e && (e = Object.keys(Yn)),
          e.forEach(function (e) {
            Yn[e] && Te(Yn[e]);
          });
      },
      enableFormTracking: function (e, n) {
        void 0 === e && (e = {}),
          void 0 === n && (n = Object.keys(Yn)),
          n.forEach(function (n) {
            Yn[n] && (Te(Yn[n]), be(Yn[n], e));
          });
      },
    }),
    $n = {},
    et = Object.freeze({
      __proto__: null,
      ErrorTrackingPlugin: je,
      enableErrorTracking: function (e, n) {
        void 0 === e && (e = {}), void 0 === n && (n = Object.keys($n));
        var t = e.filter,
          o = e.contextAdder,
          r = e.context;
        W(
          window,
          "error",
          function (e) {
            if ((t && z(t) && t(e)) || null == t) {
              var i = n,
                a = r || [];
              o && z(o) && (a = a.concat(o(e))),
                "message" in e
                  ? Ie(
                      {
                        message: e.message,
                        filename: e.filename,
                        lineno: e.lineno,
                        colno: e.colno,
                        error: e.error,
                        context: a,
                      },
                      i
                    )
                  : e.target && "tagName" in e.target
                  ? ((e = e.target),
                    Ie(
                      {
                        message: "Non-script error on ".concat(
                          e.tagName,
                          " element"
                        ),
                        filename: e.src || void 0,
                        context: a,
                      },
                      i
                    ))
                  : Ie(
                      {
                        message:
                          "JS Exception. Browser doesn't support ErrorEvent API",
                        context: a,
                      },
                      i
                    );
            }
          },
          !0
        );
      },
      trackError: Ie,
    }),
    nt = {},
    tt = Object.freeze({
      __proto__: null,
      AdTrackingPlugin: Le,
      trackAdClick: function (e, n) {
        void 0 === n && (n = Object.keys(nt)),
          fe(n, nt, function (n) {
            var t = (n = n.core).track,
              o = {
                schema:
                  "iglu:com.snowplowanalytics.snowplow/ad_click/jsonschema/1-0-0",
                data: I({
                  targetUrl: e.targetUrl,
                  clickId: e.clickId,
                  costModel: e.costModel,
                  cost: e.cost,
                  bannerId: e.bannerId,
                  zoneId: e.zoneId,
                  impressionId: e.impressionId,
                  advertiserId: e.advertiserId,
                  campaignId: e.campaignId,
                }),
              };
            (o = A({ event: o })), t.call(n, o, e.context, e.timestamp);
          });
      },
      trackAdConversion: function (e, n) {
        void 0 === n && (n = Object.keys(nt)),
          fe(n, nt, function (n) {
            var t = (n = n.core).track,
              o = {
                schema:
                  "iglu:com.snowplowanalytics.snowplow/ad_conversion/jsonschema/1-0-0",
                data: I({
                  conversionId: e.conversionId,
                  costModel: e.costModel,
                  cost: e.cost,
                  category: e.category,
                  action: e.action,
                  property: e.property,
                  initialValue: e.initialValue,
                  advertiserId: e.advertiserId,
                  campaignId: e.campaignId,
                }),
              };
            (o = A({ event: o })), t.call(n, o, e.context, e.timestamp);
          });
      },
      trackAdImpression: function (e, n) {
        void 0 === n && (n = Object.keys(nt)),
          fe(n, nt, function (n) {
            var t = (n = n.core).track,
              o = {
                schema:
                  "iglu:com.snowplowanalytics.snowplow/ad_impression/jsonschema/1-0-0",
                data: I({
                  impressionId: e.impressionId,
                  costModel: e.costModel,
                  cost: e.cost,
                  targetUrl: e.targetUrl,
                  bannerId: e.bannerId,
                  zoneId: e.zoneId,
                  advertiserId: e.advertiserId,
                  campaignId: e.campaignId,
                }),
              };
            (o = A({ event: o })), t.call(n, o, e.context, e.timestamp);
          });
      },
    }),
    ot = {},
    rt = Object.freeze({
      __proto__: null,
      SiteTrackingPlugin: Ue,
      trackSiteSearch: function (e, n) {
        void 0 === n && (n = Object.keys(ot)),
          fe(n, ot, function (n) {
            var t = (n = n.core).track,
              o = A({
                event: {
                  schema:
                    "iglu:com.snowplowanalytics.snowplow/site_search/jsonschema/1-0-0",
                  data: I({
                    terms: e.terms,
                    filters: e.filters,
                    totalResults: e.totalResults,
                    pageResults: e.pageResults,
                  }),
                },
              });
            t.call(n, o, e.context, e.timestamp);
          });
      },
      trackSocialInteraction: function (e, n) {
        void 0 === n && (n = Object.keys(ot)),
          fe(n, ot, function (n) {
            var t = (n = n.core).track,
              o = {
                schema:
                  "iglu:com.snowplowanalytics.snowplow/social_interaction/jsonschema/1-0-0",
                data: I({
                  action: e.action,
                  network: e.network,
                  target: e.target,
                }),
              };
            (o = A({ event: o })), t.call(n, o, e.context, e.timestamp);
          });
      },
      trackTiming: function (e, n) {
        void 0 === n && (n = Object.keys(ot));
        var t = e.category,
          o = e.variable,
          r = e.timing,
          i = e.label,
          a = e.context,
          c = e.timestamp;
        fe(n, ot, function (e) {
          e.core.track(
            A({
              event: {
                schema:
                  "iglu:com.snowplowanalytics.snowplow/timing/jsonschema/1-0-0",
                data: { category: t, variable: o, timing: r, label: i },
              },
            }),
            a,
            c
          );
        });
      },
    }),
    it = {},
    at = {},
    ct = Object.freeze({
      __proto__: null,
      SnowplowEcommercePlugin: Re,
      setEcommerceUser: function (e, n) {
        void 0 === n && (n = Object.keys(it));
        var t = e.id,
          o = e.is_guest,
          r = e.email;
        n.forEach(function (e) {
          at[e] &&
            ((at[e] = Je(
              at[e],
              "iglu:com.snowplowanalytics.snowplow.ecommerce/user/jsonschema/1-0-0"
            )),
            at[e].push({
              schema:
                "iglu:com.snowplowanalytics.snowplow.ecommerce/user/jsonschema/1-0-0",
              data: { id: t, is_guest: o, email: r },
            }));
        });
      },
      setPageType: function (e, n) {
        void 0 === n && (n = Object.keys(it));
        var t = e.type,
          o = e.language,
          r = e.locale;
        n.forEach(function (e) {
          at[e] &&
            ((at[e] = Je(
              at[e],
              "iglu:com.snowplowanalytics.snowplow.ecommerce/page/jsonschema/1-0-0"
            )),
            at[e].push({
              schema:
                "iglu:com.snowplowanalytics.snowplow.ecommerce/page/jsonschema/1-0-0",
              data: { type: t, language: o, locale: r },
            }));
        });
      },
      trackAddToCart: Ge,
      trackCheckoutStep: De,
      trackEnhancedEcommerceAddToCart: function (e, n) {
        var t = e.currencyCode || n.currency;
        Ge({
          products: (e = We(e.add.products, t)),
          total_value: n.finalCartValue,
          currency: t,
        });
      },
      trackEnhancedEcommerceCheckoutStep: function (e, n) {
        De(un({ step: e.checkout.actionField.step }, n));
      },
      trackEnhancedEcommerceProductDetail: function (e, n) {
        void 0 === n && (n = {}),
          (e = We(e.detail.products, e.currencyCode || n.currency)),
          ze(un({}, e[0]));
      },
      trackEnhancedEcommerceProductListClick: function (e, n) {
        void 0 === n && (n = {}),
          (n = We(e.click.products, e.currencyCode || n.currency)[0]),
          Ve({ name: e.click.actionField.list, product: n });
      },
      trackEnhancedEcommerceProductListView: function (e, n) {
        void 0 === n && (n = {}),
          (n = We(e.impressions, e.currencyCode || n.currency)),
          Ne({ name: e.impressions[0].list, products: n });
      },
      trackEnhancedEcommercePromoClick: function (e) {
        Me((e = Ze(e.promoClick.promotions)[0]));
      },
      trackEnhancedEcommercePromoView: function (e) {
        e = Ze(e.promoView.promotions);
        for (var n = 0; n < e.length; n++) Fe(e[n]);
      },
      trackEnhancedEcommercePurchase: function (e, n) {
        var t = e.currencyCode || n.currency;
        He({
          products: We(e.purchase.products, t),
          transaction_id: e.purchase.actionField.id,
          currency: t,
          revenue: Number(e.purchase.actionField.revenue),
          payment_method: n.paymentMethod || "unknown",
          tax: Number(e.purchase.actionField.tax) || void 0,
          shipping: Number(e.purchase.actionField.shipping) || void 0,
        });
      },
      trackEnhancedEcommerceRemoveFromCart: function (e, n) {
        var t = e.currencyCode || n.currency;
        qe({
          products: (e = We(e.remove.products, t)),
          total_value: n.finalCartValue,
          currency: t,
        });
      },
      trackGA4AddPaymentOptions: function (e, n) {
        De({ step: n.step, payment_method: e.payment_type });
      },
      trackGA4AddShippingInfo: function (e, n) {
        De({ step: n.step, delivery_method: e.shipping_tier });
      },
      trackGA4AddToCart: function (e, n) {
        var t = e.currency || n.currency;
        Ge({
          products: (e = Xe(e, t)),
          total_value: n.finalCartValue,
          currency: t,
        });
      },
      trackGA4BeginCheckout: function (e) {
        void 0 === e && (e = {}), De({ step: e.step || 1 });
      },
      trackGA4RemoveFromCart: function (e, n) {
        var t = e.currency || n.currency;
        qe({
          products: (e = Xe(e, t)),
          total_value: n.finalCartValue,
          currency: t,
        });
      },
      trackGA4SelectItem: function (e, n) {
        void 0 === n && (n = {}),
          (n = Xe(e, e.currency || n.currency)[0]),
          Ve({ name: e.item_list_id || e.item_list_name, product: n });
      },
      trackGA4SelectPromotion: function (e) {
        Me((e = Qe(e)));
      },
      trackGA4Transaction: function (e, n) {
        var t = e.currency || n.currency;
        He({
          products: Xe(e, t),
          transaction_id: e.transaction_id,
          currency: t,
          revenue: e.value,
          payment_method: n.paymentMethod || "unknown",
          tax: e.tax,
          shipping: e.shipping,
        });
      },
      trackGA4ViewCart: function () {
        console.log(
          "This function could be similarly tracked with the `setPageType` or `trackCheckoutStep` API."
        );
      },
      trackGA4ViewItem: function (e, n) {
        void 0 === n && (n = {}),
          (e = Xe(e, e.currency || n.currency)),
          ze(un({}, e[0]));
      },
      trackGA4ViewItemList: function (e, n) {
        void 0 === n && (n = {}),
          (n = Xe(e, e.currency || n.currency)),
          Ne({ name: e.item_list_id || e.item_list_name, products: n });
      },
      trackGA4ViewPromotion: function (e) {
        Fe((e = Qe(e)));
      },
      trackProductListClick: Ve,
      trackProductListView: Ne,
      trackProductView: ze,
      trackPromotionClick: Me,
      trackPromotionView: Fe,
      trackRefund: function (n, t) {
        void 0 === t && (t = Object.keys(it));
        var o = n.context,
          r = void 0 === o ? [] : o,
          i = n.timestamp;
        (o = void 0 === (o = n.products) ? [] : o),
          (n = e(n, ["context", "timestamp", "products"])),
          o.forEach(function (e) {
            return r.push({
              schema:
                "iglu:com.snowplowanalytics.snowplow.ecommerce/product/jsonschema/1-0-0",
              data: e,
            });
          }),
          r.push({
            schema:
              "iglu:com.snowplowanalytics.snowplow.ecommerce/refund/jsonschema/1-0-0",
            data: un({}, n),
          }),
          fe(t, it, function (e) {
            e.core.track(Be({ type: "refund" }), r, i);
          });
      },
      trackRemoveFromCart: qe,
      trackTransaction: He,
      trackTransactionError: function (n, t) {
        void 0 === t && (t = Object.keys(it));
        var o = n.context,
          r = void 0 === o ? [] : o,
          i = n.timestamp;
        (o = n.transaction),
          (n = e(n, ["context", "timestamp", "transaction"])),
          r.push({
            schema:
              "iglu:com.snowplowanalytics.snowplow.ecommerce/transaction/jsonschema/1-0-0",
            data: un({}, o),
          }),
          r.push({
            schema:
              "iglu:com.snowplowanalytics.snowplow.ecommerce/transaction_error/jsonschema/1-0-0",
            data: un({}, n),
          }),
          fe(t, it, function (e) {
            e.core.track(Be({ type: "trns_error" }), r, i);
          });
      },
    }),
    ut = {},
    st = Object.freeze({
      __proto__: null,
      EnhancedConsentPlugin: Ke,
      trackCmpVisible: function (e, n) {
        void 0 === n && (n = Object.keys(ut));
        var t = e.context,
          o = e.timestamp,
          r = e.elapsedTime;
        fe(n, ut, function (e) {
          e.core.track(
            A({
              event: {
                schema:
                  "iglu:com.snowplowanalytics.snowplow/cmp_visible/jsonschema/1-0-0",
                data: Ye(un({}, { elapsedTime: r })),
              },
            }),
            t,
            o
          );
        });
      },
      trackConsentAllow: function (e, n) {
        void 0 === n && (n = Object.keys(ut)),
          $e(un(un({}, e), { eventType: "allow_all" }), n);
      },
      trackConsentDeny: function (e, n) {
        void 0 === n && (n = Object.keys(ut)),
          $e(un(un({}, e), { eventType: "deny_all" }), n);
      },
      trackConsentExpired: function (e, n) {
        void 0 === n && (n = Object.keys(ut)),
          $e(un(un({}, e), { eventType: "expired" }), n);
      },
      trackConsentImplicit: function (e, n) {
        void 0 === n && (n = Object.keys(ut)),
          $e(un(un({}, e), { eventType: "implicit_consent" }), n);
      },
      trackConsentPending: function (e, n) {
        void 0 === n && (n = Object.keys(ut)),
          $e(un(un({}, e), { eventType: "pending" }), n);
      },
      trackConsentSelected: function (e, n) {
        void 0 === n && (n = Object.keys(ut)),
          $e(un(un({}, e), { eventType: "allow_selected" }), n);
      },
      trackConsentWithdrawn: function (e, n) {
        void 0 === n && (n = Object.keys(ut)),
          $e(un(un({}, e), { eventType: "withdrawn" }), n);
      },
    }),
    lt = {},
    dt = {},
    ft = Object.freeze({
      __proto__: null,
      ButtonClickTrackingPlugin: en,
      disableButtonClickTracking: tn,
      enableButtonClickTracking: function (e, n) {
        void 0 === e && (e = {}),
          void 0 === n && (n = Object.keys(lt)),
          tn(),
          n.forEach(function (n) {
            var t, o;
            dt[n] = function (t) {
              e: {
                var o = (function (e) {
                    if ("function" == typeof e) return e;
                    if ("object" == typeof e) {
                      if ("allowlist" in e)
                        return function (n) {
                          return Array.from(
                            (null == n ? void 0 : n.classList) || []
                          ).some(function (n) {
                            return e.allowlist.includes(n);
                          });
                        };
                      if ("denylist" in e)
                        return function (n) {
                          return !Array.from(
                            (null == n ? void 0 : n.classList) || []
                          ).some(function (n) {
                            return e.denylist.includes(n);
                          });
                        };
                    }
                    return function () {
                      return !0;
                    };
                  })(e.filter),
                  r = e.context;
                for (t = t.composed ? t.composedPath()[0] : t.target; t; ) {
                  if (
                    t instanceof HTMLButtonElement ||
                    (t instanceof HTMLInputElement && "button" === t.type)
                  ) {
                    if (o(t)) {
                      o = t;
                      var i = {};
                      (i.label =
                        "INPUT" === o.tagName
                          ? o.dataset.spButtonLabel || o.value
                          : o.dataset.spButtonLabel || o.innerText),
                        o.id && (i.id = o.id),
                        o.name && (i.name = o.name),
                        o.classList.length &&
                          (i.classes = Array.from(o.classList)),
                        ((o = i).context = d(r, o, t)),
                        nn(o, [n]);
                    }
                    break e;
                  }
                  t = t.parentElement;
                }
              }
            };
            var r = function () {
              document.addEventListener("click", dt[n], !0);
            };
            null !== (t = lt[n]) && void 0 !== t && t.sharedState.hasLoaded
              ? r()
              : null === (o = lt[n]) ||
                void 0 === o ||
                o.sharedState.registeredOnLoadHandlers.push(r);
          });
      },
      trackButtonClick: nn,
    }),
    mt = Object.freeze({
      __proto__: null,
      PerformanceNavigationTimingPlugin: rn,
    }),
    pt = {},
    vt = !1,
    gt = {
      loadWebVitalsScript: !0,
      webVitalsSource: "https://unpkg.com/web-vitals@3/dist/web-vitals.iife.js",
      context: [],
    },
    ht = Object.freeze({ __proto__: null, WebVitalsPlugin: cn }),
    yt = window.GlobalSnowplowNamespace.shift(),
    wt = window[yt];
  wt.q = (function (n, t) {
    function o(e) {
      var n = e.split(":");
      return [(e = n[0]), (n = 1 < n.length ? n[1].split(";") : void 0)];
    }
    function r(e, n) {
      if (h[e])
        try {
          h[e].apply(null, n);
        } catch (n) {
          hn.error(e + " failed", n);
        }
      else hn.warn(e + " is not an available function");
    }
    function i(e) {
      h = un(un({}, h), e);
    }
    function a(t) {
      if (
        "string" != typeof t[0] ||
        "string" != typeof t[1] ||
        (void 0 !== t[2] && "object" != typeof t[2])
      )
        hn.error("newTracker failed", Error("Invalid parameters"));
      else {
        var o = "".concat(n, "_").concat(t[0]),
          r = t[2],
          a = (function (n) {
            var t,
              o =
                null !== (t = null == n ? void 0 : n.contexts) && void 0 !== t
                  ? t
                  : {};
            o.performanceTiming,
              (n = o.gaCookies),
              o.geolocation,
              o.clientHints,
              (t = o.webVitals),
              (o = o.performanceNavigationTiming);
            var r = [];
            if (n) {
              var i = e(Bn, ["GaCookiesPlugin"]);
              (n = "object" == typeof n ? ge(n) : ge()), r.push([n, i]);
            }
            return (
              (i = e(Gn, ["LinkClickTrackingPlugin"])),
              r.push([he(), i]),
              (i = e(Kn, ["FormTrackingPlugin"])),
              r.push([Oe(), i]),
              (i = e(et, ["ErrorTrackingPlugin"])),
              r.push([je(), i]),
              (i = e(tt, ["AdTrackingPlugin"])),
              r.push([Le(), i]),
              (i = e(rt, ["SiteTrackingPlugin"])),
              r.push([Ue(), i]),
              (i = e(ct, ["SnowplowEcommercePlugin"])),
              r.push([Re(), i]),
              (i = e(st, ["EnhancedConsentPlugin"])),
              r.push([Ke(), i]),
              (i = e(ft, ["ButtonClickTrackingPlugin"])),
              r.push([en(), i]),
              o &&
                ((i = e(mt, ["PerformanceNavigationTimingPlugin"])),
                r.push([rn(), i])),
              t &&
                ((i = e(ht, ["WebVitalsPlugin"])),
                r.push([cn("object" == typeof t ? t : void 0), i])),
              r
            );
          })(r);
        (o = me(
          o,
          t[0],
          "js-".concat(g),
          t[1],
          d,
          un(un({}, r), {
            plugins: a.map(function (e) {
              return e[0];
            }),
          })
        ))
          ? (f.push(o.id),
            a.forEach(function (e) {
              i(e[1]);
            }))
          : hn.warn(t[0] + " already exists");
      }
    }
    function c(n, t) {
      function o(e) {
        Object.prototype.hasOwnProperty.call(m, e) &&
          (s.clearTimeout(m[e].timeout),
          delete m[e],
          0 === Object.keys(m).length &&
            p.forEach(function (e) {
              var n = e[1];
              void 0 !== h[e[0]] &&
                h[e[0]].length > n.length &&
                Array.isArray(n[0]) &&
                (n = [{}, n[0]]),
                r(e[0], n);
            }));
      }
      var a;
      if (
        "string" == typeof n[0] &&
        v(n[1]) &&
        (void 0 === n[2] || Array.isArray(n[2]))
      ) {
        var c = n[0],
          u = n[1],
          d = n[2];
        (null === (a = n[3]) || void 0 === a || a) &&
          ((a = s.setTimeout(function () {
            o(c);
          }, 5e3)),
          (m[c] = { timeout: a })),
          (a = l.createElement("script")).setAttribute("src", c),
          a.setAttribute("async", "1"),
          W(
            a,
            "error",
            function () {
              o(c),
                hn.warn(
                  "Failed to load plugin ".concat(u[0], " from ").concat(c)
                );
            },
            !0
          ),
          W(
            a,
            "load",
            function () {
              var n = u[1],
                r = s[u[0]];
              if (r && "object" == typeof r) {
                var a = r[n];
                (n = e(r, ["symbol" == typeof n ? n : n + ""])),
                  h.addPlugin.apply(null, [{ plugin: a.apply(null, d) }, t]),
                  i(n);
              }
              o(c);
            },
            !0
          ),
          l.head.appendChild(a);
      } else {
        if (
          "object" == typeof n[0] &&
          "string" == typeof n[1] &&
          (void 0 === n[2] || Array.isArray(n[2]))
        ) {
          var f = n[0],
            g = n[1];
          if (((a = n[2]), f))
            return (
              (n = f[g]),
              (f = e(f, ["symbol" == typeof g ? g : g + ""])),
              h.addPlugin.apply(null, [{ plugin: n.apply(null, a) }, t]),
              void i(f)
            );
        }
        hn.warn("Failed to add Plugin: ".concat(n[1]));
      }
    }
    function u() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      for (t = 0; t < e.length; t += 1) {
        var i = e[t],
          u = Array.prototype.shift.call(i);
        if (z(u))
          try {
            for (var s = {}, l = 0, d = pe(f, An); l < d.length; l++) {
              var v = d[l];
              s[v.id.replace("".concat(n, "_"), "")] = v;
            }
            u.apply(s, i);
          } catch (e) {
            hn.error("Tracker callback failed", e);
          } finally {
            continue;
          }
        (u = (s = o(u))[0]),
          (s = s[1]),
          "newTracker" === u
            ? a(i)
            : ((s = s
                ? s.map(function (e) {
                    return "".concat(n, "_").concat(e);
                  })
                : f),
              "addPlugin" === u
                ? c(i, s)
                : ((l = void 0),
                  (l =
                    0 < i.length
                      ? [i[0], s]
                      : void 0 !== h[u] && 2 === h[u].length
                      ? [{}, s]
                      : [s]),
                  0 < Object.keys(m).length ? p.push([u, l]) : r(u, l)));
      }
    }
    for (
      var s = window,
        l = document,
        d = ve(),
        f = [],
        m = {},
        p = [],
        g = "4.3.1",
        h = e(Ln, ["version"]),
        y = 0;
      y < t.length;
      y++
    )
      u(t[y]);
    return { push: u };
  })(yt, wt.q);
})();
//# sourceMappingURL=sp.js.map
