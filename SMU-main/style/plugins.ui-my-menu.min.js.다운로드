/*! @kyobobook/kbb-js v1.0.10 (build 20250618-103334) */
"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.__KbbJS__=e():(t.__KbbJS__=t.__KbbJS__||{},t.__KbbJS__["plugins.ui-my-menu"]=e())}(self,(function(){return(self.webpackChunk_KbbJS_=self.webpackChunk_KbbJS_||[]).push([[845],{56874:function(t,e,a){a.r(e),a.d(e,{default:function(){return A}});var n=a(35820),s=a.n(n),l=a(57170),i=a.n(l),c=a(51956);const r="category",o="service",u={set:"set",def:"del"},h={set:"set",delete:"del",save:"save",back:"back"},p={all:"all",check:"check",allCheck:"allCheck"};function d(){return this.$http((0,c.getGlobalOption)("api.urls.common.exhib.menu"))}function b(t,e){const a={dsplMenuNum:t};return this.$http((0,c.getGlobalOption)("api.urls.common.exhib.addMenu"),{method:"POST",body:a})}function m(t,e){const a={dsplMenuNum:t};return this.$http((0,c.getGlobalOption)("api.urls.common.exhib.deleteMenu"),{method:"POST",body:a})}function _(){return this.$http((0,c.getGlobalOption)("api.urls.common.exhib.getCustomer"))}function g(t){const e=(0,c.createEl)("title_wrap title_size_md has_btn"),a=(0,c.createEl)({class:"fc_green",text:"0"},"span"),n=(0,c.createEl)("title_heading","span").append(["즐겨찾기 ",a]),s=(0,c.createEl)("right_area");return this.setElement("header.count",a),this.setElement("header.rightArea",s),e.append([n,s])}function f(t,e,a){const n=$('<button type="button" class="btn_xxs btn_line_primary"><span class="ico_favorite_setting"></span><span class="text">설정</span></button>'),s=$('<button type="button" class="btn_xxs btn_line_gray" '.concat(a?"disabled":"",'><span class="ico_favorite"></span><span class="text">전체해제</span></button>')),l=$('<button type="button" class="btn_xxs btn_primary" '.concat(a?"disabled":"",'><span class="ico_favorite_save"></span><span class="text">저장</span></button>'));[{el:n,key:h.set},{el:s,key:h.delete},{el:l,key:h.save}].forEach((t=>{let{el:a,key:n}=t;a.on("click",(t=>{switch(n){case h.set:this.emit("status-change",{layout:e,status:u.set});break;case h.delete:this.ui.alert({code:"AL_02_0005"}).then((t=>{t.value&&this.getElement("list.".concat(e)).length&&(this.getElement("layout.".concat(e)).find(".fc_green").text("0"),this.getElement("list.".concat(e)).find(".active").removeClass("active"),this["".concat(e,"MenuData")]=[])}));break;case h.save:d.call(this,e).then((t=>{const{data:a}=t;((null==a?void 0:a.markCategory)||[]).length>0&&null!=this.welcomeModule&&e===r&&this.welcomeModule.emit("update-menu",{data:this.categoryMenuData}),this.emit("status-change",{layout:e,status:u.def})}))}}))}));let i=null;switch(t){case h.set:i=n;break;case h.delete:i=s;break;case h.save:i=l}return this.setElement("btn.".concat(t,".").concat(e),i),i}function y(t){const e=(0,c.createEl)("fold_box_list","ul");this.setElement("list.".concat(t),e);return(0,c.createEl)({class:"fold_box_wrap type_line","data-type":"multi"}).append(e)}function v(t,e){function a(e,a){const{dsplMenuName:n,dsplMenuNum:s,active:l,saleCmdtDvsnCode:i,saleCmdtClstCode:r,mobileWebLinkUrladrs:o}=e,h=(0,c.createEl)({class:"btn_favorite".concat(l?" active":""),type:"button",html:'<span class="menu_name">'.concat(n,'</span><span class="hidden">즐겨찾기 추가</span>')},"button");return h.on("click",(e=>{if(this["".concat(t,"Status")]===u.def)return void(window.location.href=(0,c.parseStageURL)(o));const l=h.hasClass("active"),p=h.closest(".fold_box").find(".fold_box_header .fc_green"),d=this.getElement("header.count"),_=parseInt(p.text()),g=parseInt(d.text());l?m.call(this,s,h).then((()=>{p.text(_-1),d.text(g-1),this["".concat(t,"MenuData")]=this["".concat(t,"MenuData")].filter((t=>t.dsplMenuNum!==s)),h.removeClass("active"),this.ui.toast("카테고리를 등록 해제했습니다.")})):b.call(this,s,h).then((()=>{p.text(_+1),d.text(g+1),this["".concat(t,"MenuData")]=[...this["".concat(t,"MenuData")],{dsplMenuNum:s,saleCmdtDvsnCode:i,saleCmdtClstCode:r,text:"[".concat(a.dsplMenuName,"] ").concat(n)}],h.addClass("active"),this.ui.toast("즐겨찾기에 선택한 카테고리를 등록했습니다.")}))}))}return e.filter((t=>{let{menuLvl:e,subLnb:a}=t;return 0===e&&a.length>0})).map((t=>(0,c.createEl)("fold_box".concat(t.subLnb.length?" expanded":""),"li").append([(0,c.createEl)({class:"fold_box_header",html:"".concat(t.dsplMenuName,' <span class="fc_green">').concat(t.subLnb.filter((t=>{let{active:e}=t;return e})).length,'</span> <button type="button" class="btn_fold"><span class="hidden">컨텐츠 열기</span></button>')}),t.subLnb.length?(0,c.createEl)("fold_box_contents").append((0,c.createEl)("menu_favorite_list","ul").append(t.subLnb.map((e=>(0,c.createEl)("favorite_item","li").append(a.call(this,e,t)))))):null])))}var M=a(91829),E=a.n(M);function k(t,e,a){a&&0===a.length&&(a=null);return e.filter((t=>{let{menuLvl:e}=t;return 0===e})).map((n=>({...n,subLnb:e.filter((e=>{const{menuLvl:s,hgrnDsplMenuNum:l,dsplMenuNum:i}=e;return null==a?1===s&&l===n.dsplMenuNum:(a.some((t=>t.dsplMenuNum===i))?e.active=!0:e.active=!1,p.allCheck===t?1===s&&l===n.dsplMenuNum&&a:!(1!==s||l!==n.dsplMenuNum||!a)&&a.some((t=>t.dsplMenuNum===i)))}))})))}function x(t,e,a){this["_".concat(t,"MenuData")]=a.data.filter((a=>{var n;let{dsplMenuNum:s}=a;return E()(n=e[t===r?"markCategory":"markService"]).call(n,s)})).map((t=>{const{dsplMenuName:e,hgrnDsplMenuNum:n}=t,s=a.data.find((t=>0===t.menuLvl&&t.dsplMenuNum===n));return t.text="[".concat(s.dsplMenuName,"] ").concat(e),t})),this["_".concat(t,"Data")]=a.data,this["_".concat(t,"Menu")]=k(p[this["".concat(t,"MenuData")].length?"check":"all"],this["".concat(t,"Data")],this["".concat(t,"MenuData")])}var w=a(27545);function C(){$(".service_swiper_wrap").length>0&&$(".service_swiper_wrap").each((function(){const t=$(this);$(".swiper-slide",t).length>1?CustomSwiper(t.find(".swiper-container").get(0),{slidesPerView:"auto",speed:500,scrollbar:{el:$(".swiper-scrollbar",t)[0],hide:!0}}):$(".swiper-scrollbar",t).remove()}))}function D(){const t=$("#welcome_header_wrap .gnb_wrap").find(".anb_wrap");t.find(".anb_area .tab_wrap").length>0&&t.find(".anb_area .tab_wrap").on({tabsactivate:function(t,e){if($(e.newPanel).hasClass("anb_service")){$(e.newPanel).find(".all_service_list").masonry({itemSelector:".anb_service .all_service_list .all_service_item",horizontalOrder:!0,transitionDuration:0,initLayout:!1}).masonry()}}}),this.ui.pubScript("setTabs",t.find(".tab_wrap")),this.ui.pubScript("setFoldBox","#tabAnbCategoryKyobo .fold_box_wrap"),this.ui.pubScript("setCustomScroll","#welcome_header_wrap .gnb_wrap .anb_area")}class S extends c.UiPluginsModule{constructor(){super("my-menu",{initList:[c.InitPartial.AUTHORIZE],dependOn:[c.ResName.KBB_CM_SCRIPT]}),this.initOption(),this._categoryData=[],this._categoryMenu=[],this._categoryMenuData=[],this._serviceData=[],this._serviceMenu=[],this._cserviceMenuData=[],this.auth.ready().then((()=>{this.emit(c.CommonEvent.PARTIAL_INIT,{name:c.InitPartial.AUTHORIZE})})),this.on("status-change",(t=>{let{layout:e,status:a}=t;this["".concat(e,"Status")]=a,this.updateDom(e,a)}))}initOption(){Object.assign(this.options,{root:"#popMainMenu",category:"#tabFavoriteCategory",service:"#tabFavoriteService",store:".my_store"})}get categoryStatus(){return this._categoryStatus}set categoryStatus(t){this._categoryStatus=t}get serviceStatus(){return this._serviceStatus}set serviceStatus(t){this._serviceStatus=t}get $root(){return $(this.getOption("root"))}get categoryMenu(){return this._categoryMenu}get categoryData(){return this._categoryData}get categoryMenuData(){return this._categoryMenuData}set categoryMenuData(t){this._categoryMenuData=t,this.categoryMenuData.length>0?this.getElement("btn.".concat(h.save,".category")).attr("disabled",!1):this.getElement("btn.".concat(h.save,".category")).attr("disabled",!0)}get serviceMenu(){return this._serviceMenu}get serviceData(){return this._serviceData}get serviceMenuData(){return this._serviceMenuData}set serviceMenuData(t){this._serviceMenuData=t,this.categoryMenuData.length>0?this.getElement("btn.".concat(h.save,".service")).attr("disabled",!1):this.getElement("btn.".concat(h.save,".service")).attr("disabled",!0)}get welcomeModule(){return this.modules.get("uiWelcome")}get userModel(){return this.modules.get("user").model}domReady(){const t=this.isMobile?"003":"002";if(this.ua.isMobile)C.call(this),this.$root.find(".quick_menu_list .attendance").on("click",(t=>{t.preventDefault();const e=(0,c.parseStageURL)("/EVT/daily-check");this.authorized&&this.ua.isMobile?window.location.href=e:this.auth.redirectLogin(e)})),this.authorized&&this.ua.isMobile?(_.call(this).then((t=>{const{data:e}=t;null!=e&&null!=e&&e.strName})),d.call(this).then((e=>{const{data:a}=e;$("#welcome_my_content").css("display",a.markCategory.length>0?"block":"none");const n="/api".concat((0,c.getGlobalOption)("api.urls.common.exhib.catglnb"),"?termlDvsnCode=003&maxLevel=1");this.$http(n).then((t=>{x.call(this,r,a,t),this.categoryDomInit()}));const s="/api".concat((0,c.getGlobalOption)("api.urls.common.exhib.svrMenu"),"?termlDvsnCode=").concat(t,"&maxLevel=1");this.$http(s).then((t=>{x.call(this,o,a,t),this.serviceDomInit()}))})).finally((()=>{this.initialized=!0}))):this.$root.find('[href="#tabMainMenuFavorite"]').on("click",(t=>{t.preventDefault(),this.auth.redirectLogin()}));else{const t=window.location.href;if(/\/perform\/test2[/]?$/.test(t)){return void $("#welcome_header_wrap").find(".anb_wrap .btn_anb").one("click.menu",(t=>{s().allSettled([{id:"tabAnbCategorySam",url:"/display/pc/tabAnbCategorySam.html",encode:"UTF-8"},{id:"tabAnbCategoryHotTracks",url:"/display/pc/tabAnbCategoryHotTracks.html",encode:"EUC-KR"},{id:"tabAnbCategoryEbook",url:"/display/pc/tabAnbCategoryEbook.html",encode:"UTF-8"},{id:"tabAnbCategoryKyobo",url:"/display/pc/tabAnbCategoryKyobo.html",encode:"UTF-8"},{id:"tabAnbService",url:"/display/pc/tabAnbService.html",encode:"UTF-8"}].map((t=>{let e="/api/exhib/html";return null!=t&&(e+="?"+new(i())(t).toString()),(0,c.customFetch)(e).then((t=>t))}))).then((t=>t.filter((t=>{let{status:e}=t;return"fulfilled"===e})).map((t=>{let{value:e}=t;return e})))).catch((t=>{})).then((t=>{const e=function(t){const e=t.find((t=>{let{id:e}=t;return"tabAnbService"===e}))||null;return(0,c.createEl)("anb_area").append((0,c.createEl)("tab_wrap").append([(0,c.createEl)("tab_list_wrap").append((0,c.createEl)("tabs","ul").append([(0,c.createEl)("tab_item","li").append((0,c.createEl)({href:"#tabAnbCategory",class:"tab_link"},"a").append((0,c.createEl)({class:"tab_text",text:"카테고리 전체보기"},"span"))),(0,c.createEl)("tab_item","li").append((0,c.createEl)({href:"#tabAnbService",class:"tab_link"},"a").append((0,c.createEl)({class:"tab_text",text:"서비스 전체보기"},"span")))])),(0,c.createEl)({id:"tabAnbCategory",class:"tab_content"}).append((0,c.createEl)("tab_wrap type_md channel").append((0,c.concat)([(0,c.createEl)("tab_list_wrap").append((0,c.createEl)("tabs","ul").append([(0,c.createEl)("tab_item","li").append((0,c.createEl)({href:"#tabAnbCategoryKyobo",class:"tab_link"},"a").append((0,c.createEl)({class:"tab_text",text:"교보문고"},"span"))),(0,c.createEl)("tab_item","li").append((0,c.createEl)({href:"#tabAnbCategoryEbook",class:"tab_link"},"a").append((0,c.createEl)({class:"tab_text",text:"eBook"},"span"))),(0,c.createEl)("tab_item","li").append((0,c.createEl)({href:"#tabAnbCategorySam",class:"tab_link"},"a").append((0,c.createEl)({class:"tab_text",text:"sam"},"span"))),(0,c.createEl)("tab_item","li").append((0,c.createEl)({href:"#tabAnbCategoryHotTracks",class:"tab_link"},"a").append((0,c.createEl)({class:"tab_text",text:"핫트랙스"},"span")))]))],t.filter((t=>{let{id:e}=t;return"tabAnbService"!==e})).map((t=>{let{html:e}=t;return $(e)}))))),null!=e?$(e.html):null]))}(t);$(".anb_wrap").append(e),setTimeout((()=>{D.call(this),w.e_.call(this,"/INK/ink_wel_new/ink_wel@wel_14?callback=").then((t=>{const a=t||[];var n;a.length>0&&e.find("#tabAnbCategory #tabAnbCategoryKyobo .banner_box").append((0,c.createEl)({href:a[0].linkUrl,class:"banner_link",target:"true"===(null===(n=a[0])||void 0===n?void 0:n.outRinkRanding)?"_blank":"_self",html:'<img src="'.concat(a[0].imgFileUrl,'" alt="').concat(a[0].imgAltTagCntt,'">')},"a"))}))}))}))}))}w.e_.call(this,"/INK/ink_wel_new/ink_wel@wel_14?callback=").then((t=>{const e=t||[];var a;e.length>0&&$("#tabAnbCategory #tabAnbCategoryKyobo .banner_box").append((0,c.createEl)({href:e[0].linkUrl,class:"banner_link",target:"true"===(null===(a=e[0])||void 0===a?void 0:a.outRinkRanding)?"_blank":"_self",html:'<img src="'.concat(e[0].imgFileUrl,'" alt="').concat(e[0].imgAltTagCntt,'">')},"a"))}))}}categoryDomInit(){const t=this.$root.find(this.getOption(r));this.setElement("layout.".concat(r),t),this.emit("status-change",{layout:r,status:u[this.categoryMenuData.length?"def":"set"]})}serviceDomInit(){const t=this.$root.find(this.getOption(o));this.setElement("layout.".concat(o),t),this.emit("status-change",{layout:o,status:u[this.serviceMenuData.length?"def":"set"]})}updateDom(t,e){const a=this.getElement("layout.".concat(t));switch(a.empty(),a.append([g.call(this,t),this["".concat(t,"MenuData")].length?null:(0,c.createEl)({class:"info_text_box",html:" 즐겨찾기 설정을 통해<br /> 즐겨 찾는 메뉴를 한번에 모아 볼 수 있어요 "}),y.call(this,t)]),e){case u.set:this.getElement("header.rightArea").empty().append([f.call(this,h.save,t,0===this["".concat(t,"MenuData")].length)]),this.getElement("list.".concat(t)).append(v.call(this,t,k(p.allCheck,this["".concat(t,"Data")],this["".concat(t,"MenuData")])));break;case u.def:this.getElement("header.rightArea").empty().append([f.call(this,h.set,t)]),this.getElement("list.".concat(t)).append(v.call(this,t,k(p.check,this["".concat(t,"Data")],this["".concat(t,"MenuData")])))}this.getElement("header.count").text(this["".concat(t,"MenuData")].length),setTimeout((()=>{this.ui.pubScript("setFoldBox",a)}))}}var A=new S},27545:function(t,e,a){a.d(e,{e_:function(){return s}});a(13792);var n=a(96526);function s(t){const e=(0,n.c2)("/api".concat((0,n._7)("api.urls.adv")),{url:t});return this.$http(e).catch((t=>[]))}}},function(t){return t.O(0,[321,160,712],(function(){return e=56874,t(t.s=e);var e})),t.O()}])}));