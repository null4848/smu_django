/*! @kyobobook/kbb-js v1.0.10 (build 20250618-103334) */
"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.__KbbJS__=e():(t.__KbbJS__=t.__KbbJS__||{},t.__KbbJS__.core=e())}(self,(function(){return(self.webpackChunk_KbbJS_=self.webpackChunk_KbbJS_||[]).push([[321],{33254:function(t,e,n){n.r(e);var i={};n.r(i),n.d(i,{n1:function(){return tt},F$:function(){return et},ae:function(){return q}});var s={};n.r(s),n.d(s,{e:function(){return bt}});var o={};n.r(o),n.d(o,{alarmApply:function(){return Hn},cart:function(){return Pn},cartSize:function(){return Tn},eventApply:function(){return xn},saveWatchingHistory:function(){return jn},subscribe:function(){return Kn},wish:function(){return Cn},wishList:function(){return kn}});var r={};n.r(r),n.d(r,{createPdtImgWrap:function(){return Gn}});var a={};n.r(a),n.d(a,{date:function(){return Qn},dom:function(){return w},form:function(){return qn},location:function(){return T},parseValues:function(){return _},str:function(){return Xn},url:function(){return I}});var l=n(91829),c=n.n(l),u=n(82324),h=n(96526);class d extends u.oG{constructor(){super("ua"),this.initialized=!0}get isMobile(){return this.isDevice("isMobile")}get isMobileApp(){return this.isDevice("isMobileApp")}get isMobileWeb(){return this.isMobile&&!this.isMobileApp}get isPC(){return!this.isMobile}get isIOS(){return this.isDevice("isIOS")}get isAndroid(){return this.isDevice("isAndroid")}get isAndroidApp(){return!!this.isMobileApp&&this.isAndroid}get isIosApp(){return!!this.isMobileApp&&this.isIOS}get isMSIE(){return this.isDevice("isMSIE")}get isMac(){return this.isDevice("isMac")}get isKyoboApp(){var t;return c()(t=navigator.userAgent).call(t,"x-mok-app:kyobobookapp")}isDevice(t){const e=this.getOption("device."+t,!1);return(0,h.Nx)(e)}}new d,n(63468);var p=n(35820),g=n.n(p),m=n(13792),f=n(48306),b=n(16359),_=n(83890),E=n(54174);function v(t){let e=t.split(".");if(e.length<2)return null;e=e[1];const n=(0,_.decodeBase64)(e,"json"),i={};return Object.keys(n).forEach((t=>{const e=n[t];i[(0,m.eV)(t)]=e})),i}function O(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(null!=e&&e.length||(e=null),t){case b.EI.ACCESS_TOKEN:case b.EI.REFRESH_TOKEN:return}(0,E.d)(t,e,n),this.emit(b.n5.CHANGE_TOKEN,{key:t,value:e})}function C(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"exp";return(0,m.HD)(t)?t=(0,m.U2)(v(t),e):(0,m.PO)(t)&&(t=(0,m.U2)(t,e)),new Date(1e3*t)}function A(){var t,e,n;const i={};let s=null;return null!=this.accessToken&&(s=this.credentials||v(this.accessToken),null!=s&&(i.access=s,i.iat=C(s.iat),i.accessExp=C(s.exp))),null!=this.refreshToken&&(s=v(this.refreshToken),null!=s&&(i.refresh=s,i.refreshExp=C(s.exp))),{iat:(null===(t=i.iat)||void 0===t?void 0:t.toString())||null,exp:{access:(null===(e=i.accessExp)||void 0===e?void 0:e.toString())||null,refresh:(null===(n=i.refreshExp)||void 0===n?void 0:n.toString())||null}}}function k(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";t=t.toUpperCase();const n=(0,m.U2)(b.WV,[t,e].join("."));if(null!=n)return"/".concat(t,"/").concat(n)}var w=n(62839),I=n(5878),T=n(9948);const{CLICK:y}=f.CommonEvent,S=k("MYR"),D=[{name:b.ku.INK,slt:"HEADER .gnb_search_wrap UL.user_menu_list LI.user_menu_item.my"},{name:b.ku.MOK,slt:"SECTION.docker_wrapper UL.docker_list>LI.docker_item.my"}];function L(){const t=this.getElement("auth-toggle-btn"),e=this.getElement("join-toggle-btn");if(null==t||!t.length)return;let n,i,s;if(this.authorized){n="#",s="logout",i="로그아웃";const o=null!=e&&e.length;(o||t.length)&&(o&&e.parent().remove(),this.setElement("join-toggle-btn",null))}else{if(n="#",s="login",i="로그인",null==e||!e.length){const t=(0,w.createEl)({href:(0,I.parseStageURL)("/MBR/join"),class:"util_link",text:"회원가입"},"A");this.getElement("header.wrap").find("UL.customer_service_list").prepend((0,w.createEl)("customer_service_item","LI").append(t)),this.setElement("join-toggle-btn",t)}e.closest("li").show()}t.closest("li").show(),t.attr({href:n,"data-role":s}).text(i)}function R(t){return t.on(y,(t=>{t.preventDefault();let e=$(t.target);"A"!==e[0].tagName&&(e=e.closest("A[data-role]"));return"login"===e.data("role")?this.redirectLogin():this.redirectLogout()}))}function M(){const t=this.getElement("body");D.forEach((e=>{let{name:n,slt:i}=e;const s=t.find(i);if(!s.length)return;this.setElement("user.".concat(n,".picture.wrap"),s);const o=s.children("A");o.length&&"ssr"!==o.data("render")&&(this.setElement("user".concat(n,".picture.anchor"),o),o.attr("href","#").off(y).on(y,(t=>{if(t.preventDefault(),t.stopPropagation(),!this.authorized)return this.redirectLogin(S);(0,T.moveTo)(S)})))}))}function U(){const t=this.getElement("buggerMenu");[{cls:".quick_menu_item.order",link:k("ORD","list")},{cls:".quick_menu_item.bank_book",link:k("ORD","coupon")}].forEach((e=>{let{cls:n,link:i}=e;const s=t.find(n).children("A");s.length&&s.attr("href","#").off(y).on(y,(t=>{if(t.preventDefault(),t.stopPropagation(),!this.authorized)return this.redirectLogin(i);(0,T.moveTo)(i)}))}))}function N(){const t=$("BODY");this.setElement("body",t);const e=t.find(">.wrapper>header"),n=t.find(">.wrapper>footer");this.setElement("header.wrap",e),this.setElement("footer.wrap",n);let i=null;i=this.isMobile?n.find("UL.footer_menu_list>LI>A.footer_menu_link"):e.find("UL.customer_service_list>LI>A.util_link");const s=i.filter(':contains("로그인")');this.setElement("auth-toggle-btn",s);const o=i.filter(':contains("회원가입")');this.setElement("join-toggle-btn",o),s.length&&R.call(this,s);const r=e.children(".header_inner");if(this.setElement("header.inner",r),M.call(this),this.isMobile){const t=$("#popMainMenu");this.setElement("buggerMenu",t),U.call(this)}this.emit(b.n5.DOM_INITIALIZED)}function P(){this.on(b.n5.AUTHORIZE_START,(()=>this.pending=!0)),this.on(b.n5.AUTHORIZE_FINISH,(t=>{this.authorizeStack.forEach((e=>{let{resolve:n,reject:i}=e;return t.error?i(t.error):n(t.data)})),this.pending=!1})),this.bind([b.n5.AUTHORIZE_SUCCESS,b.n5.AUTHORIZE_FAILED],(t=>{switch(t.type){case b.n5.AUTHORIZE_SUCCESS:this._authorized=null!=t.data;break;case b.n5.AUTHORIZE_FAILED:this._authorized=!1}!this.authorized&&this.user.active&&this.user.emit(f.CommonEvent.CHANGE,{data:null}),this.emit(b.n5.AUTHORIZE_FINISH,t)})),this.user.on(f.CommonEvent.CHANGE,(t=>{let{data:e}=t;null==e&&this.user.clear()}))}class x extends u.oG{constructor(){super("auth",{initList:[f.bn.DOM_READY,f.bn.AUTHORIZE]}),this._expires=null,this._pending=!1,this._authorizeStack=[],this._autoLogin=null,this._authorized=!1,P.call(this),$((()=>{N.call(this),this.emit(f.CommonEvent.PARTIAL_INIT,{name:f.bn.DOM_READY})})),this.once(f.CommonEvent.PARTIAL_INIT_ALLDONE,(()=>{L.call(this),this.authorized,this.initialized=!0})),this.getOption("init.authorize",!0)?this.authorize().finally((()=>{this.emit(f.CommonEvent.PARTIAL_INIT,{name:f.bn.AUTHORIZE})})):this.emit(f.CommonEvent.PARTIAL_INIT,{name:f.bn.AUTHORIZE})}get authorizeStack(){return this._authorizeStack}get accessToken(){return(0,h.ej)(b.EI.ACCESS_TOKEN)}get refreshToken(){return(0,h.ej)(b.EI.REFRESH_TOKEN)}get noAuthMode(){return null==this.accessToken&&null==this.refreshToken}get credentials(){const t=this.accessToken;if(null==t)return null;try{return v(t)}catch(t){}return null}get autoLogin(){const t=(0,h.ej)(b.EI.AUTO_LOGIN);return null!=t&&(0,h.Nx)(t)}set autoLogin(t){const e=t?"Y":null;this._autoLogin=t,O.apply(this,[b.EI.AUTO_LOGIN,e,{expires:t?365:0}])}get pending(){return this._pending}set pending(t){t!==this.pending&&(this._pending=t)}get testMode(){return!!this.isDevHost&&"test"===this.urlinfo.debug("auth")}get authorized(){return this._authorized}get timeData(){return A.call(this)}renew(t){return this.emit(b.n5.AUTHORIZE_RENEW,{data:{authBy:t,credentials:this.credentials}}),this.user.match(this.credentials)?this.success(this.user.model):this.user.fetch(this.credentials).then((t=>this.success(t))).catch((t=>this.error(t)))}success(t){return this.emit(b.n5.AUTHORIZE_SUCCESS,{data:t}),g().resolve(t)}error(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i="UNDEFINED";(0,m.HD)(t)?i=t:(0,m.PO)(t)&&(e=e||(null==t?void 0:t.resultMessage)||(null==t?void 0:t.message),(0,m.HD)(e)&&(e.indexOf("JWT signature")>-1?i="JWT_INVALID_SIGNATURE":e.indexOf("JWT expired")>-1&&(i="JWT_EXPIRED")));const s=new Error(e||"UNKNOWN_ERROR");return s.name=i,n&&this.emit(b.n5.AUTHORIZE_FAILED,{error:s}),s}reissue(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.emit(b.n5.AUTHORIZE_START);const e=(0,h.Od)("auth","reissue"),n={strict:{ok:!0},method:f.w$.POST};return(0,h.rK)(e,n).then((e=>this.resetAuthTokens(e.data,t,b.EI.REFRESH_TOKEN))).catch((t=>{throw this.error(t)}))}authorize(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.pending)return new(g())(((t,e)=>{this.authorizeStack.push({resolve:t,reject:e})}));if(this.emit(b.n5.AUTHORIZE_START),this.noAuthMode)return g().resolve(this.success());const e=(0,h.Od)("auth","verify");return(0,h.rK)(e,{strict:{ok:!0}}).then((()=>t?this.renew(b.EI.ACCESS_TOKEN):this.success(this.credentials))).catch((e=>this.reissue(t))).catch((t=>this.success()))}clearTokens(){this.emit(b.n5.CHANGE_TOKEN,{key:b.EI.ACCESS_TOKEN}),this.user.clear(),this.emit(b.n5.CLEAR_TOKENS)}resetAuthTokens(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return this.emit(b.n5.AUTHORIZE_START),this.emit(b.n5.CHANGE_TOKEN,{key:b.EI.ACCESS_TOKEN}),e?this.renew(n||b.EI.ACCESS_TOKEN):this.success(this.credentials)}getLoginChannel(){let t=this.urlinfo.get("channel");null==t&&(t=this.isMobile?112:101);const e=b.pj.find((e=>{let{id:n}=e;return n===+t}));return{id:t,label:(0,m.U2)(e,"label","undefined")}}async login(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.emit(b.n5.AUTHORIZE_START),null==t)return this.error(null,"undefined login form data");const n=(0,m.U2)(t,b.U0.AUTO_LOGIN);if(this.autoLogin=(0,h.Nx)(n),this.authorized)return this.success(this.user.model||this.credentials);(0,h.Be)(t,b.U0.CHANNEL,(()=>{const{id:t}=this.getLoginChannel();return t}));const i=(0,h.Od)("auth","login.id");return(0,h.rK)(i,{method:f.w$.POST,body:t,headers:{"X-CSRF-TOKEN":t.csrfToken}}).then((t=>{if(t.statusCode!==f.oj.OK)throw t;return this.resetAuthTokens(t.data,e,b.EI.ACCESS_TOKEN)})).catch((t=>{throw this.emit(b.n5.AUTHORIZE_FAILED),t}))}logout(t){null!=this.ui&&(this.ui.loading=!0),this.clearTokens();const e=(0,h.Od)("auth","logout"),n={method:f.w$.POST};return(0,h.rK)(e,n).finally((()=>(this.emit(b.n5.LOGOUT),null==t&&(null==(t=this.urlinfo.get("continue"))?t=this.getOption("redirect.welcome"):c()(t).call(t,b.WV.MBR.logout)&&(t="/")),(0,h.Ao)(t))))}redirectLogout(t){return null==t&&(t=window.location.href),(0,h.Ao)(k("MBR","logout"),{continue:(0,h.c2)(t,{storeCode:null})})}redirectLogin(t){const e=null!=t;e&&(t=(0,h.$u)(t));const n={storeCode:null};if(this.authorized){if(!e)return;return(0,h.Ao)(t,n)}const i=this.getOption("redirect.login");(0,h.Ao)(i,{continue:(0,h.c2)(t||window.location.href,n)})}kakaoLogin(t){const e=(0,h.Od)("auth","kakaoLogin")+"?code="+t.code;return(0,h.rK)(e,{method:f.w$.POST,body:t}).catch((t=>{throw this.emit(b.n5.AUTHORIZE_FAILED),t}))}naverLogin(t){const e=(0,h.Od)("auth","naverLogin")+"?code="+t.code;return(0,h.rK)(e,{method:f.w$.POST,body:t}).catch((t=>{throw this.emit(b.n5.AUTHORIZE_FAILED),t}))}}new x;class H extends u.oG{constructor(){super("file"),this.setOption("urls",(0,h._7)("api.urls.s3")),this.initialized=!0}getApiURL(t,e,n){let i=this.getOption("urls.".concat(t));return null!=e&&(/^\//.test(e)||(e="/"+e),i+=e),(0,h.c2)("/api/s3"+i,n)}upload(t,e){return g().all(t.map((t=>this.uploadSingle(t,e))))}uploadSingle(t,e){const{fullname:n,ext:i}=(0,h.RS)(t),s=t.name,o=new window.FormData;o.append("files",t,n);const r={fileName:n,fileType:i,originName:s,uploadPath:"".concat(e,"/").concat(n)},a=this.getApiURL("upload",e,{fileName:s});return this.$http(a,{method:f.w$.POST,body:o}).then((t=>{if("OK"!==t.status)throw new Error("Failed to upload file");return r})).catch((t=>Object.assign(r,{errors:t})))}list(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";const e=this.getApiURL("files",t);return this.$http(e).then((t=>{})).catch((t=>{}))}delete(t,e){const n=this.getApiURL("files",t,{fileName:e}),i=[t,e].join("/");return this.$http(n,{method:f.w$.DELETE}).then((t=>{if("OK"!==t.status)throw new Error("Failed to delete file");return{filepath:i}}))}get(t,e){const n=this.getApiURL("get",t,{fileName:e});return this.$http(n).then((t=>{if("OK"!==t.status)throw new Error("Failed to get file");return t})).catch((t=>{throw t}))}}new H;var K=[{name:"checkAvailableBiometrics",callback:function(t,e){const n=this.modules.get("uiMember");null!=n&&n.emit("callbackAvailBiometrics",{data:{isAvailable:t,isEnrolled:e}})}},{name:"authBiometrics",callback:function(t,e,n){const i=this.modules.get("uiMember");null!=i&&i.emit("callbackAuthBiometrics",{data:{success:t,deviceId:e,isOverCount:n}})}},{name:"getDeviceInfo",callback:function(t){const{deviceId:e,deviceToken:n,modelName:i}=JSON.parse(t),s=this.modules.get("uiMember");null!=s&&s.emit("callbackGetDeviceInfo",{data:{deviceId:e,deviceToken:n,modelName:i}})}},{name:"getPushSettings",callback:function(t){const e=this.modules.get("uiMarketingPopup");null!=e&&e.emit("callbackGetPushSettings",{data:{eventYn:t}})}},{name:"setPushSettings",callback:function(t){const e=this.modules.get("uiMyroom");null!=e&&e.emit("callbackAppPushYn",{data:{pushYn:t}})}},{name:"getShakeInfo",callback:function(t,e){const n=this.modules.get("uiMyroom");null!=n&&n.emit("callbackShakeInfo",{data:{state:t,action:e}})}},{name:"moveToAppFavoriteSite",callback:function(t){let e;switch(t){case"002":e="/MBR/member-info/card";break;case"003":e="/ORD/myroom/benefit/giftcard";break;case"004":e="/MYR/main";break;case"005":e="/SCH/"}(0,T.moveTo)(e)}},{name:"getMemberInfo",callback:function(t){const e=this.modules.get("uiMember"),n=this.modules.get("auth");null!=e&&null!=n&&(e.emit("callbackGetMemberInfo",{data:t}),n.emit("callbackGetMemberInfo",{data:t}))}},{name:"checkDevicePushOnOff",callback:function(t){const e=this.modules.get("uiMyroom"),n=this.modules.get("uiEvent");null==e&&null==n||(null!=e&&e.emit("callbackCheckDevicePushOnOff",{data:{state:t}}),null!=n&&n.emit("callbackCheckDevicePushOnOff",{data:{state:t}}))}},{name:"getNotificationPermission",callback:function(t){const e=this.modules.get("uiMyroom");null!=e&&e.emit("callbackGetNotificationPermission",{data:{isGranted:t}})}},{name:"setNotificationPermission",callback:function(t){const e=this.modules.get("uiMyroom");null!=e&&e.emit("callbackSetNotificationPermission",{data:{state:t}})}},{name:"getStoreInfo",callback:function(t,e){const n=this.modules.get("uiMyroom");null!=n&&n.emit("callbackGetStoreInfo",{data:{type:t,name:e}})}},{name:"googleAccess",callback:function(t,e){const n=this.modules.get("uiMember");null!=n&&n.emit("callbackGoogle",{data:{success:t,userInfo:e}})}},{name:"checkLocationEnabled",callback:function(t){const e=this.modules.get("uiServiceStore"),n=this.modules.get("uiProduct");null==e&&null==n||(null!=e&&e.emit("callbackCheckLocationEnabled",{data:{enabled:t}}),null!=n&&n.emit("callbackCheckLocationEnabled",{data:{enabled:t}}))}},{name:"showLocationSettings",callback:function(t){const e=this.modules.get("uiServiceStore");null!=e&&e.emit("callbackShowLocationSettings",{data:{enabled:t}})}},{name:"getLocation",callback:function(t,e){const n=this.modules.get("uiServiceStore"),i=this.modules.get("uiProduct");null==n&&null==i||(null!=n&&n.emit("callbackGetLocation",{data:{latitude:t,longitude:e}}),null!=i&&i.emit("callbackGetLocation",{data:{latitude:t,longitude:e}}))}},{name:"setRefreshToken",callback:function(t){const e=this.modules.get("uiMember");null!=e&&e.emit("setRefreshToken",{data:{refreshToken:t}})}},{name:"setAutoLogin",callback:function(t){const e=this.modules.get("uiMember");null!=e&&e.emit("setAutoLogin",{data:{autoLogin:t}})}}],j=n(74811),F=n(44586);const G="response",B="customFnStore",z="called-custom-callback";class W extends u.oG{constructor(){super("mobi"),this._response={},this._customFnStore={},K.forEach((t=>{let{name:e,callback:n}=t;(0,m.t8)(this.response,e,n.bind(this))})),this.initialized=!0}get customCallbackList(){return this._customCallbackList}get response(){return this._response}get customFnStore(){return this._customFnStore}getCallbackNS(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;return[(0,j.II)(),this.name,e,t].join(".")}request(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.ua.isMobileApp||-1!==navigator.userAgent.toLowerCase().indexOf("x-mok-app")){(0,m.HD)(t)?t={exec:{method:t}}:(0,m.e$)(t,"exec")||(t={exec:t}),null!=e&&(0,m.t8)(t,"exec.params",e);let i=G,s=(0,m.U2)(t,"exec.method");if(null!=n){i=B,s=(0,F.Z)().replace(/-/g,"_");const t=function(){try{for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];n.apply(this,e)}catch(t){}this.emit(z,{id:s})};(0,m.t8)(this.customFnStore,s,t.bind(this)),this.once(z,(t=>{let{id:e}=t;try{delete this.customFnStore[e]}catch(t){}}))}if(t.callback=this.getCallbackNS(s,i),this.ua.isAndroid||-1!==navigator.userAgent.toLowerCase().indexOf("x-mok-app-os-type:android"))return t=JSON.stringify(t),window.Android.callNative(t);if(this.ua.isIOS||-1!==navigator.userAgent.toLowerCase().indexOf("x-mok-app-os-type:ios"))return window.webkit.messageHandlers.callNative.postMessage(t)}}}new W;var Y=n(51956),V=n(52216),J=n(38441);function Z(){const t=$('<button type="button" class="btn_dialog_close">\n        <span class="ico_dialog_close"></span><span class="hidden">닫기</span>\n      </button>'),e=$('<div class="dialog_header">\n      <div class="dialog_title"></div>\n    </div>'),n=$('<div class="dialog_contents"></div>'),i=$('<div class="dialog_footer">\n      <button type="button" class="btn_md btn_primary" ><span class="text">확인</span></button>\n    </div>');return t.on("click",(t=>{t.stopPropagation(),this.done(!1)})),i.find("button").on("click",(t=>{t.stopPropagation(),this.done(!0)})),this.setElement("dialogHeader",e),this.setElement("dialogContents",n),this.setElement("dialogFooter",i),[t,e,n,i]}function X(t,e){return(0,h.ut)({id:t,class:e?"dialog_wrap no_title_line dialog_review":"dialog_wrap dialog_review","data-class":e?"dialog_full":"dialog_lg"})}function Q(t,e){const n=$('<button type="button" class="btn_dialog_close">\n        <span class="ico_dialog_close"></span><span class="hidden">닫기</span>\n      </button>'),i=$('<div class="dialog_header">\n      <div class="dialog_title">'.concat(e,"</div>\n    </div>")),s=$('<div class="dialog_contents"></div>'),o=$('<div class="dialog_footer">\n      <button type="button" class="btn_md btn_primary" ><span class="text">확인</span></button>\n    </div>');return n.on("click",(t=>{t.stopPropagation(),this.done(!1)})),o.find("button").on("click",(t=>{t.stopPropagation(),this.done(!0)})),this.setElement("dialogHeader",i),this.setElement("dialogContents",s),this.setElement("dialogFooter",o),[n,i,s,this.isMobile?"":o]}const q="confirm",tt="cancel",et="close";class nt extends J.a{constructor(t,e){super(),this._id=t,((0,Y.isString)(e)||(0,Y.isNumber)(e))&&(e={html:""+e}),this._options=Object.assign(e,{});const n=this.getOption("review");var i;if(null==n)this._options=Object.assign({autoOpen:!0,el:(this.id,i=this.isMobile,(0,h.ut)({class:i?"dialog_wrap has_btn existing_account":"dialog_wrap has_btn type_col_btn"}))},e||{}),this.createBasicHtml();else if(this._options=Object.assign({autoOpen:!0,el:X(this.id,this.isMobile)},e||{}),(0,Y.isPlainObject)(n)){const t=(0,Y.get)(n,"pid"),e=(0,Y.get)(n,"title");this.createReviewHtml(t,e)}}createReviewHtml(t,e){this.setOption("innerHtml",Q.call(this,t,e));const n=(0,Y.createEl)({id:"ReviewDetailPopup"}).dataAttr({eventDetail:"review"}).kbbfn("ui-module",{name:"review-list",type:"klover","render-type":"detail","prod-pid":t,"view-tabs":!1,"view-prdheader":!1}).append((0,Y.createEl)("comment_wrap").kbbfnAttr({role:"tab-view"}));this.getElement("dialogContents").append(n.get(0))}createBasicHtml(){this.setOption("innerHtml",Z.call(this)),this.getElement("dialogContents").html(this.getOption("html")),this.getElement("dialogFooter").html(this.getOption("footer")),this.getOption("title")?this.getElement("dialogHeader").find(".dialog_title").html(this.getOption("title")):this.getElement("dialogHeader").hide(),this.getOption("dialogFooter")&&this.getElement("dialogFooter").find(".text").html(this.getOption("dialogFooter"))}get id(){return this._id}done(t){this.emit(i.DONE,{target:this.instance,value:t})}create(){return super.create().then((()=>((0,Y.focusOne)([tt,q,et].map((t=>this.getElement(t)))),new(g())((t=>{this.once(i.DONE,(e=>t(e))),this.once(Y.DialogEvent.CLOSE,(()=>this.done(!1)))}))))).then((t=>(this.destroy(),t)))}}const it="popup";class st extends u.tp{constructor(){super(),this._list=[],this.modules.addItem(it,this),this.initialized=!0,this.instance=null}get name(){return it}get list(){return this._list}get length(){return this.list.length}get(t){if(null==t)return this.getLastItem();const e=this.list.find((e=>{let{id:n}=e;return t===n}));return null!=e?e.instance:void 0}getLastItem(){if(this.length)return this.list[this.length-1].instance}remove(t){(0,m.Od)(this.list,{id:t})}exists(t){return null!=this.get(t)}open(t){const e=this.list.length;return this.instance=new nt(e,t).once("destroy",(()=>this.remove(e))),this.list.push({id:e,instance:this.instance}),this.instance.create()}close(){this.instance.done(!1)}}var ot=n(49804),rt=n.n(ot),at=n(49837);function lt(t,e){const n={url:e};return/\.js$/.test(e)&&(n.name=t),n}function ct(t,e){return(0,m.mf)(e)?e.call(this):(0,m.HD)(e)?lt(t,e):(0,m.PO)(e)?(0,m.e$)(e,"items")?e.items.map((n=>{if((0,m.HD)(n))return lt(t,n);if(!(0,m.PO)(n))throw new Error("[ui.import] ".concat(t," items 항목은 문자열 또는 오브젝트 유형이어야 합니다."));return Object.assign({name:t},n,(0,m.U2)(e,"options",{}))})):((0,m.e$)(e,"name")||(e.name=t),(0,m.e$)(e,"url")?e:ut.call(this,e.name)):Array.isArray(e)?e.map((e=>ct.apply(this,[t,e]))):void 0}function ut(t){const e=(0,at._7)("resource.data",{}),n=Object.keys(e);for(;n.length;){const i=n.shift();if(i===t)return ct.apply(this,[t,e[i]])}return t}function ht(t){if((0,m.HD)(t))return ut.call(this,t);if((0,m.PO)(t)&&!(0,m.e$)(t,"url")){if(!(0,m.e$)(t,"name"))throw new Error("[ui.import] ".concat(t.toString()," 최소한 이름이라도.."));const e=ut.call(this,t.name);return(0,m.XQ)(e).map((e=>Object.assign({},e,(0,m.CE)(t,["name"]))))}return t}class dt extends Y.CustomEventEmitter{constructor(t){let{id:e,data:n,options:i}=t;if(super(),this._id=e,this.error=null,(0,Y.isString)(n)&&(n={url:n}),n=Object.assign({},i,n),this.url=(0,Y.get)(n,"url"),null==this.url)throw new Error("undefined script url: ".concat(this.url));this._type=(0,Y.get)(n,"type")||(0,Y.getScriptTypeByURL)(n.url),this._attrs=function(t){const e=Object.assign({},t.attrs);return["name","version"].forEach((n=>{const i=(0,m.U2)(t,n);null!=i&&(0,m.t8)(e,"data-"+n,i)})),e}(n);const{name:s,vendor:o}=function(t){let e;/\/vendors\//.test(t)&&(e=t.replace(/.*vendors\/([^/]+).*/,"$1")),t.indexOf("?")>0&&(t=t.split("?")[0]);const n=t.split("/").filter((t=>t.length));let i=n.pop();return/\.(js|css)$/.test(i)||(i=[n.pop(),i].join("-")),{name:i,vendor:e}}(this.url);this.name=(0,Y.get)(n,"name",s);const r="js"===this.type;this._async=!!r&&(0,Y.get)(n,"async",null!=o),this._restrict=(0,Y.parseArrayVal)((0,Y.get)(n,"restrict")).map((t=>t.trim().toLowerCase())),this._load=(0,Y.get)(n,"load",!1),this._loaded=(0,Y.get)(n,"loaded",!1),this._$elem=(0,Y.get)(n,"$elem"),this.dependOn=(0,Y.parseArrayVal)((0,Y.get)(n,"dependOn")),this.loadHandle=null}get id(){return this._id}get type(){return this._type}get attrs(){return this._attrs}get async(){return this._async}get restrict(){return this._restrict}get $elem(){return this._$elem}get load(){return this._load}set load(t){this.load||t===this.load||(this._load=t,this.emit("load"))}get loaded(){return this._loaded}set loaded(t){this.loaded||t===this.loaded||(this._loaded=t,this.emit("loaded"))}get hasDataName(){return null!=this.$elem&&null!=this.$elem.data("name")}}function pt(t,e){var n,i;const s={js:[],css:[],depend:[]},o=ht.bind(this);rt()(n=(0,m.XQ)(t).map(o)).call(n).forEach((t=>{var n;let i;try{i=new dt({id:this.scriptList.length,data:t,options:e})}catch(t){return}const o=function(t){if(!/[_-]{1}(ink|mok)\.(css|js)/.test(t.url))return!1;const e=t.url.replace(/.*[_-]{1}(ink|mok)\.(css|js).*/,"$1");return e!==f.Di&&(t.name=t.name.replace(e,f.Di),t.url=t.url.replace(e,f.Di),t.dependOn&&t.dependOn.length&&(t.dependOn=t.dependOn.map((t=>t.replace(e,f.Di)))),!0)}(i),r=c()(n=i.restrict).call(n,this.viewDIR);if(null!=this.scriptList.find((t=>{let{name:e,url:n}=t;return e===i.name||n===i.url})))return;let a=o?"CHANGED":"",l=o?"orange":"green";if(r&&(a+="RESTRICT",l="red"),this.urlinfo.hasDebugLog("load-script"),r)return void this.ignoreScriptList.push(i.name);const u=i.dependOn.length?"depend":i.type;s[u].push(i),this.scriptList.push(i)}));const r=rt()(i=["css","js"].map((t=>s[t]))).call(i).map((t=>this.addScript(t))),a=s.depend.map((t=>this.isDependOnReady(t.dependOn)?this.addScript(t):new(g())((e=>t.once("loaded",(()=>e(t))))))),l=r.concat(a).filter(Boolean);return g().all(l)}const gt="kbb_loaded",mt="ui-loading",ft="KyoboBookPub";function bt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n.length||(n=(0,Y.castArray)(this.getOption("pub.args.".concat(t))||[]));const s=this.viewDIR,o=[ft,s,t].join("."),r=(0,Y.get)(window,o);if(null==r)return;this.emit(Y.UiModuleEvent.PUB_SCRIPT_CALL_BEFORE,{data:{name:t,func:r}});const a=r(...n);return this.emit(Y.UiModuleEvent.PUB_SCRIPT_CALL_AFTER,{data:{result:a}}),a}function _t(){const t=this.getOption("pub.init.scripts."+Y.VIEW_DIR)||[],e=this.getOption("pub.init.excludes")||[],n=(this.urlinfo.hasDebugLog("pub.init.excludes"),t.filter((t=>{const n=!c()(e).call(e,t);return n})));this.urlinfo.has("debug"),n.forEach((t=>bt.call(this,t)))}function Et(t){!this.activePubScript&&/ui_(in|mo)k\.js/.test(t)&&this.emit(Y.UiModuleEvent.INIT_PUB_SCRIPT,{from:"UiModuleEvent.SCRIPT_LOADED"})}function vt(){this.once(Y.UiModuleEvent.COMPLETE_LOADED,(()=>{"/sso/logout"!==this.urlinfo.pathname&&(this.hasPluginsUI||setTimeout((()=>this.loaded=!0),300))})),this.on(Y.UiModuleEvent.SCRIPT_LOADED,(t=>{const{name:e,url:n,dependOn:i,type:s,error:o}=t.target,r="js"===s,a=this.loadedScriptList.length,l=this.scriptList.length;if(!o){let t;if(null!=i&&i.length&&this.urlinfo.hasDebugLog("depend")){t=[["%c~ [DEPEND_ON]: ".concat(e),"(".concat(a,"/").concat(l,")"),"← ".concat(i.join(", "))].join(" "),"color:".concat(r?"deepskyblue":"magenta",";")]}else this.urlinfo.hasDebugLog("loaded-script")&&(t=["%c~ [LOADED]: ".concat(e," (").concat(a,"/").concat(l,")"),"color:".concat(r?"lightgreen":"green",";")]);Et.call(this,n)}l===a&&setTimeout((()=>this.emit(Y.UiModuleEvent.COMPLETE_LOADED))),this.delayLoadScripts.forEach((t=>{const{dependOn:e}=t;this.isDependOnReady(e)&&this.addScript(t)})),this.delayRunTaskList=this.delayRunTaskList.map((t=>{const{list:e,done:n,timeout:i}=t;return this.isDependOnReady(e)?(clearTimeout(i),void n()):t})).filter(Boolean)})),this.on(Y.UiModuleEvent.ADD_SUBMODULE,(t=>{let{module:e}=t;this.delayRunSubModuleList.length&&(this.delayRunSubModuleList=this.delayRunSubModuleList.map((t=>{const{id:n,done:i}=t;if(e.id!==n)return t;i(e)})).filter(Boolean))})),this.once(Y.UiModuleEvent.PARSED_DOM_SCRIPT_LIST,(()=>{this._hasDomScriptList=!0;const t=this.scriptList.filter((t=>(Et.call(this,t.url),t.hasDataName)));this.delayRunTaskList.forEach((e=>{let{list:n}=e;n.forEach((e=>{const n=t.find((t=>t.name===e));null!=n&&(this.urlinfo.hasDebugLog("depend"),this.emit(Y.UiModuleEvent.SCRIPT_LOADED,{target:n}))}))}))})),this.once(Y.UiModuleEvent.INIT_PUB_SCRIPT,(()=>{this.activePubScript||(this._activePubScript=!0,$((()=>_t.call(this))))}))}function Ot(t){const e={trigger:t[0]},n=t.data();return Object.keys(n).forEach((i=>{const s=new RegExp("^".concat(f.eU));if(!s.test(i))return;const o=(0,m.GL)(i.replace(s,""));let r=o;if(r.length){switch(r){case"depend-on":case"depend":r=f.jT.DEPEND_ON;break;default:r=r.split("-").join(".")}(0,m.t8)(e,r,n[i]),function(t,e){switch(t.data(f.eU)){case"pdt-image":case"s3-image":case"blurify":break;default:return}try{t[0].removeAttribute("data-".concat(f.eU,"-").concat(e))}catch(t){}}(t,o)}})),e}class Ct extends u.tp{constructor(t){super();let e=(0,m.U2)(t,"name");switch(/^ui/.test(e)||(e="ui-"+e),e=(0,m.GL)(e),e){case"ui-review-list":case"ui-collect-sentence":this.core.use(e).then((e=>e.create(t)));break;case"event-review-list":this.core.use("ui-review-list").then((n=>{if(!t.get("evntFuncNum")||!t.get("evntId"))throw new Error("[ui.import] ".concat(e," 초기화 오류"));return Object.assign(t,{type:"event-review"}),n.create(t)}));break;case"event-comment-list":this.core.use("ui-review-list").then((n=>{if(!t.get("evntFuncNum")||!t.get("evntId"))throw new Error("[ui.import] ".concat(e," 초기화 오류"));return Object.assign(t,{type:"event-comment"}),n.create(t)}));break;default:this.core.use(e,t)}}get core(){return this.modules.get("core")}}var At={name:"ui-module",element:{attrs:["data-kbbfn-name"]},Module:Ct},kt=[...["ui-addr-finder","ui-sns-share","ui-pop-collect-sentence","ui-recently-contents","ui-book-guide","ui-product-preview","ui-klover-review","ui-product-search","ui-spring-info"].map((t=>({name:t,element:{attrs:["data-target"]},init:"createDialog"}))),{name:"ui-review-form",init:"customInit"},{name:"ui-marketing-popup",init:"init"}];class wt extends Y.HasOptionModel{constructor(t){super(t),this.once(Y.CommonEvent.INITIALIZED,(()=>this.done())),this.auth.authorized?this.initialized=!0:this.auth.authorize().then((t=>{null!=t&&(this.initialized=!0)}))}get auth(){return this.modules.get("auth")}get user(){return this.modules.get("user")}get masking(){return null!=this.getOption("mask")}get value(){if(null==this.user.model)return;const t=this.options.name;return this.masking?this.user.getMaskingValue(t):this.user.get(t)}done(){$(this.getOption("trigger")).text(this.value)}}var It={name:"user-model",element:{attrs:["data-kbbfn-name"]},Module:wt};class Tt extends u.tp{constructor(t){super(),this.core.use("form").then((e=>{e.createGroup(t)}))}get core(){return this.modules.get("core")}}var yt={name:"form-group",Module:Tt};class St extends u.tp{constructor(t){super(),this.core.use("ui-render-list").then((e=>{e.init(t)}))}get core(){return this.modules.get("core")}}var Dt={name:"render-list",Module:St};const Lt=function(t,e,n,i){const s=this.getOption("callback");null!=s&&t.trigger(s,{active:e,body:n,result:i})};class Rt extends u.tp{constructor(t){super(t);const e=$(this.getOption("trigger")),n={myrmDvsnCode:this.getOption("myrcode"),nbopDvsnCode:this.getOption("nbopcode"),cmdtRltsPatrCode:this.getOption("patrcode"),nbopTrgtCttsIdnfNum:this.getOption("id")};e.on("click",(()=>{const t=e.hasClass("active"),i=i=>{Lt.apply(this,[e,!t,n,i])};this.ui.wish(!t,n,e).then(i).catch(i)}))}get ui(){return this.modules.get("ui")}}var Mt={name:"wish-item",element:{attrs:["id","myrcode","nbopcode"].map((t=>"data-kbbfn-".concat(t)))},Module:Rt};class $t extends u.tp{constructor(t){super(),this._options=t;$((0,m.U2)(t,"trigger")).on("click",(()=>this.handleClick()))}handleClick(){const t=$(this.getOption("list")),e=t.find("input[type=checkbox]:checked");if(!e.length)return this.ui.alert({title:"선택한 상품이 없습니다."});this.sendGA360Event(e);const n=this.buildWishList(e);this.ui.wishList(n,t,$(this.getOption("allckeck")))}sendGA360Event(t){const e=this.isMobile?"click_종이책_상품상세_MO":"click_종이책_상품상세_PC",n="series"===t.data("prod-detail-series-target")?"이책의시리즈":"이책의총서",i=[];t.each(((t,e)=>{i.push($(e).data("prod-detail-series-item"))})),window.ga360.GA_Event(e,"상세탭_상품정보",n,"클릭_선택상품찜하기",i)}buildWishList(t){const e=this.getOption("myrcode"),n=this.getOption("nbopcode");return t.toArray().map((t=>{const i=$(t).closest("[data-id]").data("id");if(null!=i)return{myrmDvsnCode:e,nbopDvsnCode:n,nbopTrgtCttsIdnfNum:i}})).filter(Boolean)}get ui(){return this.modules.get("ui")}}var Ut={name:"wish-item-list",element:{attrs:["data-kbbfn-myrcode","data-kbbfn-nbopcode"]},Module:$t};const Nt=["본 상품은 청소년유해물로서 19세 미만의 ","청소년은 이용하실 수 없습니다. 로그인 후 ","본인인증을 통하여 이용가능합니다."].join("\n"),Pt=function(){return this.isAdultProduct?xt.call(this):g().resolve(!1)},xt=function(){const t=encodeURIComponent(window.location.href);if(!this.auth.authorized){const e=(0,h.$u)("/MBR/login?continue=".concat(t,"&verify=adult"));return this.ui.alert({title:Nt}).then((()=>{throw(0,h.Ao)(e),new Error("Adult verification required")}))}if(!this.isVerifyAdult){const e=(0,h.$u)("/MBR/auth/verify/adult?continue=".concat(t));return(0,h.Ao)(e),new Error("Adult verification required")}return!1},Ht=async function(t){var e,n;const i=h.bd.bind(null,t);if("EBK"===t.dvsnCode){var s;const e=null==t||null===(s=t.collectionPriceInfo)||void 0===s?void 0:s.price;null!=e&&"0"!==e||(t.ordQty=0)}return{ordQty:null!==(e=i("qty","ordQty"))&&void 0!==e?e:1,saleCmdtid:i("pid","id","saleCmdtid"),saleCmdtGrpDvsnCode:i("grpCode","saleCmdtGrpDvsnCode","grpcode"),spbkDvsnCode:null!==(n=i("spbcode"))&&void 0!==n?n:f.Jo.CART,bid:i("barcode","bid","cmdtCode","cmdtcode")}},Kt=async function(t){const e=$(t).find("input[type=checkbox]:checked");if(!e.length)return[];const n=[],i=[];for(const t of e.toArray()){const e=$(t).closest("[data-binding]").data();19===h.bd.bind(null,e)("adult")&&i.push(e);const s=await Ht.call(this,e);n.push(s)}if(i.length>0)try{await xt.call(this)}catch(t){return null}return n},jt=async function(t){const e=this.getOption("cartlist"),n=this.getOption("cartallcheck"),i=[];let s;if(e&&n){if(s=await Kt.call(this,e),null===s)return;i.push(e,n)}else{if(!1!==await Pt.call(this))return;s=await Ht.call(this,this.options)}return s=(0,m.XQ)(s),s.length?(i.unshift({$elem:this.$trigger,addCartProcList:s}),new(g())(((t,e)=>{if(!this.isPOD)return void t();const n=f.X4.AL_05_0037;return this.ui.alert({code:n}).then((n=>{let{value:i}=n;return i?t():e(new Error("cancel"))}))})).then((()=>this.ui.cart(...i)))):this.ui.alert({title:"선택한 상품이 없습니다."})},Ft=function(){this.$trigger.on(f.CommonEvent.CLICK,jt.bind(this))};class Gt extends u.tp{constructor(t){super(t);const e=this.getOption("trigger");this.setOption("$trigger",$(e)),Ft.call(this)}get $trigger(){return this.getOption("$trigger")}get ui(){return this.modules.get("ui")}get auth(){return this.modules.get("auth")}get user(){return this.modules.get("user")}get isAdultProduct(){return 19===this.getOption("adult")}get isPOD(){return this.getOption("dvsncode")===f.Pp.KYOBO_POD}get isVerifyAdult(){return"Y"===this.getUserProp("adltCrttYsno","N")}getUserProp(t,e){return this.user.model.get(t,e)}}var Bt={name:"cart-item",Module:Gt};class zt extends Y.HasOptionModel{constructor(t){super(),this._options=t,this.auth.ready().then((()=>{const t=$((0,Y.get)(this.options,"trigger"));this.ui.cartSize(t)}))}get ui(){return this.modules.get("ui")}get auth(){return this.modules.get("auth")}get authorized(){return this.auth.authorized}}var Wt={name:"cart-size",Module:zt};class Yt extends u.tp{constructor(t){super();$((0,m.U2)(t,"trigger")).on("click",(()=>{const e=(0,m.U2)(t,"pid");if(null==e)return;const n="E"===e.charAt(0)?"/EBP/dig/preview/".concat(e):"/PDT/book/preview/".concat(e);this.isMobile?window.open((0,Y.parseStageURL)(n)):window.open((0,Y.parseStageURL)(n),"pop","resizable=no,scrollbars=yes,status=no,left=0,top=0,width=1100, height=750")}))}get ui(){return this.modules.get("ui")}}var Vt={name:"preview-item",element:{attrs:["data-kbbfn-pid"]},Module:Yt};const Jt=function(t){const e=t.find("[data-btn-header-back]");e.length&&e.attr("href","javascript:void(0);").on("click",(t=>{let{currentTarget:e}=t;const n=$(e).data("url");n?window.location.href=n:window.history.back()}))};class Zt extends u.tp{constructor(t){super(t);const e=$(this.getOption("trigger"));Jt.call(this,e)}get ui(){return this.modules.get("ui")}}var Xt={name:"ui-header-wrapper",Module:Zt};class Qt extends u.tp{constructor(t){super();const e=$((0,m.U2)(t,"trigger"));this._props=(0,m.U2)(t,"props"),this._dialog=null,this._btn=e,this.props?this.init():e.remove()}get props(){return this._props}get btn(){return this._btn}get ui(){return this.modules.get("ui")}get dialog(){return this._dialog}init(){null===this.dialog&&(this.createDialog().then((()=>new(g())((t=>{this.once("resolve",(e=>t(e)))})))),$(this.btn).on("click",(()=>{this.dialog.open()})))}close(){this.dialog.close()}createDialog(){const t=(0,Y.createEl)({class:"dialog_wrap ".concat(this.isMobile?"":"has_btn dialog_view_details"),"data-class":"".concat(this.isMobile?"dialog_full":"dialog_lg")}).append([this.createCloseEl(),this.createHeaderEl(),this.createContentsEl(),this.isMobile?"":this.createFooterEl()]),e=$("body");return e&&e.append(t),new(g())(((e,n)=>{t.one("dialogcreate",(()=>{const i=t.dialog("instance");if(null==i)return n(new Error("create new ui-alert dialog failure!"));this._dialog=i,this.emit("create-dialog",{target:i}),e(i)})),this.ui.dialog(t[0])}))}createFooterEl(){return(0,Y.createEl)("dialog_footer").append((0,Y.createEl)({class:"btn_md btn_primary","data-dialog-close":""},"button").append((0,Y.createEl)({class:"text",text:"닫기"},"span")).on("click",(t=>{t.stopPropagation(),this.close()})))}createContentsEl(){return(0,Y.createEl)("dialog_contents").append(this.isMobile?(0,Y.createEl)({src:f.AO+(0,m.U2)(this.props,"url"),style:"width:100%",alt:"사은품 확대 이미지"},"img"):(0,Y.createEl)("custom_scroll_wrap").append((0,Y.createEl)("img_detail_box").append((0,Y.createEl)({src:f.AO+(0,m.U2)(this.props,"url"),alt:"사은품 확대 이미지"},"img"))))}createHeaderEl(){return(0,Y.createEl)("dialog_header").append((0,Y.createEl)({class:"dialog_title",text:(0,m.U2)(this.props,"title")},"".concat(this.isMobile?"div":"h1")))}createCloseEl(){return(0,Y.createEl)({class:"btn_dialog_close","data-dialog-close":""},"BUTTON").append([(0,Y.createEl)("ico_dialog_close","SPAN"),(0,Y.createEl)("hidden","SPAN").html("닫기")]).on("click",(t=>{t.stopPropagation(),this.close()}))}}var qt={name:"image-popup",Module:Qt};const te=19,ee="adult",ne={VERIFY_ROLE:"verify-role",RENDER_FINISH:"render-finish"},ie={IMAGE_PDT:"product",IMAGE_AUTHOR:"author"},{RESTRICT_AGE:se,RESTRICT_ADULT:oe,SIZE:re}=f.S3ImgOptKey,ae="auto-fit",le=280;function ce(t){if(null==t)return t;if((0,m.jn)(t))return t?ae:null;if((0,m.HD)(t)&&(t=t.trim().toLowerCase(),c()(t).call(t,"|")&&(t=(0,m.U2)(t.split("|"),this.isMobile?1:0))),!t||!t.length||"0"===t)return null;switch(t){case ae:case"true":case"auto":return ae}return/^[\d]+$/.test(t)?t+"x0":t}function ue(t,e){const n=+e;switch(t){case se:case oe:return null!=e&&0!==n&&(1===n||"true"===e||!isNaN(n)&&n>=te);case re:e=ce.call(this,e);break;default:if((0,m.HD)(e))switch(e=e.trim()){case"null":case"undefined":case"":e=null}}return e}function he(){f._1.forEach((t=>{if(/^debug/.test(t))return;t=t.replace(/-/g,".");const e=this.getOption(t),n=ue.apply(this,[t,e]);e!==n&&(t!==se||(0,m.e$)(this.options,oe)||(t=oe),this.setOption(t,n))}))}const de=["pdt","dtl","dtl/author","pmtn"];function pe(t,e){return null==e?t:"sih/fit-in/".concat(e,"/").concat(t)}function ge(t){const e=this.getOption(re);return null!=e&&c()(de).call(de,t)?e!==ae?(/^[\d]+x[\d]+$/.test(e)&&(t=pe(t,e)),g().resolve(t)):new(g())((t=>{const e=this.$root.show();setTimeout((()=>{const n=(0,w.getElementBoundary)(e);return t(n)}))})).then((e=>{let{width:n}=e;n<le&&(n=le);const i=[n,0].join("x");return t=pe(t,i)})).finally((()=>{this.$root.css({display:""})})):g().resolve(t)}const me="dtl/author",fe=[f.AO,me,"default.jpg"].join("/"),be="https://image.kyobobook.co.kr",_e=(0,h._7)("ui.hottracks.image"),Ee=function(t){if(t===be)return"newimages";const e=(0,m.U2)(_e,"baseURL");return(0,m.HD)(e)?e.length&&"/"!==e?e.replace(/^[/]+/,""):null:e};async function ve(){const t=this.imgPath;if(null!=t)return t;const e=this.pid,n=this.bid,i=this.getOption(f.S3ImgOptKey.PRODUCT_TYPE),s=this.getOption("img.type",ie.IMAGE_PDT);let o=f.AO,r=!0,a="pdt",l=null;if(s===ie.IMAGE_AUTHOR)a=me;else switch(i){case f.Pp.HOTTRACKS_GIFT:return t;case f.Pp.HOTTRACKS_MUSIC_ALBUM:case f.Pp.HOTTRACKS_DVD:if(null==e)break;r=!1,o=(0,m.U2)(_e,"host",be).replace(/[/]+$/,""),l=""+e,a=[Ee(o),"sih/fit-in/400x0","music/large",l.substring(1,5).split("").reverse().join("")].filter(Boolean).join("/");break;case f.Pp.COMBI_PRODUCT:l=e}return null==l&&(l=null!=n?n:e),r&&o===f.AO&&(a=await ge.call(this,a)),9791198718532===n?[o,a,l+".jpg?version=".concat((new Date).getMilliseconds())].join("/"):[o,a,l+".jpg"].join("/")}async function Oe(){const t=this.$root,e=await ve.call(this),n='[PDT_IMAGE]: "'.concat(e,'" load..');return null==e?g().reject(new Error("".concat(n," FAILURE!"))):new(g())(((i,s)=>{t.one({load:n=>{const s=this.getMultiOption("bg.target","bg.class",null);return null!=s&&t.closest(s).css("background-image","url('".concat(e,"')")),i(e)},error:t=>s(new Error("".concat(n," FAILURE!")))}),this.source=e}))}function Ce(t){const e=this.getOption(f.S3ImgOptKey.RESTRICT_ADULT,!1);this.setNoImage();const n=this.getOption("img.type",ie.IMAGE_PDT);return this.once(ne.VERIFY_ROLE,(t=>{let{active:e}=t;if(!e)return this.setAdultImage(),void this.emit(ne.RENDER_FINISH,{active:e});Oe.call(this).then((t=>{this.setHasImage()})).catch((t=>{if(n===ie.IMAGE_AUTHOR)this.setHasImage(fe);else this.setNoImage()})).finally((()=>{this.emit(ne.RENDER_FINISH,{active:e})}))})),e||this.emit(ne.VERIFY_ROLE,{active:!0}),this.auth.authorize().then((t=>{let e=!1;if(null!=t){const n=(0,m.U2)(t,"roles",[]);e=c()(n).call(n,ee)}if(!e){e=this.urlinfo.debug("auth-role")===ee}this.emit(ne.VERIFY_ROLE,{active:e})}))}function Ae(t){let e=t.parent();if(!(0,h.vB)(e,"A")){if(!(0,h.vB)(e,"SPAN"))return;if(e=e.parent(),!(0,h.vB)(e,"A"))return}const n=e.attr("href");if((0,m.HD)(n)&&n.length&&!/^[#]+([\s]*|todo.*)/i.test(n))return void e.attr("href",(0,h.$u)(n));let i=this.getOption(f.S3ImgOptKey.LINK_URL);if(null==i){const t=this.getOption("img.type",ie.IMAGE_PDT),e=this.getOption(f.S3ImgOptKey.PRODUCT_ID),n=this.getOption(f.S3ImgOptKey.ISBN_CODE),s=this.getOption(f.S3ImgOptKey.PRODUCT_TYPE);if(t===ie.IMAGE_AUTHOR)i="/ONK/service/profile/information?chrcCode=".concat(e);else i=(0,h.kR)({pid:e,bid:n,type:s})}e.attr("href",(0,h.$u)(i))}function ke(){const t=this.pid,e=this.getOption(f.S3ImgOptKey.PRODUCT_NAME,t),n=this.$root,i=(0,h.vB)(n,"IMG");if(i&&this.getOption("lazy",!0)&&n.attr({loading:"lazy"}),null!=e){const t=i?"alt":"title";n.attr(t,e)}Ce.call(this,n),Ae.call(this,n)}const we="pdt-image",Ie="no_img",Te=["img","img_box","profile_img","person_img"].map((t=>"."+t)).join(",");class ye extends u.cZ{constructor(t){super(t);const e=$(this.getOption("trigger"));this.setElement("root",e);const n=this.$root[0].src;null!=n&&n.length?this.setImgWrapCls(Ie,!1):this.init()}get pid(){return this.getOption(f.S3ImgOptKey.PRODUCT_ID)}get bid(){return this.getOption(f.S3ImgOptKey.ISBN_CODE)}get imgPath(){return this.getOption("img.path")}get source(){return this.$root.attr("src")}set source(t){this.$root.attr({src:t,"data-src":t})}get auth(){return this.modules.get("auth")}init(){this.$root.data(f.eU);he.call(this),ke.call(this)}getImgWrapEl(){let t=this.getElement("wrap");return null!=t?t:(t=this.$root.closest(Te),t.length?(this.setElement("wrap",t),t):void 0)}setImgWrapCls(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.getImgWrapEl();if(null!=n)return(0,w.setClassName)(n,t,e),n}setNoImage(t){t&&(this.source=t),this.setImgWrapCls(Ie)}setHasImage(t){t&&(this.source=t),this.setImgWrapCls(Ie,!1)}setAdultImage(t){t&&(this.source=t),this.setImgWrapCls(ee),this.setImgWrapCls(Ie,!1)}}var Se={name:[we,"s3-image"],Module:ye};class De extends u.tp{constructor(t){super(t);const e=this.getOption("trigger"),n=$(e).hide(),i=this.getOption("blur",0);n.one("load",(t=>{i&&blurify(Object.assign({images:e,blur:i,mode:"auto"},(0,m.ei)(this.options,["mode"]))),n.show()}));const s=this.getOption("src");!e.src.length&&s&&n.attr({src:s,"data-src":s})}get ui(){return this.modules.get("ui")}}var Le={name:"blurify",Module:De};class Re extends u.tp{constructor(t){super();$((0,m.U2)(t,"trigger")).on("click",(()=>{const e=(0,m.U2)(t,"downloadlink");if((0,m.xb)(e))return this.ui.toast("다운로드 가능한 URL이 존재하지 않습니다.");window.open(e,"_blank")}))}get ui(){return this.modules.get("ui")}}const Me=[...[At,It,yt,Mt,Ut,Bt,Wt,Vt,Xt,qt,Dt,...kt,Se,Le,{name:"reading-journal-item",element:{attrs:["data-kbbfn-pid","data-kbbfn-downloadlink","data-kbbfn-filename"]},Module:Re}]];function $e(t,e){if(!t.length)return e();const n=t.map((t=>new(g())((e=>{const n=this.getSubModule(t);if(null!=n)return e(n);this.delayRunSubModuleList.push({id:t,done:e})})).then((t=>new(g())((e=>{t.ready(e)}))))));g().all(n).then(e)}function Ue(t,e){const n=(t=(0,h.rs)(t)).data(f.eU),i=(this.urlinfo.hasDebugLog("kbbfn"),"[kbbfn.".concat(n||"UNDEFINED","]"));if(t.data(f.CommonEvent.INIT))return g().resolve();t.data({[f.CommonEvent.INIT]:!0,[f.z7]:f.Ry});const s=function(e){return t.data(f.z7,f.Wt),g().reject(new Error("".concat(i," ").concat(e)))};if(null==n)return s("기능 이름을 찾을 수 없습니다.");if(e=function(t,e){return null!=e?e:Me.find((e=>{let{name:n}=e;return Array.isArray(n)?c()(n).call(n,t):n===t}))}(n,e),null==e)return s("모듈의 사전정의 데이터를 찾을 수 없습니다.");const o=(0,m.U2)(e,"element.tagName"),r=t[0].tagName.toLowerCase();if(null!=o&&r!==o)return s("not match tagName: ".concat(r));const a=(0,m.U2)(e,"element.attrs");for(const e in a){const n=a[e];if(null==t.attr(n))return s("required attribute: ".concat(n))}const l=(0,m.U2)(e,"name"),u=Ot(t),{subModules:d,depend:p}=function(t){const e={subModules:[],depend:[]},n=(0,m.U2)(t,f.jT.DEPEND_ON);return null==n||(delete t.dependOn,n.split(",").forEach((t=>{if(t=t.trim(),/^submodule\./i.test(t))return e.subModules.push(t.replace(/^submodule\./,""));e.depend.push(t)}))),e}(u);return this.reserveDependTask(l,p,(()=>new(g())((t=>{$e.apply(this,[d,t])})).then((()=>{const t=(0,m.U2)(e,"Module");return null!=t?new t(u):this.core.use(l)})).then((n=>{const i=(0,m.U2)(e,"init");return setTimeout((()=>{null!=i&&n[i](u)})),t.data(f.z7,f.G1),n}))))}function Ne(t){null==t&&(t=this.$body||$("body")),t.find("[data-".concat(f.eU,"]")).each(((t,e)=>{Ue.call(this,$(e))}))}function Pe(){const t=[];$("SCRIPT, LINK").each(((e,n)=>{const i="SCRIPT"===n.tagName,s=$(n),o=s.attr(i?"src":"href");if(null==o)return;if(!i&&"stylesheet"!==n.rel)return;if(null!=t.find((t=>{let{data:e}=t;return e.url===o})))return;const r=s.data("name"),a=i?"js":"css";t.push({id:t.length,data:{url:o,name:r,type:a,load:!0,loaded:!0,$elem:s}})})),this.scriptList.push(...t.map((t=>{let{id:e,data:n}=t;return new dt({id:this.scriptList.length+e,data:n})}))),this.emit(f.po.PARSED_DOM_SCRIPT_LIST)}function xe(){[["window",window],"html","body",["contents","#contents"]].forEach((t=>{t=(0,m.XQ)(t);const e=(0,m.U2)(t,0);let n=this.getElement(e);if(null!=n)return;const i=(0,m.U2)(t,1,e);n=$(i),n.length&&(this.getElement(e)||this.setElement(e,n))}))}function He(){if(!this.ua.isMobileApp)return;const t=["text","search"].map((t=>'INPUT[type="'.concat(t,'"]'))).join(",");$(t).on("focus click",(t=>{const e=$(t.target),n="search"===e.attr("type")||"searchKeyword"===e.attr("id")?"Y":"N";this.mobi.request("setShortcutKeyboard",{state:n})}))}function Ke(){if(!this.ua.isMobileApp)return;const t=["intent://storeLink/storeUrl=https://www.tocsoda.co.kr/mainView?","minVer=138#Intent;","scheme=tocsoda;","action=android.intent.action.VIEW;","category=android.intent.category.BROWSABLE;","package=com.kyobo.tocsoda;","end"].join(""),e=["#tabMainMenuService A","#brand_soda>A","#service_mal_soda"].join(",");$(e).each(((e,n)=>{$(n).attr("href").indexOf("tocsoda")<0||$(n).off(f.CommonEvent.CLICK).on(f.CommonEvent.CLICK,(e=>{e.preventDefault(),e.stopPropagation(),window.location.href=this.ua.isAndroid?t:"tocsodaScheme://"}))}))}function je(){if(!this.ua.isMobileApp)return;const t=["#tabMainMenuService A","FOOTER .sns_share_box>A","#brand_story>A","#brand_morning>A","#service_mal_story"].join(",");$(t).each(((t,e)=>{const n=$(e).attr("href"),i=$(e).attr("target");void 0!==$(e).parents("div #tabMainMenuService")&&"_blank"!==i||$(e).off(f.CommonEvent.CLICK).on(f.CommonEvent.CLICK,(t=>{t.preventDefault(),t.stopPropagation(),this.mobi.request("outLink",{url:n})}))}))}function Fe(){if(!this.ua.isMobile)return;const t=[".service_mall_link.link_semo","#popMainMenu .quick_menu_item.semo > A","#brand_semo"].join(",");$(t).each(((t,e)=>{$(e).off(f.CommonEvent.CLICK).on(f.CommonEvent.CLICK,(t=>{t.preventDefault();const n=$(e).attr("href");this.ua.isKyoboApp?this.mobi.request("goToSemo"):window.open(n)}))}))}function Ge(){$("#welcome_header_wrap .gnb_list .gnb_item").each(((t,e)=>{const n=$(e).find("A").attr("href"),i=window.location.href,s=(0,Y.parseFullUrlPath)(i),o=(0,Y.parseFullUrlPath)(n);(s.indexOf("event")>-1?s!==o:i.indexOf(n)<0)||$(e).addClass("active")}))}function Be(){$((()=>{[Pe,xe,He,Ne,je,Ke,Fe,Ge].forEach((t=>t.call(this))),this.emit(f.po.DOM_READY)}))}const ze="toast_message",We=2,Ye=200,Ve=200,Je="idle",Ze="showing",Xe="hidiing",Qe="custom-toast-show",qe="custom-toast-hide",tn="custom-toast-hidden";let en=null;const nn=function(t){let e=this.getElement("toast.wrap"),n=this.getElement("toast.text"),i=this.getElement("toast.link");return null==e&&(i=(0,Y.createEl)({class:"toast_link",text:"바로가기",href:"https://www.kyobobook.co.kr/"},"A"),n=(0,Y.createSpanEl)(ze),e=function(){const t=(0,Y.createEl)("toast_wrap black").data("status",Je).hide();return t.on(Qe,((e,n)=>{if(null==n)return;const{duration:i=Ye,delay:s=We,message:o,link:r}=n;if(t.data("status")!==Je)return null!=en&&(clearInterval(en),en=null),t.trigger(qe,{duration:100,complete:()=>{t.trigger(Qe,n)}});const a=1e3*s;if(t.children(".".concat(ze)).html(o),null!=r){const e=(0,Y.createEl)({class:"toast_link",text:"바로가기",href:r},"A");t.children(".".concat(ze)).append(e)}t.show().data("status",Ze).stop(!0,!0).fadeIn(i,(()=>{en=setTimeout((()=>{t.trigger(qe)}),a)}))})),t.on(tn,(()=>{t.hide().data("status",Je)})),t.on(qe,(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=Ve,complete:s}=n;function o(){if(t.trigger(tn),null!=s)return s()}switch(t.data("status")){case Je:return o();case Xe:return t.one(tn,o)}t.data("status",Xe).fadeOut(i,"swing",(()=>{o()}))})),t.appendTo($("BODY"))}().append(n),this.setElement("toast.wrap",e),this.setElement("toast.text",n),this.setElement("toast.link",i)),e};function sn(t,e,n){const i=nn.call(this);(0,Y.isNumber)(t)&&(t=""+t);return(0,Y.isString)(t)&&t.length?(t=t.replace(/[\r\n]+|\\n/g,"<br/>"),i.trigger(Qe,{message:t,delay:e,link:n}),i):i.trigger(qe)}var on={mok:s.mok,onk:s.onk,pubScript(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return bt.apply(this,e)},dialog(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.pubScript("setUIDialog",...e)},toast(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return sn.call(this,...e)}},rn=n(45693);var an={loginAlert:function(t){const e=(0,m.U2)(t,"code",f.X4.AL_05_0007);return this.alert({code:e}).then((e=>{let{value:n}=e;const i=(0,m.U2)(t,"callback");return(0,m.mf)(i)?i(n):n?this.auth.redirectLogin():n}))},authorizeWithAlert:function(t){return this.auth.authorize().then((e=>null!=e?e:this.loginAlert(t)))},checkImgExtWithAlert:function(t,e,n){null==n&&(n=f.dK);const i=(0,rn.wO)(t,n);return i?g().resolve(i):(null==e&&(e="이미지는 ".concat(n.join(", ")," 파일만 첨부 가능합니다.")),this.ui.alert(e))}};function ln(t){return(0,m.HD)(t)?"apply"===t:t}function cn(t,e){null!=t&&$(t).find("input[type=checkbox]:checked").prop("checked",!1),null!=e&&$(e).prop("checked",!1)}var un=n(80967);const{MYR_CODE:hn}=un.RequestParam,dn=function(t){const e=(0,m.U2)(t,hn),n=(0,_.parseMyCatCode)(e);return e!==n&&(0,m.t8)(t,hn,n),t},pn=function(t){return(0,at.a$)("myr","myRoom.nbop.".concat(t))},gn=function(t){const e=pn("myRoomNbopAdd"),n=dn(t);return this.$http(e,{method:f.w$.POST,body:n})},mn=function(t){const e=pn("myRoomNbopListAdd"),n=f.w$.POST;return this.$http(e,{method:n,body:t})},fn=function(t){const e=pn("myRoomNbopDelete");return this.$http(e,{method:f.w$.DELETE,body:dn(t)})},bn=function(t,e){var n,i;Array.isArray(t)||(t=[t]);const s=null===(n=t[0])||void 0===n?void 0:n.code,o=s===Y.WishCode.AUTHOR?{event:Y.Ga4Event.ITEM_EVENT,event_name:Y.Ga4EventName.ADD_TO_MAKER}:{event:Y.Ga4Event.ECOMMERCE_ITEM,event_name:Y.Ga4EventName.ADD_TO_WISHLIST};const r=(0,Y.parseGa4ListSection)(o,null===(i=t[0])||void 0===i?void 0:i.$elem,e),a=(0,Y.parseGa4EcDataByEl)(o,t,r),l={kakao:function(t,e){var n;let{instance:i}=t;if(e.code!==Y.WishCode.PRODUCT)return;const s=null!==(n=e.pid)&&void 0!==n?n:e.saleCmdtid;i.wish({id:s})},cubot:function(t,e){var n,i;let{instance:s}=t;if(e.code!==Y.WishCode.PRODUCT)return;const o=null!==(n=null!==(i=e.bid)&&void 0!==i?i:e.cmdtcode)&&void 0!==n?n:e.cmdtCode;null!=o&&s.wish(o)}},c=Object.assign({raw:t,vendors:l},a);kbb.stats.wish(c)};function _n(){try{bn(...arguments)}catch(t){}}const{ACTIVE:En}=f.FavorClsName,vn=function(t,e){return{fnFetch:gn,fnSuccess:function(){e.addClass(En);let n=un.K.ACTIVATED;return t.nbopDvsnCode===f.ZF.FUNDING&&"014"===t.myrmDvsnCode&&(n=un.K.ACTIVATED_WITH_ALARM),"001"===t.nbopDvsnCode||"004"===t.nbopDvsnCode?this.toast(n,2,(0,Y.parseStageURL)("/MYR/library/wish")):this.toast(n),_n({$elem:e,code:t.nbopDvsnCode,pid:t.nbopTrgtCttsIdnfNum,bid:e.kbbfnAttr("bid")}),!0},fnCatch:function(e){const n=null!=(null==t?void 0:t.evntId)&&(null==e?void 0:e.detailMessage)||f.AQ.HTTP_ERROR;return this.toast(n),!1}}},On=function(t,e){return{fnFetch:fn,fnSuccess:function(){e.removeClass(En);let n=un.K.DEACTIVATED;return t.nbopDvsnCode===f.ZF.FUNDING&&"014"===t.myrmDvsnCode&&(n=un.K.DEACTIVATED_WITH_ALARM),this.toast(n),!0},fnCatch:function(t){return this.toast(f.AQ.HTTP_ERROR),!1}}};function Cn(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(!this.auth.authorized)return this.loginAlert({code:f.X4.AL_05_0013});const i=ln(t)?vn:On,{fnFetch:s,fnSuccess:o,fnCatch:r}=i(e,n);let a=!1;return s.call(this,e).then((()=>(a=!0,o.call(this)))).catch(r.bind(this)).finally((()=>{n.trigger(f.po.FETCH_WISH_ITEM,{success:a,active:t})}))}const{ACTIVE:An}=f.FavorClsName;function kn(t,e,n){return this.auth.authorized?mn.call(this,t).then((i=>{const s=t.map((t=>{const{nbopTrgtCttsIdnfNum:n,nbopDvsnCode:i}=t,s=e.find('LI[data-id="'.concat(n,'"]'));if(!s.length)return;s.find("input[type=checkbox]:checked").prop("checked",!1);const o=s.find('[data-kbbfn="wish-item"]'),r="series"===s.kbbfnAttr("type");if(!o.length&&!r)return;let a=null;if(r){const t=s.kbbfnAttr("bid");a={$elem:s,code:i,pid:n,bid:t}}return o.toArray().forEach((t=>{const e=$(t);if(e.hasClass(An))return;if(e.addClass(An),null!=a)return;const n=i,s=o.kbbfnAttr("id"),r=o.kbbfnAttr("bid");a={$elem:e,code:n,pid:s,bid:r}})),a})).filter(Boolean);_n(s,e),n.prop("checked",!1);return s.some((t=>"001"===t.code||"004"===t.code))?this.toast(un.K.ACTIVATED,2,(0,Y.parseStageURL)("/MYR/library/wish")):this.toast(un.K.ACTIVATED),!0})).catch((t=>(this.toast(f.AQ.HTTP_ERROR),!1))):this.loginAlert()}var wn=n(86059);function In(t){const e=(0,h.Od)("exhib","getCartSize");return this.$http((0,h.c2)(e,t)).then((t=>(null==t?void 0:t.data)||0)).catch((()=>0))}function Tn(t){if(null==t?t=$('[data-kbbfn="cart-size"]'):(0,m.kK)(t)&&(t=$(t)),!t.length)return g().resolve();const e={baroYn:"N",frbeYsno:"N",spbkDvsnCode:"002"};if(!this.auth.authorized){const t=(0,h.ej)("tmprMmbrNum")||null;if(null==t)return;Object.assign(e,{tmprMmbrNum:t})}return In.call(this,e).then((e=>{t[e?"show":"hide"]().text(e)}))}function yn(t,e,n){Array.isArray(t)||(t=[t]);const i=null!=e.data("kbbfn-cartlist"),s=t[0].spbkDvsnCode,o=t.map((t=>{const o=t.saleCmdtid,r=t.bid,a=i?function(t,e,n){let i;const s=t.find("[data-id=".concat(e,"]"));if(s.length&&(i=s.find('[data-kbbfn="cart-item"]'),i.length?i.filter(((t,e)=>$(e).data("kbbfn-spbcode")===n)):i=s.find("INPUT:CHECKBOX"),i.length))return i}(n,o,s):e;return{$elem:a,code:s,pid:o,bid:r}}));return o.filter(Boolean)}const Sn=function(t,e,n){var i,s;const o=null===(i=(t=yn(t,e,n))[0])||void 0===i?void 0:i.code,r=function(t){let e;switch(t){case Y.CartCode.BUY_NOW:e=Y.Ga4EventName.CLICK_DIRECT_PURCHASE;break;case Y.CartCode.CART:e=Y.Ga4EventName.ADD_TO_CART;break;case Y.CartCode.PRESENT:e=Y.Ga4EventName.CLICK_GIFT_PURCHASE;case Y.CartCode.BARO_DRIM:}return e}(o);if(null==r)return;const a={event:Y.Ga4Event.ECOMMERCE_ITEM,event_name:r},l=(0,Y.parseGa4ListSection)(a,null===(s=t[0])||void 0===s?void 0:s.$elem,n),u=(0,Y.parseGa4EcDataByEl)(a,t,l);switch(o){case Y.CartCode.PRESENT:return Y.ga4util.push(u);case Y.CartCode.BUY_NOW:var h;if(c()(h=window.location.href).call(h,"kyobobook.co.kr/category")){const t={event:"item_event",event_name:u.event_name,ecommerce:{items:[{item_id:u.ecommerce.items[0].item_id,item_name:u.ecommerce.items[0].item_name}]}};return Y.ga4util.push(t)}return;case Y.CartCode.BARO_DRIM:return}const d={kakao:function(t,e){var n;let{instance:i}=t;if(e.code!==Y.CartCode.CART)return;const s=null!==(n=e.pid)&&void 0!==n?n:e.saleCmdtid;i.cart({id:s})},cubot:function(t,e){var n;let{instance:i}=t;if(e.code!==Y.CartCode.CART)return;const s=null!==(n=e.bid)&&void 0!==n?n:e.cmdtcode;null!=s&&i.cart(s)}},p=Object.assign({raw:t,vendors:d},u);kbb.stats.cart(p)};var Dn=n(27484),Ln=n.n(Dn);const Rn="tmprMmbrNum",Mn={OK:"INS",EXIST_ITEM:"UPD",OVER_MAX_COUNT:"OVF",OVER_ORDER_COUNT:"OVK"};const $n=function(){let t=(0,h.ej)(Rn);if(null==t){const e=Ln()().format("YYYYMMDDHHmmss"),n=Math.floor(9e3*Math.random())+1e3;t="".concat(e,"_0").concat(n);const i=(new Date).getTime()+108e5;(0,h.d8)(Rn,t,{expires:i})}return t},Un=(t,e)=>t.some((t=>t.resultCode===e));function Nn(t){const e=(0,h.a$)("ord","cart.addCartProc");return this.$http(e,{method:f.w$.POST,body:t})}function Pn(t,e,n){var i;const s=t.$elem;delete t.$elem;let o=!1,r=t.addCartProcList||[];const a=r[0],l=null!==(i=null==a?void 0:a.spbkDvsnCode)&&void 0!==i?i:null;if(null==l)return g().reject(new Error("주문 구분코드가 없습니다."));if(l===f.Jo.CART){if(r=r.map((t=>(0===t.ordQty&&(o=!0),t))).filter((t=>0!==t.ordQty&&null!=t.saleCmdtGrpDvsnCode)),!r.length)return this.alert({code:f.X4.AL_05_0050}).then((()=>null));t.addCartProcList=r}return this.auth.authorized||(t.tmprMmbrNum=$n()),Nn.call(this,t).then((i=>{const c=i.data,u=c.length,d={spbkIds:c.map((t=>t.spbkId)),isSam:"Y"===(null==a?void 0:a.bkmYsno)?"Y":null,separQty:l===f.Jo.BUY_NOW?t.separQty:null,flower:null!=(null==a?void 0:a.flower)?"Y":null};t.addFundingInfo&&Object.assign(d,t.addFundingInfo);const p=function(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case f.Jo.BUY_NOW:e="/order/freebie";break;case f.Jo.CART:e="/cart";break;case f.Jo.PRESENT:e="/order/gift";break;case f.Jo.BARO_DRIM:e="/cart/baro-dream"}return(0,h.c2)("/ORD"+e,Object.assign({spbkDvsnCode:t},n))}(l,d);if(function(){try{Sn(...arguments)}catch(t){}}(r,s,$(e)),l===f.Jo.CART){let t=function(t){const e=Un.bind(null,t);return e(Mn.EXIST_ITEM)?f.X4.AL_05_0010:e(Mn.OVER_MAX_COUNT)?f.X4.AL_05_0048:e(Mn.OVER_ORDER_COUNT)?f.X4.AL_05_0047:f.X4.AL_05_0009}(c);return f.X4.AL_05_0009===t&&"product"===f.H6&&f.q$&&$("#popMobileCartAds").length>0?($("#popMobileCartAds").dialog("open"),cn(e,n),null):(o&&(t={name:f.X4.AL_05_0011,args:{count:u}}),this.alert({code:t}).then((t=>{let{value:i}=t;return i?p:(cn(e,n),null)})))}return l!==f.Jo.BUY_NOW&&l!==f.Jo.PRESENT||!Un(c,Mn.OVER_ORDER_COUNT)?p:this.alert({code:f.X4.AL_05_0047}).then((()=>null))})).then((t=>null==t||wn.urlstatic.debug("no-move")?null:(0,h.Ao)(t))).catch((t=>(this.toast("문제가 발생하였습니다.\n다시 시도해주세요."),!1))).finally((()=>{l===f.Jo.CART&&Tn.call(this)}))}function xn(t){return(0,h.PF)(t,["evntId"])?this.$http("/api/gw/evt/event/enter",{method:f.w$.POST,body:t}):g().reject(new Error("form error"))}function Hn(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0;const{prop:n,method:i}=ln(t)?{prop:"liveAlarmAdd",method:f.w$.POST}:{prop:"liveAlarmCancel",method:f.w$.PUT},s=(0,at.a$)("myr","interest.".concat(n));return this.$http(s,{method:i,body:e}).then((t=>200===t.statusCode))}function Kn(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0;if(t=ln(t),!(0,Y.validFormData)(e,["castngCttsIdnfNum","castngSbscTrgtCode"]))return g().reject(new Error("[subscribe] invalid form error"));const{prop:n,method:i}=ln(t)?{prop:"castingSubscription",method:f.w$.POST}:{prop:"castingSubscriptionCancel",method:f.w$.PUT},s=(0,at.a$)("myr","interest.".concat(n));return this.$http(s,{method:i,body:e}).then((t=>"OK"===t.detailMessage))}function jn(t){const e=(0,at.a$)("myr","interest.watchingHistory");return this.$http(e,{method:f.w$.POST,body:t}).then((t=>"OK"===t.resultMessage))}var Fn=n(48460);const Gn=function(){return Fn.uk.debugMode,(0,w.createProdImgAnchor)(...arguments)};var Bn=[on,an,o,r];class zn extends Y.CoreBaseModule{constructor(){super("ui"),this._loadingMan=(0,Y.get)(window,(0,Y.getGlobalOption)("loader.loadingMan","KbbLoading")),this._alertMan=new V.S,this._popupMan=new st,this.hasPluginsUI=!1,this._scriptList=[],this._hasDomScriptList=!1,this._ignoreScriptList=[],this._activePubScript=!1,this.delayRunTaskList=[],this._subModuleList=[],this.delayRunSubModuleList=[],this._freezeLoading=(0,Y.getGlobalOption)("ui.loading.freeze",!1),vt.call(this),"production"===(0,Y.getGlobalOption)("loader.env")&&this.emit(Y.UiModuleEvent.COMPLETE_LOADED),this.initialized=!0,Be.call(this)}get $window(){return this.getElement("window")}get $html(){let t=this.getElement("html");return null==t&&(t=$("html"),this.setElement("html",t)),t}get $body(){return this.getElement("body")}get $contents(){return this.getElement("contents")}get scriptList(){return this._scriptList}get hasDomScriptList(){return this._hasDomScriptList}get subModuleList(){return this._subModuleList}get ignoreScriptList(){return this._ignoreScriptList}get activePubScript(){return this._activePubScript}get loadedScriptList(){return this.scriptList.filter((t=>{let{loaded:e}=t;return e})).map((t=>{let{name:e}=t;return e}))}get delayLoadScripts(){return this.scriptList.filter((t=>!t.load&&!t.loaded&&t.dependOn.length))}get loadingMan(){return this._loadingMan}get alertMan(){return this._alertMan}get popupMan(){return this._popupMan}get freezeLoading(){return this._freezeLoading}set freezeLoading(t){t!==this.freezeLoading&&(this._freezeLoading=t,t||(this.loading=!1))}get loading(){return null!=this.loadingMan&&this.loadingMan.isActive()}set loading(t){this.setClassName("html",mt,t),null!=this.loadingMan&&this.loaded&&!this.freezeLoading&&this.loadingMan[t?"start":"stop"]()}get loaded(){return this.$html.hasClass(gt)}set loaded(t){!this.loaded&&t&&(this.$html.addClass(gt),this.$html.hasClass(mt)||(this.loading=!1))}import(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(g())((t=>{if(this.hasDomScriptList)return t();this.once(Y.UiModuleEvent.PARSED_DOM_SCRIPT_LIST,t)})).then((()=>pt.apply(this,e)))}loadKbbFn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ue.apply(this,e)}loadKbbFnAll(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ne.apply(this,e)}addScript(t){if(!t.load)return t.load=!0,(0,Y.importScript)(t).catch((e=>t.error=e)).finally((()=>{t.loaded=!0,this.emit(Y.UiModuleEvent.SCRIPT_LOADED,{target:t})}))}reserveDependTask(t,e,n){if(!(e=(0,Y.castArray)(e)).length||this.isDependOnReady(e))return n();this.urlinfo.hasDebugLog("depend");const i="".concat(t,"_").concat(this.delayRunTaskList.length),s=setTimeout((()=>{}),1e3*this.getOption("script.depend.timeout",5));this.delayRunTaskList.push({id:i,list:e,timeout:s,done:n})}getScriptItemById(t){return this.scriptList.find((e=>{let{id:n}=e;return n===t}))}isDependOnReady(t){return t.every((t=>{var e,n;return c()(e=this.ignoreScriptList).call(e,t)||c()(n=this.loadedScriptList).call(n,t)}))}addSubModule(t){this.existsSubModule(t)||(this.subModuleList.push(t),this.emit(Y.UiModuleEvent.ADD_SUBMODULE,{module:t}))}getSubModule(t){var e;return(0,Y.isString)(t)||(t=null!==(e=t)&&void 0!==e&&e.id?t.id:null),this.subModuleList.find((e=>{let{id:n}=e;return n===t}))}existsSubModule(t){return(0,Y.isString)(t)||(t=t.id),null!=this.getSubModule(t)}alert(t){return this.loading=!1,this.alertMan.open(t)}popup(t){return this.popupMan.open(t)}popupClose(){this.popupMan.close()}}(function(){Bn.forEach((t=>{for(const e in t){if((0,Y.has)(this,e))return;this[e]=t[e]}}))}).call(zn.prototype);new zn;var Wn=n(81290),Yn=n.n(Wn),Vn=n(88864),Jn=n(62836),Zn=[{name:"pagination",func:Jn.Pagination},{name:"list-component",func:Jn.ListComponent},{name:"hash-list-component",func:Jn.HashListComponent}],Xn=n(30098),Qn=n(18879),qn=n(31662);class ti extends Vn.oG{constructor(){super("util"),this.initialized=!0}get components(){return Zn}getComponent(t){const e=this.components.find((e=>e.name===(0,m.GL)(t)));if(null!=e)return e.func}clickTab(t,e){const n=$(t).closest(e||"li");if(null!=n.data("target")){const t=n.data("target").split(","),e=n.siblings();let i="ui-state-active";n.siblings().hasClass(i)||(i="active"),n.siblings().removeClass(i),n.addClass(i),e.each(((e,n)=>{$(n).data("target").split(",").forEach(((e,n)=>{$(e).addClass("hidden"),$(t[n]).removeClass("hidden")}))}))}}checkUrl(t){return/^https?:\/\//.test(t)||(t="//"+t),window.open(t,"_blank")}moreBtn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=$(t),i=n.data("target");$(i).find("ul li.hidden").slice(0,e).removeClass("hidden"),$(i).find("ul li.hidden").length||n.hide()}pcModeClick(){const t=new(Yn())(window.location.href);t.searchParams.append("pcMode","on"),window.location.href=t}}(function(){Object.keys(a).forEach((t=>{const e=a[t];for(const t in e){switch(t){case"isLocalHost":case"isDevHost":continue}if((0,m.e$)(this,t))return;try{this[t]=e[t]}catch(t){}}}))}).call(ti.prototype);new ti;const ei="rc-cont";var ni=new class{get option(){const t=new Date,e=new Date(t.setMonth(t.getMonth()+1));return e.setHours(23),e.setMinutes(59),e.setSeconds(59),{path:"/",domain:Y.COOKIE_DOMAIN,expires:e}}list(){let t=Cookies.get(ei);return t&&(t=JSON.parse(t),["p","e","b","s"].forEach((e=>{t=t.filter((n=>{var i;return c()(i=this.getCatgData(t,e,!1).concat(this.getCatgData(t,e,!0))).call(i,n)}))}))),t}getCookie(){let t=Cookies.get(ei);return t&&(t=JSON.parse(t)),t}addCookie(t,e){const n=this.list();if(!n)return void Cookies.set(ei,JSON.stringify([t]),this.option);const i=n.filter((n=>n.split("|")[0]===e&&n!==t));i.length>=10&&i.shift();const s=n.map((t=>{if(t.split("|")[0]===e){return c()(i).call(i,t)?t:null}return t})).filter((t=>null!=t));s.push(t),Cookies.set(ei,JSON.stringify(s),this.option)}clearCookie(){Cookies.remove(ei,this.option)}deleteCookie(t){const e=this.getCookie(ei);if(!e)return;const n=(e||[]).filter((e=>e.split("|")[2]!==t));Cookies.set(ei,JSON.stringify(n),this.option)}getCatgData(t,e,n){let i=t.filter((t=>{const i=t.split("|");return n?i[0]===e:i[0]!==e}));return n&&i.length>10&&(i=i.slice(i.length-10,i.length)),i}};class ii extends Vn.oG{constructor(){super("history"),this.initialized=!0}get list(){return ni.list()}put(t,e,n){const i="".concat(t,"|").concat(e,"|").concat(n);ni.addCookie(i,t)}remove(t){ni.deleteCookie(t)}clear(){ni.clearCookie()}}new ii}},function(t){var e=function(e){return t(t.s=e)};return t.O(0,[160,712],(function(){return e(88314),e(33254)})),t.O()}])}));