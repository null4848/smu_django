/*! @kyobobook/kbb-js v1.0.10 (build 20250618-103334) */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.__KbbJS__=e():(t.__KbbJS__=t.__KbbJS__||{},t.__KbbJS__["plugins.ui-review-list"]=e())}(self,(function(){return(self.webpackChunk_KbbJS_=self.webpackChunk_KbbJS_||[]).push([[407],{30573:function(t,e,i){"use strict";i.d(e,{Fp:function(){return a},aE:function(){return o}});i(91829),i(57170);var n=i(78490),s=i.n(n),r=i(51956);function o(t){let e="".concat(r.CDN_HOST,"/").concat(t);return null===t?"":(t.indexOf("http")>=0?e=t:e.indexOf("localhost")>=0&&(e=e.indexOf("jwplayer")<0?"https://contents.ndev.kyobobook.co.kr/".concat(t):t),e)}function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null===t||(0===e?t=t.replace(/<|>|"|'|%|;|\(|\)|&|\+|-/g,""):1===e?(t=(t=t.replace(/</g,"&lt;")).replace(/>/g,"&gt;"),t=s()(t).call(t,/(?:\r\n|\r|\n|\\r|\\n)/g,"<br/>")):2===e&&(t=(t=t.replace(/</g,"%3C")).replace(/>/g,"%3E"))),t}},76739:function(t,e,i){"use strict";i.d(e,{i:function(){return _},Q:function(){return v}});var n=i(38441),s=i(48306),r=i(73966),o=i(7984),a=i(96526);const l=[{value:r.aZ.CALUMNY,text:"비방, 명예훼손, 욕설, 혐오발언"},{value:r.aZ.PROMOTION,text:"홍보, 영리목적"},{value:r.aZ.OBSCENE,text:"음란, 유해, 불법정보"},{value:r.aZ.UNRELATED,text:"도서와 무관한 내용"},{value:r.aZ.PAPERING,text:"도배 및 내용이 없는 리뷰"},{value:r.aZ.ETC,text:"기타"}];function c(){return(0,a.Rd)("btn_dialog_close","닫기","hidden").prepend((0,a.T0)("ico_dialog_close")).on("click",(()=>this.close()))}function h(){return(0,a.ut)("dialog_header").append(this.isMobile?(0,a.ut)("dialog_title").text("신고/차단"):(0,a.ut)("dialog_title","p").text("신고/차단"))}function d(){const t="신고 내용을 입력해 주세요.",e=(0,a.ut)("form_textarea","TEXTAREA").attr({title:t,placeholder:t,disabled:!0}).css({height:"".concat(this.isMobile?"68px":"55px")}).on("input",function(t){if(!this.isRequiredMessage)return;const e=t.target.value.trim().length;this.getElement("form.btn.declr").prop("disabled",!e)}.bind(this)),{wrap:i}=(0,a.z3)(300,null,e);this.setElement("form.content",e);return(0,a.ut)("byte_check_wrap").append([e,(0,a.ut)("byte_check_footer").append(i)])}function p(t,e){let{value:i,text:n}=t;const s=this.genElementId("rdoinput"),r=[s,e].join("_"),o=(0,a.ut)({id:r,type:"radio",name:s,value:i},"INPUT").on("change",(t=>{this.getElement("form.btn.declr").prop("disabled",!1),this.$selected=o})),l=(0,a.ut)({for:r,text:n},"LABEL"),c=[(0,a.T0)("form_rdo").append([o,l]),"기타"!==n?void 0:d.call(this)].filter(Boolean);return(0,a.ut)("chk_col_item","LI").append(c)}function u(){var t=this;const e=l.map((function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return p.apply(t,i)})),i=(0,a.ut)("chk_col_list toggle_textarea_list","UL").append(e);return this.setElement("form.list.wrap",i),i}function m(){const t=this.isMobile?(0,a.ut)("title_heading fw_medium"):(0,a.ut)("info_text font_size_sm","P"),e=(0,a.GR)(["round_gray_box type_sub","box_info_inner",u.call(this)]),i=(0,a.ut)("bul_item_asterisk|font_size_xxs|font_size_xs","P").append("허위 신고일 경우, 신고자의 서비스 활동이 제한될 수 있으니 유의하시어".concat(this.isMobile?" ":"<br>","신중하게 신고해 주세요.")),n=(0,a.ut)(this.isMobile?"title_wrap title_size_def":"custom_scroll_wrap").append([t.append(["신고 사유를 선택해 주세요.","신고 내용은 이용약관 및 정책에 의해 처리됩니다."].join("<br/>"))]),s=(0,a.Rd)("btn_md btn_primary","신고").on("click",(()=>this.submit())),r=(0,a.ut)(this.isMobile?"btn_wrap page_bottom":"btn_wrap").append(s),o=(0,a.ut)({class:"hr_style"},"hr"),l=this.isMobile?(0,a.ut)({class:"title_wrap title_size_def"},"div").append((0,a.ut)({class:"title_heading fw_medium",text:"이 글을 작성한 작성자의 모든 글은 블라인드 처리 됩니다."},"p")):(0,a.ut)({class:"info_text font_size_sm",text:"이 글을 작성한 작성자의 모든 글은 블라인드 처리 됩니다."},"p"),c=(0,a.Rd)("btn_md btn_line_gray","차단").on("click",(()=>this.blockSubmit())),h=(0,a.ut)("btn_wrap").append(c);this.setElement("form.btn.declr",s),this.getElement("form.btn.declr").prop("disabled",!0),this.setElement("form.btn.block",c);return(0,a.ut)("dialog_contents").append(this.isMobile?[n,e,i,r,o,l,h]:n.append([e,i,r,o,l,h]))}function f(t){this.$root.addClass("has_btn"),this.isMobile&&this.$root.attr({"data-class":"dialog_bottom"});const e=[...[c,h,m].map((t=>t.call(this)))];this.setOption("innerHtml",e)}class _ extends n.a{constructor(){super(),this.article=null,this._$selectedEl=null,this.once(s.cg.CREATE_BEFORE,(()=>f.call(this))),this.on(s.cg.CLOSE,(()=>this.clear())),this.create().then((()=>this.initialized=!0))}get auth(){return this.modules.get("auth")}get postId(){return this.getOption("post.id")}set postId(t){this.setOption("post.id",t)}get type(){return this.getOpion("post.type")}set type(t){this.setOption("post.type",t)}get $selected(){return this._$selectedEl}set $selected(t){if(t===this.$selected)return;null==t&&this.$selected&&this.$selected.prop("checked",!1),this._$selectedEl=t;const e=this.isRequiredMessage;this.$content.prop("disabled",!e),this.getElement("form.btn.declr").prop("disabled",e),e||setTimeout((()=>{this.$content.trigger("focus").trigger("input").prop("selectionEnd")}))}get code(){if(null!=this.$selected)return this.$selected.val()}get isRequiredMessage(){return this.code===r.aZ.ETC}get $content(){return this.getElement("form.content")}get contentValue(){return this.$content.val().trim()}submit(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{id:e,type:i,revwKindCode:n}=this.article.data,a={[r.WT.REPORT_BAN_POST_TYPE]:r.RA[i],[r.WT.REPORT_BAN_ID]:e,[r.WT.REPORT_BAN_CODE]:t?r.aZ.ETC:this.code,[r.WT.REVIEW_KIND_CODE]:n};return(this.isRequiredMessage||t)&&(a[r.WT.REPORT_BAN_MSG]=t?r.B.BLOCK:this.contentValue),r.SL.reportBan(a).then((()=>{"002"===a.revwKindCode?this.ui.alert("차단이 완료되었습니다.\n차단된 작성자의 글은 블라인드 처리됩니다.").then((()=>{this.close(),$(".revw_txt_"+e).html("고객님 요청에 의해 블라인드 처리되었습니다."),$(".revw_num_"+e).remove()})):"004"===a.declrCttsCode?($("#cmnt_num_"+e+" .reply_contents").html('<div class="comment_status_box">\n              <div class="ico_report"></div>\n              <div class="comment_status_text">고객님 요청에 의해 블라인드 처리 되었습니다.</div>\n            </div>'),$("#cmnt_num_"+e+" .report_item").hide()):this.article.emit(o.Iv.UPDATE_ITEMS)})).catch((()=>this.ui.alert(s.AQ.HTTP_ERROR))).finally((()=>{t?(this.ui.alert("차단이 완료되었습니다.\n차단된 작성자의 글은 블라인드 처리됩니다.").then((()=>{this.close()})),$(".revw_txt_"+e).html("고객님 요청에 의해 블라인드 처리되었습니다."),$(".revw_num_"+e).remove()):this.close()}))}blockSubmit(){const{id:t,type:e,authorId:i,revwKindCode:n}=this.article.data,a=$("html").data("service"),l=this.ua.isMobile?r.NH.MOBILE:r.NH.PC,c=this.ua.isMobileApp?this.ua.isAndroid?r.uz.ANDROID:r.uz.IOS:null,h={[r.WT.BLOCK_MMBR_NUM]:i,[r.WT.BLOCK_POST_TYPE]:r.RA[e],[r.WT.BLOCK_POST_ID]:t,[r.WT.BLOCK_TERML_DVSN_CODE]:l,[r.WT.BLOCK_TERML_OS_TYPE_CODE]:c,[r.WT.ONLN_JOB_DVSN_CODE]:a?r.e4[a]:"",[r.WT.REVIEW_KIND_CODE]:n};return r.SL.block(h).then((()=>{this.ui.alert("차단이 완료되었습니다.\n차단된 작성자의 글은 블라인드 처리됩니다.").then((()=>{"002"===h.revwKindCode?($(".revw_txt_"+t).html("고객님 요청에 의해 블라인드 처리되었습니다."),$(".revw_num_"+t).remove(),this.close()):"004"===h.blkCttsCode?(this.article.uber.emit(o.Iv.UPDATE_ITEMS),this.close()):(this.article.emit(o.Iv.UPDATE_ITEMS),this.close(),this.isMobile||window.scrollTo({top:$("#ReviewList1").offset().top}))}))})).catch((()=>this.ui.alert(s.AQ.HTTP_ERROR)))}clear(){this.article=null,this.$selected=null,this.getElement("form.btn.declr").prop("disabled",!0),this.$content.val("").trigger("input")}async open(t){if(!this.active&&null!=t){if(await this.auth.authorize(),!this.auth.authorized)return this.ui.loginAlert();this.article=t,super.open()}}}const v=new _},59583:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return Jt}});var n=i(82324),s=i(13792),r=i(48306),o=i(76555),a=i.n(o),l=i(35820),c=i.n(l),h=i(62839),d=i(73966),p=i(30702),u=i(7984),m=i(51956);function f(t){const e=this.getElement("view.filter.items").find((e=>e.data("value")===t));if(null!=e)return e.children("BUTTON")}function _(t,e){const i=f.call(this,t);if((0,h.setClassName)(i,p.Ne,!e),t===d.kD.ALL){const t=()=>{var t;if("library"===(null==this||null===(t=this.options)||void 0===t||null===(t=t.render)||void 0===t?void 0:t.type)){const t="작성한 리뷰";return $(".afterRvCnt").text("".concat((0,m.numberWithCommas)(e))),t}return"001"===this.listType?"댓글":"007"===this.listType?"Q&A":"Klover 리뷰"};return this.getElement("title.inner").text("".concat(t()," (").concat((0,m.numberWithCommas)(e),")"))}null!=i&&!e&&i.hide()}function v(t){var e;const{code:i,count:n,originData:s}=t,r=_.bind(this);r(i,n);let o=this.productId;var a,l;"detail"===(null==this||null===(e=this.options)||void 0===e||null===(e=e.render)||void 0===e?void 0:e.type)&&(o=(null==s||null===(a=s.list)||void 0===a?void 0:a.length)>0?null==s||null===(l=s.list[0])||void 0===l?void 0:l.pid:this.productId);return d.SL.getListCount(o).then((t=>{Object.keys(t).forEach((e=>{if(E.call(this,e,n),e===i)return;const s=t[e];r(e,s)}))}))}function E(t,e){if(!(t===d.kD.FUNDING&&"funding"===m.CURRENT_SERVICE))return;const i=(0,m.numberWithCommas)(e),n=this.getElement("title.inner");if("007"===this.listType)return n.text("Q&A (".concat(i,")")),void $("#qnaCnt").text("(".concat(i,")"));n.text("Klover 리뷰 (".concat(i,")")),$("#reviewCnt").text("(".concat(i,")")),$('[data-kbbfn-role="tab-view"] .tab_item').addClass("ui-state-active");return f.call(this,t).show()}function g(){$("#reviewRewardBtn").on(r.CommonEvent.CLICK,(()=>{$("#popReviewRewardInfo").dialog("open")})),this.once(r.CommonEvent.INITIALIZED,(()=>{this.$root.kbbfn(this).trigger(r.GU.READY,[this])})),this.bind([p.Iv.CHANGE_FILTER,p.Iv.CHANGE_SORT],(()=>{this.pending||this.fetchData()})),this.on(p.Iv.UPDATE_ITEMS,(t=>{let{method:e}=t;switch(e){case"post":if(a()(this)!==d.Ny.LATEST)return void(this.sort=d.Ny.LATEST);break;case"delete":this.modules.ready("ui-review-form").then((t=>{t.emit(u.G2.SUBMIT_SUCCESS,{from:this,method:e})}))}this.fetchData()})),this.on(p.Iv.FETCH_DATA,(t=>{let{data:e,append:i}=t;v.call(this,{code:this.filter,count:e.total,originData:e});try{this.filter!==d.kD.PURCHASE||e.total||this.listComp.once(r.Gs.RENDER_FINISH,(()=>{this.filter=d.kD.ALL}))}catch(t){}if(this.isMobile&&i)return this.listComp.append(e);this.listComp.empty().data=e})),this.on(p.Iv.UPDATE_POST,(t=>{let{from:e}=t;const i=this.getItem(e.postId);null!=i&&i.reload()}))}var b=i(91829),y=i.n(b),T=i(49804),w=i.n(T),C=i(76739);function I(t){const{title:e}=this.data,{imgUrl:i}=this.data.data,n=this.genElementId(["edit",this.postId].join("_")),o=this.listType===d.ReviewListType.COMMENT||this.listType===d.ReviewListType.QNA;t.attr({"data-role":"btn-dialog","data-target":"#"+n});const a={type:o?"comment":"klover",id:this.postId,"list-for":this.listId,"prod-title":e,"prod-imageUrl":i};if(o){const t="007"===$("#scrollSpyProjQna").data("kbbfnCmntCode")?$("#scrollSpyProjQna").data("kbbfnProdTitle"):$("#"+this.listId).data("kbbfn-cmnt-title"),e=(0,s.U2)(this.data,"data");Object.assign(a,{"cmnt-id":(0,s.U2)(e,d.WT.REPLY_TOP_POST_ID),"cmnt-code":(0,s.U2)(e,d.WT.POST_STATUS),"cmnt-title":t,"prod-title":t})}return t.one(r.GU.READY,((t,e)=>{e.listModule=this.uber})).kbbfn("ui-review-form",a)}function k(t){const e=this.listType.toLowerCase(),i=this.genElementId("post");t.attr({"data-role":"btn-dialog","data-target":"#"+i});const n={type:e,"list-for":this.id},s=this.getOption("prod");s&&Object.keys(s).forEach((t=>{const e=s[t];null!=e&&(n["prod-"+t]=e)}));const o=this.getOption("cmnt");return o&&Object.keys(o).forEach((t=>{const e=o[t];null!=e&&(n["cmnt-"+t]=e)})),t.one(r.GU.READY,((t,e)=>{e.listModule=this})).kbbfn("ui-review-form",n)}function O(t){t.length&&t.each(((t,e)=>{const i=$(e);k.call(this,i)}))}function R(t,e){const i=this.isMobile;let n,s,r;switch(t){case"ico_spoiler":case"login":r="ico_arw",s=i?"hidden":"text",n=this.isMobile?"btn_more_show":"btn_xxs btn_line_gray";break;default:return}const o=(0,h.createBtnEl)(n,e,s);return r&&o.prepend((0,h.createSpanEl)(r)),o}function S(t,e,i){const n=R.apply(this,[e,i]),s=[e?(0,h.createEl)(e):void 0,(0,h.createEl)("comment_status_text").append([t,n].filter(Boolean))].filter(Boolean),r=(0,h.createEl)("comment_status_box");return"ico_spoiler"===e&&this.isMobile&&r.addClass("type_row"),{wrap:r.append(s),button:n}}function A(t){const e=(0,h.createBtnEl)("btn_xs btn_light_gray","취소").on("click",(()=>{this.form=!1})),i=(0,h.createBtnEl)("btn_xs btn_primary disabled","등록").on("click",(()=>{i.hasClass("disabled")||this.submit()}));null==t&&(t=function(t){const e=t.target.value.trim().length;(0,h.setClassName)(i,"disabled",!e)});const n=(0,h.createEl)({class:"form_textarea",title:"답글 입력",placeholder:"1000자 이내로 입력해주세요."},"TEXTAREA").on("input",t.bind(this)).on("keypress",(t=>{"ENTER"===t.code&&t.ctrlKey&&i.trigger("click")})),{wrap:s}=(0,h.createTextLenChecker)(1e3,null,n),r=(0,h.createEl)("byte_check_footer").append([s,(0,h.createEl)("btn_wrap").append([e,i])]);return{$formWrap:(0,h.createEl)("reply_write_area").append((0,h.createEl)("byte_check_wrap").append([n,r])),$textArea:n,$cancel:e,$submit:i}}function x(t,e){return(0,h.createBtnEl)("btn_comment_util",t).attr("data-role",e)}const N={EDIT:"수정",DELETE:"삭제",REPORT:"신고/차단"};function L(t){var e;const{authorLoginId:i,created:n,isBan:r,isBlockedBySelf:o}=this.data,a={},l=[i,n,...(this.editable?["edit","delete"]:["report"]).map((e=>{var i;if(r&&"report"===e||o)return;if(y()(i=(0,s.U2)(t,"ignore",[])).call(i,e))return;const n=x(N[e.toUpperCase()],e);let l;switch(e){case"report":l=()=>C.Q.open(this);break;case"delete":l=()=>this.delete()}return l&&n.on("click",l.bind(this)),a[e]=n,n})).filter(Boolean)],c=w()(e=l.map(((t,e)=>{const i=(0,h.createSpanEl)("info_item").append(t);return l.length>e+1?[i,(0,h.createSpanEl)("gap"," | ")]:i}))).call(e);if("007"===this.data.data.cmntSrceCttsCode){var d;const t=null===(d=this.data.data.data)||void 0===d?void 0:d.managers;if(t&&y()(t).call(t,this.data.data.data.mmbr_num)){const t=(0,h.createSpanEl)("txt_answer").append("판매자 답변");c.unshift(t,(0,h.createSpanEl)("gap"," | "))}}return{children:c,controls:a}}function D(t){const{children:e,controls:i}=L.call(this,t);return{$wrap:(0,h.createEl)("user_info_box").append(e),controls:i}}function B(t){const e=(0,h.createEl)("no_data_desc");(0,s.HD)(t)?e.text(t):((0,h.isElement2)(t)||(0,s.kJ)(t))&&e.append(t);return{wrap:(0,h.createEl)("no_data size_sm has_line").append(e),content:e}}function M(t){const{children:e,controls:i}=P.call(this,t);return{$wrap:(0,h.createEl)("user_info_box").append(e),controls:i}}function P(t){var e;const{authorLoginId:i,created:n,isBan:r,isBlockedBySelf:o}=this.data,a={},l=[i,n,...(this.editable?["edit","delete"]:["report"]).map((e=>{var i;if(r&&"report"===e||o)return;if(y()(i=(0,s.U2)(t,"ignore",[])).call(i,e))return;const n=x(N[e.toUpperCase()],e);let l;switch(e){case"report":l=()=>C.Q.open(this);break;case"delete":l=()=>this.delete()}return l&&n.on("click",l.bind(this)),a[e]=n,n})).filter(Boolean)],c=w()(e=l.map(((t,e)=>{const i=(0,h.createSpanEl)("info_item").append(t);return l.length>e+1?[i,(0,h.createSpanEl)("gap"," | ")]:i}))).call(e);if(this.data.type===d.eO.COMMENT){var p,u;const t=null===(p=this.data.data)||void 0===p?void 0:p.managers,e=null===(u=this.data.data)||void 0===u?void 0:u.replyCommentList.map((t=>t.mmbr_num));if(t.filter((t=>y()(e).call(e,t))).length>0){const t=(0,h.createEl)("emph_l","EM").append("답변완료");c.push(t)}}return{children:c,controls:a}}var U=i(49837),H=i(85442),K=i(54569);function Q(){let t;const e=this.getOption("type").toLowerCase(),i=(0,U._7)("service.event.host").indexOf(window.location.host)>-1;if("klover"===e&&i){const e=this.getOption("prod");return"004"===(null==e?void 0:e.type)?p.e0.map((e=>(t="펀딩 리뷰",e=d.IE.FUNDING,{label:t,value:e}))).filter(Boolean):p.jq.map((e=>{switch(e){case d.o2.ALL:t="전체";break;case d.o2.PURCHASE:t="구매"}return t+=" 리뷰",{label:t,value:e}})).filter(Boolean)}return p.GL.map((e=>{switch(e){case d.kD.ALL:t="전체";break;case d.kD.PURCHASE:t="구매";break;case d.kD.AFT_MONTH:t="한 달 후";break;case d.kD.FUNDING:t="펀딩"}return t+=" 리뷰",{label:t,value:e}})).filter(Boolean)}function j(){return Q.call(this).map((t=>{let{label:e,value:i}=t;const n=(0,h.createBtnEl)("tab_link",e,"tab_text"),s=(0,h.createEl)("tab_item","LI").attr("data-value",i).append(n);let r=this.filter;switch(K.e.call(this)){case H.EJ.PRODUCT:r=d.kD.PURCHASE;break;case H.EJ.FUNDING:r=d.kD.FUNDING}return i===r?s.addClass(p.Zx):n.addClass(p.Ne),s.on("click",(()=>{n.hasClass(p.Ne)||(this.filter=s.data("value"))}))}))}function z(){return Object.keys(d.Ny).map((t=>{const e=d.Ny[t];let i;switch(e){case d.Ny.FAVORITE:i="좋아요 순";break;case d.Ny.LATEST:i="최신순"}return{label:i,value:e}})).map((t=>{let{label:e,value:i}=t;const n=(0,h.createEl)(null,"OPTION").attr("value",i).text(e);return d.Ny.FAVORITE===i&&n.attr("selected",!0),n}))}function F(){var t,e,i,n,s;const r=this.isMobile,o=j.call(this),a=(0,h.createEl)("tabs","UL").append(o);this.setElement("view.filter.items",o);const l=z.call(this),c=(0,h.createEl)(null,"SELECT").append(l);this.setElement("view.sort.options",l),this.setElement("view.sort.selector",c);const u=(0,h.createEl)(["form_sel type_sm||type_no_line"]).append(c),m=(0,h.createEl)("comment_list");let f;if(this.isMobile){const t=(0,h.createSpanEl)("text");f=(0,h.createEl)("more_btn_wrap").append((0,h.createBtnEl)("btn_more_cont").append([t,(0,h.createSpanEl)("ico_arw")])),this.setElement("list.more.btn",f),this.setElement("list.more.text",t)}else f=(0,h.createEl)("pagination"),this.setElement("view.list.pagi",f);const _=(0,h.createEl)("comment_wrap").append([m,f].filter(Boolean));null!=this&&null!==(t=this.options)&&void 0!==t&&null!==(t=t.view)&&void 0!==t&&t.prdheader&&_.addClass("has_title"),"library"===(null==this||null===(e=this.options)||void 0===e||null===(e=e.render)||void 0===e?void 0:e.type)&&_.addClass("library"),"library-list"===(null==this||null===(i=this.options)||void 0===i||null===(i=i.render)||void 0===i?void 0:i.type)&&_.addClass("library"),this.setElement("view.list.wrap",_),this.setElement("view.list.content",m),this.isMobile&&f.on("click",(()=>{var t;const e=null===(t=this.listComp)||void 0===t?void 0:t.page;this.listComp.page=Number(e+1)}));const v=(0,h.createEl)("tab_list_wrap").append([a,(0,h.createEl)("right_area").append(u)]),E=this.getElement("view.wrap").empty();let g;switch(this.listType){case d.ReviewListType.COMMENT:g=_;break;case d.ReviewListType.KLOVER_REVIEW:g=!1===(null==this||null===(n=this.options)||void 0===n||null===(n=n.view)||void 0===n?void 0:n.tabs)?_:[v,(0,h.createEl)("tab_content").append(_)];break;case d.ReviewListType.QNA:g=_}!1===(null==this||null===(s=this.options)||void 0===s||null===(s=s.view)||void 0===s?void 0:s.tabs)||this.listType===d.ReviewListType.COMMENT||this.listType===d.ReviewListType.QNA?E.replaceWith(g):E.append(g);const b=()=>{const t=c.val();this.setSession(p.U5.SORT,t),this.emit(p.Iv.CHANGE_SORT,{data:t})};return r?c.on("change",b):setTimeout((()=>{c.selectmenu().on("selectmenuchange",b)})),E}const W="data-kbbfn",G=W+"-role",V=W+"-list-for";function Y(){const t=$(this.getOption("trigger"));this.setElement("root",t);let e=t.attr("id");null==e&&(e=this.uuid,t.attr("id",e)),this._id=e;const i=t.find("[".concat(G,'="title"]')),n=i.find(".title_heading");this.setElement("title.wrap",i),this.setElement("title.inner",n);const s=t.find("[".concat(G,'="tab-view"]'));this.setElement("view.wrap",s);const r=["BUTTON[".concat(V,"=").concat(this.id,"]"),":not([".concat(W,"*=review-form])")].join(""),o=this.ui.$contents.find(r);O.call(this,o),F.call(this)}var Z=i(62836),J=i(89477);class q extends n.Kp{constructor(t,e){super(t),this._data=e}get data(){return this._data}set data(t){this._data=t,this.emit(p.VD.UPDATE_DATA,{data:t})}get postType(){return this.data.type}get postId(){return this.data.id}get editable(){return this.authorized&&this.user.get("sub")===this.data.authorId}}var X=i(30573);function tt(){var t;if("007"===(null===(t=this.data.data.data)||void 0===t?void 0:t.cmnt_srce_ctts_code)){const{$wrap:t,controls:e}=D.call(this,{ignore:["report"]});return Object.keys(e).forEach((t=>{const i=e[t];let n;if("edit"===t)n=()=>this.toggleForm();n&&i.off("click").on("click",n.bind(this))})),t}{const{$wrap:t,controls:e}=D.call(this,{});return Object.keys(e).forEach((t=>{const i=e[t];let n;switch(t){case"edit":n=()=>this.toggleForm();break;case"report":i.addClass("report_item")}n&&i.off("click").on("click",n.bind(this))})),t}}function et(){const t=(0,h.createEl)("reply_header").append(tt.call(this)),{$formWrap:e,$textArea:i,$submit:n}=A.call(this,(function(t){const e=t.target.value.trim()!==this.originContent;this.setClassName("form.submit","disabled",!e)}));this.setElement("form.wrap",e),this.setElement("form.content",i),this.setElement("form.submit",n);const s=(0,h.createEl)("reply_text").html((0,X.Fp)(this.data.content));this.setElement("content",s);const{isBlind:r}=this.data,o=r?(0,h.createEl)("reply_contents").append([it.apply(this)]):(0,h.createEl)("reply_contents").append([s,e]),a=(0,h.createEl)("reply_item").append([t,o]).attr("id","cmnt_num_"+this.data.data.cmntNum);this.setElement("root",a)}function it(){var t;let{isBlind:e,isBanBySelf:i,isBanByOthers:n,isBlockedBySelf:s,isSpoiler:r}=this.data;var o;null!==(t=this.data)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.isBlockedBySelf&&(s=null===(o=this.data)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.isBlockedBySelf);if(!e)return;let a,l,c="ico_report";if(i||s?a="고객님 요청에 의해 블라인드 처리 되었습니다.":n?a="다른 고객님들의 요청에 의해 블라인드 처리되었습니다.":r&&(a='이 리뷰에는 <span class="fw_bold">스포일러가 포함</span>되어있습니다.',c="ico_spoiler",l="보기"),null==a)return;const{wrap:h,button:d}=S.apply(this,[a,c,l]);return d&&d.one("click",(()=>{h.hide(),["content.inner","footer.wrap"].forEach((t=>this.getElement(t).show()))})),h}class nt extends q{constructor(t,e){super(t,e),et.call(this),this.initialized=!0}get api(){return this.uber.api}get topPostId(){return this.uber.topPostId}get originContent(){return this.getElement("content").text()}get $formContent(){return this.getElement("form.content")}get formContent(){return this.$formContent.val().trim()}set formContent(t){null==t&&(t=""),this.$formContent.val(t).trigger("input")}get form(){return this.getElement("form.wrap").hasClass("active")}set form(t){t!==this.form&&(this.uber.items.forEach((t=>{t!==this&&t.form&&(t.form=!1)})),this.formContent=t?this.originContent:"",this.setClassName("form.wrap","active",t),this.setClassName("content","hidden",t),t&&setTimeout((()=>{const t=this.$formContent.val();t&&(this.$formContent.val(t+" "),this.$formContent.val(t)),this.$formContent.trigger("focus").prop("selectionEnd")})))}toggleForm(){this.form=!this.form}submit(){const t={id:this.postId,content:this.formContent};return this.api.update(t).then((()=>{this.uber.emit(p.Iv.UPDATE_ITEMS)}))}delete(){return this.ui.alert({code:r.X4.AL_05_0027}).then((t=>{let{value:e}=t;return e?this.api.delete(this.postId).then((()=>{this.uber.emit(p.Iv.UPDATE_ITEMS)})):c().resolve()}))}}function st(){const t=(0,h.createEl)("auto_overflow_wrap");this.setElement("list.more.wrap",t);const e=(0,h.createEl)("reply_list");this.setElement("list.more.content",e);const i=(0,h.createBtnEl)("btn_more_body","답글 더보기").append((0,h.createSpanEl)("ico_arw"));i.on("click",(()=>{(0,J.Q2)(i),(0,h.setClassName)(t,"active",i.hasClass("active"))})),this.setElement("list.more.btn",i);const n=(0,h.createEl)("auto_overflow_contents").append((0,h.createEl)("auto_overflow_inner").append(e));return t.append([n,(0,h.createEl)("auto_overflow_footer").append(i)])}function rt(){const{$formWrap:t,$textArea:e}=A.call(this);this.setElement("form.wrap",t),this.setElement("form.content",e);const i=(0,h.createEl)("reply_list");this.setElement("list.main.content",i);const n=st.call(this),s=(0,h.createEl)("reply_list_area").append([i,n]);let r;if(this.setElement("list.main.wrap",s),!this.authorized){const t="답글 등록은 로그인 후 이용할 수 있습니다.",{wrap:e,button:i}=S.apply(this,[t,"login","로그인"]);r=e,i&&i.on("click",(()=>this.ui.loginAlert()))}const o=(0,h.createEl)("reply_wrap").hide().append([r,t,s].filter(Boolean));return this.setElement("root",o),o}function ot(){this.on(p.rf.FETCH_DATA,(t=>{let{data:e}=t;const{total:i,list:n}=e;this.uber.getElement("reply.count").text(i),this.items=n})),this.on(p.rf.CHANGE_DISPLAY,(()=>{this.items.forEach((t=>t.form=!1))})),this.on(p.Iv.UPDATE_ITEMS,(()=>{this.fetchList().then((()=>this.formContent=""))}))}const at=5;class lt extends n.Kp{constructor(t){super(t),this._api=new d.QJ({type:this.replyType,postType:(0,s.U2)(t,"postType"),listId:(0,s.U2)(t,"listId"),hgrnCmntNum:this.hgrnCmntNum,topPostId:this.topPostId}),this._items=[],rt.call(this),this.uber.$root.append(this.$root),ot.call(this),this.initialized=!0}get api(){return this._api}get isCmntType(){return this.uber.isCmntType}get isQnaType(){return this.uber.isQnaType}get topPostId(){return this.isCmntType||this.isQnaType?this.uber.uber.getOption("cmnt.id"):this.uber.postId}get hgrnCmntNum(){return this.isCmntType||this.isQnaType?this.uber.postId:0}get replyType(){return this.isCmntType||this.isQnaType?this.uber.uber.getOption("cmnt.code"):d.bg.KLOVER}get items(){return this._items}set items(t){const e=t.map((t=>new nt(this,t)));[{name:"main",args:[0,at]},{name:"more",args:[at]}].forEach((t=>{let{name:i,args:n}=t;const s=this.getElement("list.".concat(i,".content")),r=e.slice(...n).map((t=>t.$root));s.empty().append(r),"more"===i&&e.length>at&&this.getElement("list.more.wrap").addClass("overflow")})),this._items=e,this.emit(p.rf.CHANGE_DISPLAY,{value:this.active})}get active(){return this.$root.is(":visible")}set active(t){t!==this.active&&(this.form=t&&this.authorized,!t&&this.getElement("list.more.wrap").hasClass("active")&&this.getElement("list.more.btn").trigger("click"),this.$root[t?"show":"hide"](),this.active&&this.emit(p.Iv.UPDATE_ITEMS),this.emit(p.rf.CHANGE_DISPLAY,{value:t}))}get $formContent(){return this.getElement("form.content")}get formContent(){return this.$formContent.val().trim()}set formContent(t){null==t&&(t=""),this.$formContent.val(t).trigger("input")}get form(){return this.getElement("form.wrap").hasClass("active")}set form(t){t!==this.form&&(this.setClassName("form.wrap","active",t),t?setTimeout((()=>{this.$formContent.trigger("focus").prop("selectionStart")})):(this.formContent="",this.items.length||(this.active=!1)))}toggle(){this.active=!this.active}fetchList(){return this.api.list().then((t=>{this.emit(p.rf.FETCH_DATA,{data:t})}))}submit(){let t;this.authorized||(t="REPLY_LIST_UNAUTHORIZED");const e=this.formContent;if(e.length||(t="REPLY_LIST_NO_CONTENT"),t)return c().reject(new Error(t));const i={content:e};return this.api.post(i).then((()=>{this.emit(p.Iv.UPDATE_ITEMS)})).catch((t=>{if((0,s.e$)(t,"code")){const e=(0,s.e$)(t,"code")?t:t.message||t;return this.ui.alert(e)}if((e=t)&&e.stack&&e.message){const e=(0,s.e$)(t,"code")?t:t.message||t;return this.ui.alert(e)}var e;const i=(0,s.U2)(t,"detailMessage");return this.ui.alert(i||r.AQ.HTTP_ERROR)}))}}var ct=i(96526);const{COMMENT:ht,QNA:dt}=d.ReviewListType,pt=[{code:d.T5.KYOBOBOOK,clsname:"badge_kyobo",label:"종이책"},{code:d.T5.EBOOK,clsname:"badge_ebook",label:"eBook"},{code:d.T5.HOTTRACKS,clsname:"badge_hottracks",label:"핫트랙스"}];function ut(t,e){return(0,h.createSpanEl)(["badge_sm badge_pill",e]).append((0,h.createSpanEl)("text",t))}function mt(t){if(null==t)return;const e=pt.find((e=>e.code===t));if(null==e)return;const{clsname:i,label:n}=e;return ut(n,i)}function ft(t){let e;switch(t){case d.kD.PURCHASE:e="구매자";break;case d.kD.AFT_MONTH:e="한달 후 리뷰";break;case d.kD.FUNDING:e="펀딩 리뷰"}if(null!=e)return ut(e,"badge_line_gray")}function _t(){const{siteCode:t,postType:e}=this.data,i=[mt(t),ft(e)].filter(Boolean);if(i.length)return(0,h.createSpanEl)("badge_box").append(i)}function vt(){const{postType:t}=this.data;let e="리뷰";switch(t){case d.kD.PURCHASE:e="구매리뷰";break;case d.kD.AFT_MONTH:e="한달 후 리뷰";break;case d.kD.FUNDING:e="펀딩리뷰"}if(null!=e)return(0,h.createSpanEl)("review_type",e)}function Et(){var t;const{$wrap:e,controls:i}=D.call(this);if(Object.keys(i).forEach((t=>{const e=i[t];if("edit"===t)I.call(this,e)})),this.setElement("post.controls",i),this.listType===ht)return e;if(this.listType===dt)return e;if("library"===(null==this||null===(t=this.uber)||void 0===t||null===(t=t.options)||void 0===t||null===(t=t.render)||void 0===t?void 0:t.type))return e;const n=_t.call(this);return e.prepend(n)}function gt(){var t;const{rating:e,emotion:i}=this.data,n=(0,h.createEl)("form_rating","INPUT").attr({type:"number",value:e*u.cL,title:"평가점수 선택",readonly:!0,"data-size":"sm"});this.setElement("header.rating",n);const s=[n];let r;null!=i&&(r=(0,h.createSpanEl)("review_quotes_text",i),this.setElement("header.emotion",r),s.push((0,h.createSpanEl)("gap","/"),r));const o=(0,h.createEl)("review_summary_wrap");return"library"!==(null==this||null===(t=this.uber)||void 0===t||null===(t=t.options)||void 0===t||null===(t=t.render)||void 0===t?void 0:t.type)||this.ua.isMobile?o.append(s.filter(Boolean)):[vt.call(this),o.append(s.filter(Boolean))]}function bt(){var t;const e=[];"library"===(null==this||null===(t=this.uber)||void 0===t||null===(t=t.options)||void 0===t||null===(t=t.render)||void 0===t?void 0:t.type)?this.ua.isMobile?(e.push({fn:vt}),e.push({fn:Et}),e.push({fn:gt})):(e.push({name:"left",fn:gt}),e.push({name:"right",fn:Et})):this.listType!==dt?(e.push({name:"left",fn:Et}),this.listType!==ht&&e.push({name:"right",fn:gt})):e.push({name:"left",fn:wt});const i=e.map((t=>{let{name:e,fn:i}=t;const n=i.call(this);if(null==n)return;if(null==e)return n;const s=(0,h.createEl)(e+"_area");return this.setElement("header.".concat(e,".wrap"),s),s.append(n)})).filter(Boolean);return(0,h.createEl)("comment_header").append(i)}function yt(){var t;const e=null==this||null===(t=this.uber)||void 0===t||null===(t=t.options)||void 0===t?void 0:t.view;if(null!=e&&e.prdheader){const{cmdtName:t,cmdtcode:e,saleCmdtDvsnCode:i,saleCmdtid:n}=this.data.data,s=$('<p class="title_heading"><a href="'.concat((0,ct.kR)({pid:n,bid:e,type:i}),'">').concat(t,"</a></p>"));return(0,h.createEl)("title_wrap title_size_sm").append(s)}return null}function Tt(){var t;const e=null==this||null===(t=this.uber)||void 0===t||null===(t=t.options)||void 0===t||null===(t=t.render)||void 0===t?void 0:t.type;if("library"===e||"detail"===e){const{cmdtName:t,cmdtcode:i,saleCmdtDvsnCode:n,saleCmdtid:s,kbcSiteCode:r,recdcode:o,imgUrl:a,chrcList:l,revwPatrCode:c,fndgPrjtSrmb:d}=this.data.data;let p="";if("library"===e&&l){const t=l.length;t>0&&(p=l[0],t>1&&(p+=" 외 "+(t-1)+"인"))}const u=(0,h.createS3ImgEl)({pid:null===o?s:o,bid:i,type:n,"img-path":a},!0,"100x0"),m="004"===c?(0,ct.$u)("/EVT/funding/detail/".concat(d)):(0,ct.kR)({pid:s,bid:i,type:n}),f=$('<div class="prod_thumb_box size_xs">\n      <a href="'.concat(m,'" class="prod_link">\n        <span class="img_box"></span>\n      </a>\n    </div>'));f.find(".img_box").append(u);let _="교보문고";"002"===r?_="eBook":"003"!==r&&"004"!==r||(_="핫트랙스");const v=$("  <div class='prod_info_box size_xs'>\n      <div class='prod_badge'>\n        <span class='badge_sm badge_pill badge_kyobo'><span class='text'>".concat(_,"</span></span>\n      </div>\n      <a href='").concat(m,"' class='prod_info'>\n        <span class='prod_name'>").concat(t,"</span>\n      </a>\n      ").concat("library"===e&&l?'<span class="prod_author">'.concat(p,"</span>"):"","\n    </div>"));return(0,h.createEl)("prod_area horizontal").append([f,v])}return null}function wt(){const{$wrap:t,controls:e}=M.call(this);return Object.keys(e).forEach((t=>{const i=e[t];if("edit"===t)I.call(this,i)})),this.setElement("post.controls",e),t}const Ct=function(t){const e=(0,h.createEl)("comment_text").html((0,X.Fp)(t));return this.setElement("content.text",e),(0,h.createEl)("comment_text_box").append(e)},It=function(t){if(!t.length)return;const e=t[0];return(0,h.createEl)("comment_thumb_box").append([(0,h.createSpanEl)("comment_thumb_view").attr("style",'background-image: url("'.concat(e,'")')).append((0,h.createEl)({src:e,alt:"리뷰 썸네일"},"img")),t.length>1?(0,h.createSpanEl)("thumb_count").text(t.length):""])},kt=function(t){var e;if(!t.length)return;const i=t.map((t=>{const e=(0,h.createBtnEl)("btn_view_img").append((0,h.createEl)({src:t},"IMG")).on("click",(e=>{window.open(t)})),i=(0,h.createEl)("comment_img_box").css({"background-image":'url("'.concat(t,'")')}).append(e);return(0,h.createEl)("swiper-slide","LI").append(i)})),n=this.isMobile?(0,h.createEl)("swiper-pagination"):["next","prev"].map((t=>(0,h.createEl)("swiper-button-"+t).append((0,h.createSpanEl)("hidden","next"===t?"다음":"이전")))),s=(0,h.createEl)("swiper-container").append((0,h.createEl)("swiper-wrapper","UL").append(i));this.setElement("content.swiper.cont",s);const r=w()(e=[s,n]).call(e),o=(0,h.createEl)("comment_swiper_wrap").append(r);return this.setElement("content.swiper.wrap",o),o};function Ot(){const{isBlind:t,isBanBySelf:e,isBanByOthers:i,isBlockedBySelf:n,isSpoiler:s}=this.data;if(!t)return;let r,o,a="ico_report";if(e||n?r="고객님 요청에 의해 블라인드 처리 되었습니다.":i?r="다른 고객님들의 요청에 의해 블라인드 처리되었습니다.":s&&(r='이 리뷰에는 <span class="fw_bold">스포일러가 포함</span>되어있습니다.',a="ico_spoiler",o="보기"),null==r)return;const{wrap:l,button:c}=S.apply(this,[r,a,o]);return c&&c.one("click",(()=>{l.hide(),["content.inner","footer.wrap"].forEach((t=>this.getElement(t).show())),(0,J.PA)(this.$root,this.getElement("content.inner"))})),l}function Rt(){var t;const{imageUrls:e,content:i,isBlind:n}=this.data,s=(0,h.createEl)("comment_contents_inner"),o=e,a=(0,h.createEl)("comment_view_wrap").append([Ct.call(this,i),"detail"!==(null==this||null===(t=this.uber)||void 0===t||null===(t=t.options)||void 0===t||null===(t=t.render)||void 0===t?void 0:t.type)?It(o):""].filter(Boolean));s.append([a,kt.call(this,o)].filter(Boolean)),this.setElement("content.inner",s),n&&"myroom"!==r.H6&&s.hide();const l=this.getElement("content.wrap");return this.initialized&&l.empty(),l.append([s,Ot.call(this)].filter(Boolean))}const St=9999;function At(){const{firstPostId:t,aMonthPostId:e}=this.data,i=[{id:e,label:"한달 후 리뷰 보기"},{id:t,label:"이 구매자의 첫 리뷰 보기"}].map((t=>{let{id:e,label:i}=t;if(null==e)return;const n=(0,h.createBtnEl)("btn_more_view fc_spot",i).append((0,h.createSpanEl)("ico_arw"));return n.on("click",(()=>{this.ui.popup({review:{pid:e,title:i}})})),n})).filter(Boolean);if(i.length)return(0,h.createEl)("left_area").append(i)}function xt(){const{isLike:t,likeCount:e}=this.data,i=e>St?St+"+":e,n=(0,h.createBtnEl)("btn_like",i).prepend((0,h.createSpanEl)("ico_like"));return this.setElement("footer.like.wrap",n),this.setElement("footer.like.count",n.children(".text")),n.on("click",(()=>{if(this.editable)return this.ui.alert("자신의 글에 공감하실 수 없습니다.");if("detail"===this.uber.getOption("render.type"))return this.ui.alert("상세팝업에서는 공감 및 해제가 불가능합니다.");this.toggleLike()})),t&&n.addClass("active"),n}function Nt(){const{reviewCommentCount:t,replyCommentCount:e}=this.data,i=void 0!==e?(0,h.createSpanEl)("count",e):(0,h.createSpanEl)("count",t),n=(0,h.createBtnEl)("btn_reply").append([(0,h.createSpanEl)("ico_reply"),(0,h.createSpanEl)("text","답글 ").append(i)]).on("click",(()=>{this.reply.toggle()}));return this.setElement("reply.count",i),this.setElement("reply.toggleBtn",n),n}function Lt(){return(0,h.createEl)("right_area").append([xt,Nt].map((t=>t.call(this))).filter(Boolean))}function $t(){return(0,h.createEl)("comment_util_box").append([At,Lt].map((t=>t.call(this))).filter(Boolean))}function Dt(){const t=(0,h.createBtnEl)("btn_more_body","펼치기").attr("data-btn-toggle","").append((0,h.createSpanEl)("ico_arw")),e=this.getElement("footer.wrap");return this.initialized&&e.empty(),e.append([t,$t.call(this)]),this.data.isBlind&&e.hide(),e}function Bt(){let t="comment_item";this.data.hasRelatedPost&&(t+=" has_btn");const e=(0,h.createEl)(t).attr("data-id",this.postId);this.setElement("root",e)}function Mt(){const t=(0,h.createEl)("comment_contents"),e=(0,h.createEl)("comment_footer");this.setElement("content.wrap",t),this.setElement("footer.wrap",e);const i=[Tt,yt,bt,Rt,Dt].map((t=>t.call(this)));this.$root.append(i)}function Pt(){Bt.call(this),Mt.call(this)}function Ut(){if(!this.uber.isCmntType){const{rating:t,emotion:e}=this.data;this.getElement("header.rating")&&this.getElement("header.rating").rating("update",t*u.cL),this.getElement("header.emotion")&&this.getElement("header.emotion").text(e)}[Rt,Dt].forEach((t=>t.call(this)));const t=(0,J.mJ)(this.$root);(0,J.$2)(t)}class Ht extends q{constructor(t,e){super(t,e),this.on(p.Iv.UPDATE_ITEMS,(()=>{this.uber.emit(p.Iv.UPDATE_ITEMS)})),Pt.call(this),this._reply=new lt(this),this.reply.ready().then((()=>{this.initialized=!0}))}get listId(){return this.uber.id}get listType(){return this.uber.listType}get isCmntType(){return this.uber.listType===d.ReviewListType.COMMENT}get isQnaType(){return this.uber.listType===d.ReviewListType.QNA}get reply(){return this._reply}genElementId(t){return[this.listId,t].join("_")}async toggleLike(){if(await this.auth.authorize(),!this.auth.authorized)return this.ui.loginAlert();const t=(0,s.ei)(this.data,["id","type","data"]);return(this.uber.isCmntType||this.uber.isQnaType?d.j7:d.SL).toggleLike(t).then((t=>{const{active:e,count:i,item:n}=t;this.setClassName("footer.like.wrap","active",e),this.getElement("footer.like.count").text(i),this.data=n}))}async reload(){if(!this.initialized)return;this.ui.loading=!0;const t=this.uber.isCmntType||this.uber.isQnaType?d.j7:d.SL,e=this.uber.isCmntType||this.uber.isQnaType?Object.assign({id:this.postId},this.uber.options):this.postId;this._data=await t.get(e),Ut.call(this),this.ui.loading=!1}async delete(){const{value:t}=await this.ui.alert({code:r.X4.AL_05_0027});if(!t)return;return(this.uber.isCmntType||this.uber.isQnaType?d.j7:d.SL).delete(this.postId).then((()=>{this.uber.emit(p.Iv.UPDATE_ITEMS,{method:"delete"})}))}}function Kt(t){const e=new Ht(this,t);return this.items.push(e),e.ready().then((()=>e.$root))}const Qt="Klover리뷰를 작성해 보세요.";function jt(){var t;let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.isMobile)return;const i=this.getElement("list.more.btn");if(null==i&&!i.length)return;if(!e)return $(".comment_list").show(),i.hide();const n=null===(t=this.listComp)||void 0===t?void 0:t.pagi;if(null==n)return;if(!n.availNext)return;const s="더보기 ".concat(n.value,"/").concat(n.length);this.getElement("list.more.text").text(s),i.show()}function zt(){const t=(0,h.createEl)({type:"button",class:"btn_sm btn_line_gray","data-role":"btn-dialog","data-kbbfn":"ui-review-form","data-target":"#popKillingPart",html:'<span class="text">Klover리뷰 작성</span>'},"BUTTON").kbbfn();return(0,h.createEl)("btn_wrap").append(t)}function Ft(t){switch(t){case d.ReviewListType.COMMENT:return"등록된 댓글이 없습니다.";case d.ReviewListType.KLOVER_REVIEW:return"myroom"!==r.H6?Qt:[(0,h.createEl)({text:Qt},"P"),zt()];case d.ReviewListType.QNA:return"등록된 문의가 없습니다."}return"등록된 포스트가 없습니다."}function Wt(){const t=this.getElement("view.list.content");const e={el:t,render:t=>{let{list:e}=t;const i=e.map((t=>Kt.call(this,t)));return c().all(i)},events:{renderStart:function(){var t;if(this._items=[],jt.call(this,!1),"library-list"===(null==this||null===(t=this.options)||void 0===t||null===(t=t.render)||void 0===t?void 0:t.type)){$("#ReviewList1").hide()}}.bind(this),renderFinish:function(){var e;if((0,J.F7)(t),jt.call(this,!0),"library-list"===(null==this||null===(e=this.options)||void 0===e||null===(e=e.render)||void 0===e?void 0:e.type)){const t=$("#ReviewList1"),e=$(".comment_wrap",t).find(".comment_item");e&&e.length>0?($(".comment_wrap",t).show(),$(".list_result_wrap",t).show(),$("#library-list-no-data",t).hide()):($(".comment_wrap",t).hide(),$(".list_result_wrap",t).hide(),$("#library-list-no-data",t).show()),t.show()}}.bind(this)},landing:{elements:B(),message:{loading:r.AQ.LOADING,noResult:Ft(this.listType)}}},i={el:this.getElement("view.list.pagi"),events:{change:t=>{let{value:e}=t;"klover"===this.options.type&&"comment"!==this.options.type?this.isMobile?this.fetchData({page:e}).then((()=>{const t=new window.CustomEvent("scroll");window.dispatchEvent(t)})):(window.scrollTo({top:$("#ReviewList1").offset().top}),this.fetchData({page:e})):("007"===this.listType&&window.scrollTo({top:$("#scrollSpyProjQna").offset().top}),this.fetchData({page:e}))}}};return Object.assign(e,{pagination:i}),this._listComp=new Z.ListComponent(e),this.listComp}function Gt(){const t=this.getOption("type").toLowerCase();let e=d.ReviewListType.KLOVER_REVIEW;switch(t){case"comment":e=d.ReviewListType.COMMENT;break;case"qna":e=d.ReviewListType.QNA}return e}function Vt(t){var e,i;const n=this.getOption("cmnt"),s="/library/review"===window.location.pathname||y()(e=window.location.pathname).call(e,"/library/list/detail");let r;switch(this.listType){case d.ReviewListType.COMMENT:case d.ReviewListType.QNA:r={cmntSrceCttsCode:null==n?void 0:n.code,cmntCttsIdnfNum:null==n?void 0:n.id},null!=n&&n.list&&Object.assign(r,{cmntCttsIdnfNumList:null==n?void 0:n.list});break;case d.ReviewListType.KLOVER_REVIEW:var o;if(r={pid:this.productId,type:this.filter,sort:a()(this)},null!==(i=this.getOption("prod"))&&void 0!==i&&i.type)r.type=null===(o=this.getOption("prod"))||void 0===o?void 0:o.type}if(s){var l,c,h,p,u;t.mmbrNumSearchYsno="Y";const e=this.getOption("prod");t.cmdtName=null==e||null===(l=e.cmdt)||void 0===l?void 0:l.name,t.cretDttmEnd=null==e||null===(c=e.cret)||void 0===c||null===(c=c.dttm)||void 0===c?void 0:c.end,t.cretDttmStart=null==e||null===(h=e.cret)||void 0===h||null===(h=h.dttm)||void 0===h?void 0:h.start,t.kbcSiteCode=null==e||null===(p=e.kbc)||void 0===p||null===(p=p.site)||void 0===p?void 0:p.code,t.revwPatrCode=null==e||null===(u=e.revw)||void 0===u||null===(u=u.patr)||void 0===u?void 0:u.code}return r?Object.assign(r,t):t}class Yt extends n.ht{constructor(t,e){super(t,null,e),this._listType=Gt.call(this),this._listComp=null,this._items=[],this._renderType=this.getOption("render.type"),this._date=null,g.call(this),this.init().then((()=>{this.initialized=!0}))}get listType(){return this._listType}get isCmntType(){return this.listType===d.ReviewListType.COMMENT}get isQnaType(){return this.listType===d.ReviewListType.QNA}get productId(){return this.getOption("prod.pid")}get reviewable(){return"N"!==this._data.reviewWrite}get filter(){var t;const e=this.getElement("view.filter.items");if(null==e||void 0===e)return d.kD.ALL;const i=e.find((t=>t.hasClass(p.Zx)));return null!==(t=null==i?void 0:i.data("value"))&&void 0!==t?t:d.kD.ALL}set filter(t){this.filter!==t&&(this.getElement("view.filter.items").forEach((e=>{const i=e.data("value")===t;(0,h.setClassName)(e,p.Zx,i)})),this.emit(p.Iv.CHANGE_FILTER,{data:t}))}get sort(){const t=this.getElement("view.sort.selector");if(null!=t)return t.val()}set sort(t){if(a()(this)===t)return;const e=this.getElement("view.sort.selector");e.val(t),e.selectmenu("instance")?e.selectmenu("refresh").trigger("selectmenuchange"):e.trigger("change")}get listComp(){return this._listComp}get pending(){return null!=this.listComp&&this.listComp.pending}set pending(t){if(t===this.pending)return;const e=t?r.Gs.RENDER_START:r.Gs.RENDER_FINISH;this.listComp.emit(e)}get items(){return this._items}init(){return Y.call(this),Wt.call(this),this.fetchData()}genElementId(t){return super.genElementId(t,this.id)}fetchData(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(i&&this.pending)return c().reject(new Error("이미 데이터가 로드중입니다."));const n=Vt.call(this,e);i&&(this.pending=!0,this.listType===d.ReviewListType.KLOVER_REVIEW&&["type","sort"].forEach((t=>{const i=(0,s.U2)(e,t);if(null==i)return;const n="type"===t?"filter":t;i!==this[n]&&(this[n]=i)})));const o=(0,s.U2)(e,d.WT.PAGE),a=this.isCmntType||this.isQnaType?d.j7:d.SL;let l;return l="detail"===(null==this||null===(t=this.options)||void 0===t||null===(t=t.render)||void 0===t?void 0:t.type)?a.detail(this.productId):a.list(n),l.then((t=>(i||c().resolve(t),new(c())((e=>{this._data=t,this.listComp.once(r.Gs.RENDER_FINISH,(()=>e(t))),this.emit(p.Iv.FETCH_DATA,{data:t,append:o})}))))).catch((()=>{this.pending=!1}))}getItem(t){return this.items.find((e=>{let{postId:i}=e;return i===t}))}}class Zt extends n.YZ{constructor(){super("review-list",{initList:[r.bn.AUTHORIZE]}),this._items=[],this.authorize().then((()=>{this.emit(r.CommonEvent.PARTIAL_INIT,{name:r.bn.AUTHORIZE})}))}get items(){return this._items}create(t){const e=new Yt(this,t);return this.items.push(e),e}isAvailReview(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=(0,s.U2)(this.items,t);return null==e||e.reviewable}}var Jt=new Zt},54569:function(t,e,i){"use strict";i.d(e,{e:function(){return o},u:function(){return r}});var n=i(13792),s=i(48306);function r(t){if((0,n.e$)(t,"code")){const e=(0,n.e$)(t,"code")?t:t.message||t;return this.ui.alert(e)}if((e=t)&&e.stack&&e.message){const e=(0,n.e$)(t,"code")?t:t.message||t;return this.ui.alert(e)}var e;let i=t.detailMessage;if(!i){const e=t.indexOf("{"),n=t.lastIndexOf("}"),s=t.substring(e,n+1);i=JSON.parse(s).detailMessage}return this.ui.alert(i||s.AQ.HTTP_ERROR)}function o(){return document.querySelector("html").dataset.service}},7328:function(t,e,i){"use strict";var n=i(62856);t.exports=n},2948:function(t,e,i){"use strict";i(4115);var n=i(35703);t.exports=n("Array").sort},69355:function(t,e,i){"use strict";var n=i(7046),s=i(2948),r=Array.prototype;t.exports=function(t){var e=t.sort;return t===r||n(r,t)&&e===r.sort?s:e}},72858:function(t,e,i){"use strict";t.exports=i(8391)},8391:function(t,e,i){"use strict";var n=i(7328);t.exports=n},15863:function(t,e,i){"use strict";var n=i(69826),s=TypeError;t.exports=function(t,e){if(!delete t[e])throw new s("Cannot delete property "+n(e)+" of "+n(t))}},34342:function(t,e,i){"use strict";var n=i(2861).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},81046:function(t,e,i){"use strict";var n=i(2861);t.exports=/MSIE|Trident/.test(n)},18938:function(t,e,i){"use strict";var n=i(2861).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},4115:function(t,e,i){"use strict";var n=i(76887),s=i(95329),r=i(24883),o=i(89678),a=i(10623),l=i(15863),c=i(85803),h=i(95981),d=i(61388),p=i(34194),u=i(34342),m=i(81046),f=i(53385),_=i(18938),v=[],E=s(v.sort),g=s(v.push),b=h((function(){v.sort(void 0)})),y=h((function(){v.sort(null)})),T=p("sort"),w=!h((function(){if(f)return f<70;if(!(u&&u>3)){if(m)return!0;if(_)return _<603;var t,e,i,n,s="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(n=0;n<47;n++)v.push({k:e+n,v:i})}for(v.sort((function(t,e){return e.v-t.v})),n=0;n<v.length;n++)e=v[n].k.charAt(0),s.charAt(s.length-1)!==e&&(s+=e);return"DGBEFHACIJK"!==s}}));n({target:"Array",proto:!0,forced:b||!y||!T||!w},{sort:function(t){void 0!==t&&r(t);var e=o(this);if(w)return void 0===t?E(e):E(e,t);var i,n,s=[],h=a(e);for(n=0;n<h;n++)n in e&&g(s,e[n]);for(d(s,function(t){return function(e,i){return void 0===i?-1:void 0===e?1:void 0!==t?+t(e,i)||0:c(e)>c(i)?1:-1}}(t)),i=a(s),n=0;n<i;)e[n]=s[n++];for(;n<h;)l(e,n++);return e}})},62856:function(t,e,i){"use strict";var n=i(69355);t.exports=n},76555:function(t,e,i){t.exports=i(72858)}},function(t){return t.O(0,[321,160,712],(function(){return e=59583,t(t.s=e);var e})),t.O()}])}));