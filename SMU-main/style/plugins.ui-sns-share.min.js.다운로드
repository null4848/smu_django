/*! @kyobobook/kbb-js v1.0.10 (build 20250618-103334) */
"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.__KbbJS__=e():(t.__KbbJS__=t.__KbbJS__||{},t.__KbbJS__["plugins.ui-sns-share"]=e())}(self,(function(){return(self.webpackChunk_KbbJS_=self.webpackChunk_KbbJS_||[]).push([[85],{83649:function(t,e,s){s.d(e,{R:function(){return I}});var a=s(69111),n=s(82324),i=s(48306),r=s(96526);const o={KAT:"카카오톡",KAS:"카카오스토리",LIN:"라인",NAB:"밴드",FAB:"페이스북",TWI:"트위터",MSG:"메세지",MORE:"더보기",URL:"링크복사"},c={MYROOM:"myroom",PRODUCT:"product",EVENT:"event",WELCOME:"welcome",ORDER:"order"},l={PACKAGE:"패키지",TITLE:"단일상품 공유하기",KILLING_PART:"문장 공유하기"},h={CLICK:"click_after_btn",SHARE:"share"};function u(){return document.querySelector("html").dataset.service}function d(t){let e;switch(t){case"KAT":e=o.KAT;break;case"KAS":e=o.KAS;break;case"LIN":e=o.LIN;break;case"NAB":e=o.NAB;break;case"FAB":e=o.FAB;break;case"TWI":e=o.TWI;break;case"URL":e=o.URL}return e}function p(t){let e;switch(t){case"prodKillingPartShareBtn":e=l.KILLING_PART;break;case"prodTitleShareBtn":e=l.TITLE;break;case"prodPackageShareBtn":e=l.PACKAGE}return e}function g(t){const e=u.call(this),s={[c.PRODUCT]:()=>{if(t.type===l.PACKAGE){const e=document.getElementById("prodPackageShareBtn"),s=e.getAttribute("data-pid"),a=e.getAttribute("data-product-name"),n=e.getAttribute("data-product-code");window.dataLayer.push({ecommerce:null}),window.dataLayer.push({event:"item_event",event_name:h.SHARE,ecommerce:{type:t.type||"",method:t.method||"",item_category:n||"",item_id:s||"",item_name:a||""}})}else window.dataLayer.push({ecommerce:null}),window.dataLayer.push({event:"item_event",event_name:h.CLICK,ecommerce:{type:t.type,method:t.method}})}}[e];s&&s()}function m(t){let e=document.getElementById("gaButtonIdInput");e||(e=document.createElement("input"),e.setAttribute("type","hidden"),e.setAttribute("id","gaButtonIdInput"),document.body.appendChild(e)),e.value=t}function _(){const t=document.getElementById("gaButtonIdInput");return t?t.value:null}function b(){const t=this.getOption("trigger");if(!t)return;const e=$(t).attr("data-target");if($(e).length)return this._dialog=$(e).dialog("instance"),$(e);const s=(0,r.ut)({id:$(t).attr("data-target").replace(/^#/,""),class:"dialog_wrap has_btn","data-class":"dialog_bottom sns_share"}),a=(0,r.ut)({class:"btn_dialog_close","data-dialog-close":""},"button").append([{class:"ico_dialog_close"},{class:"hidden",text:"닫기"}].map((t=>(0,r.ut)(t)),"span")),n=(0,r.ut)("dialog_header").append((0,r.ut)({class:"dialog_title",text:"공유하기"})),i=k.call(this),o=(0,r.ut)({class:"sns_share_link",text:this.shareUrl},"span");this.setElement("url.span.mok",o);const c=(0,r.ut)("dialog_footer").append((0,r.ut)("sns_share_link_box").append([o,(0,r.ut)({class:"btn_share_link",text:"URL 복사"},"button").on("click",(t=>{const e=document.createElement("input");e.style="position: absolute; left: -1000px; top: -1000px",e.value=o.text(),$(t.target).append(e),e.select(),document.execCommand("copy"),e.remove(),this.ui.toast("URL이 복사되었습니다.");const s={},a=_.call(this);a&&(s.type=p(a)),this.shareType="URL",s.method=d(this.shareType),g.call(this,s)}))]));return s.append([a,n,i,c]),$("body").append(s),s}function k(){const{elements:t}=this.elOpt,e=(0,r.ut)("dialog_contents"),s=[];null==t||t.items.forEach((t=>{(this.ua.isMobileApp||"MSG"!==t.name&&"MORE"!==t.name)&&s.push(t)}));const a=s.map((t=>{let e=[];switch(t.name){case"KAT":e=[{class:"ico_sns kakao"},{class:"sns_text",text:" 카카오톡"}];break;case"KAS":e=[{class:"ico_sns kakako_story"},{class:"sns_text",text:" 카카오스토리"}];break;case"LIN":e=[{class:"ico_sns line"},{class:"sns_text",text:" 라인"}];break;case"NAB":e=[{class:"ico_sns band"},{class:"sns_text",text:" 밴드"}];break;case"FAB":e=[{class:"ico_sns facebook"},{class:"sns_text",text:" 페이스북"}];break;case"TWI":e=[{class:"ico_sns twitter"},{class:"sns_text",text:" 트위터"}];break;case"MSG":e=[{class:"ico_sns message"},{class:"sns_text",text:" 메세지"}];break;case"MORE":e=[{class:"ico_sns more"},{class:"sns_text",text:" 더보기"}]}return(0,r.ut)("list_item","li").append((0,r.ut)({href:"javascript:void(0)",class:"btn_sns_share"},"a").on("click",(e=>{e.preventDefault();const s={},a=_.call(this);a&&(s.type=p(a)),this.shareType=t.name,s.method=d(this.shareType),g.call(this,s)})).append(e.map((t=>(0,r.ut)(t)),"span")))}));return e.append((0,r.ut)("sns_share_list","ul").append(a))}function f(){const t=$(this.getOption("trigger"));if(!t.length)return;const{elements:e}=this.elOpt,s=(0,r.ut)({type:"button",class:"btn_share",html:'<span class="ico_share"></span><span class="hidden">공유하기</span>'},"button").on("click",(t=>{this.snsShareToggle(t,!0)})),a=(0,r.ut)({type:"button",class:"btn_sns_share_close",html:'<i class="ico_share_close"></i><span class="hidden">닫기</span>'},"button").on("click",(t=>{this.snsShareToggle(t,!1)})),n=(0,r.ut)("sns_share_box");null==e||e.items.filter((t=>t.isPc)).forEach((t=>{let e=null;const s=(0,r.ut)({href:"javascript:void(0)",class:"btn_sns_share ".concat(t.selector)},"a").on("click",(e=>{e.preventDefault();const s=e.currentTarget.closest('[data-kbbfn="ui-sns-share"]'),a={};s&&(a.type=p(s.id)),this.shareType=t.name,a.method=d(this.shareType),g.call(this,a),this.snsShareToggle(e,!1)}));switch(t.name){case"KAS":e="공유하기";break;case"NAB":e="밴드 공유하기";break;case"FAB":e="페이스북 공유하기";break;case"TWI":e="트위터 공유하기";break;case"URL":e="url 복사하기"}n.append(s.append((0,r.ut)({class:"hidden",text:e},"span")))})),n.append(a),t.append([s,n])}function y(){if(this.ua.isMobile){const t=this.getOption("trigger");if(!t)return;const e=b.call(this,t).one("dialogcreate",((t,e)=>{this._dialog=$(t.target).dialog("instance"),this.initialized=!0}));this.shareDialog=e,this.ui.dialog("#"+e.attr("id"));const s=$('[data-kbbfn="ui-sns-share"]');this.dialog&&s.off("click.getData").on("click.getData",(t=>{const e=$(t.target).closest("button");m.call(this,t.currentTarget.id),this.shareUrl=e.data("kbbfn-url")||window.location.href,T.call(this),this.active=!0}))}else f.call(this)}function T(){this.shareDialog&&this.shareDialog.find(".sns_share_link").text(this.shareUrl)}const A=["".concat(i.AO,"/pmtn"),"/mimages/static2/images/common/launcher_icon.png"].join("/");class I extends n.ht{constructor(t,e,s){super(t,e,s),this._active=!1,this._shareType=null,this._targetWrap=null,this._shareUrl=this.getOption("url",window.location.href),this._shareTitle=(0,a.decode)(this.getOption("title","")),this._imgUrl=this.getOption("img",A),this._gaButtonId=null,y.call(this),this.on("share-change",(t=>{let{share:e,e:s}=t;this.shareHandle(e,s)}))}get elOpt(){return{elements:{root:".sns_share_wrap",items:[{name:"KAT",selector:"kakao_talk",isPc:!0},{name:"KAS",selector:"kakao",isPc:!0},{name:"LIN",selector:"naver_line",isPc:!0},{name:"NAB",selector:"band",isPc:!0},{name:"FAB",selector:"facebook",isPc:!0},{name:"TWI",selector:"twitter",isPc:!0},{name:"MSG",selector:"message",isPc:!1},{name:"MORE",selector:"more",isPc:!1},{name:"URL",selector:"url_copy",isPc:!0}]}}}set active(t){this._active=t,this.dialog?this.dialog[t?"open":"close"]():this.targetWrap[t?"addClass":"removeClass"]("active")}get active(){return this._active}set shareType(t){this.emit("share-change",{share:t}),this._shareType=t}get shareType(){return this._shareType}set shareUrl(t){this._shareUrl=t}get gaButtonId(){return this._gaButtonId}set gaButtonId(t){this._gaButtonId=t}get imgUrl(){return this._imgUrl}get shareTitle(){return this._shareTitle}get shareUrl(){return this._shareUrl}get dialog(){return this._dialog}get targetWrap(){return this._targetWrap}shareHandle(t,e){const s=encodeURI("".concat(this.shareUrl));switch(t){case"KAT":if(this.kakaoInit()){const t=$('meta[property="og:image"]').attr("content"),e=$('meta[property="og:title"]').attr("content");Kakao.Link.sendDefault({objectType:"feed",installTalk:!0,content:{title:e,imageUrl:t,link:{webUrl:s,mobileWebUrl:s}},buttons:[{title:this.shareTitle||"모바일교보문고",link:{webUrl:s,mobileWebUrl:s}}]})}this.active=!1;break;case"KAS":if(this.kakaoInit()){if(this.ua.isMobileApp)return void Kakao.Story.open({url:s,text:this.shareTitle,install:!0,urlInfo:{title:this.shareTitle,desc:"",name:"",images:[this.imgUrl]}});Kakao.Story.share({url:s,text:this.shareTitle})}this.active=!1;break;case"NAB":this.open("http://band.us/plugin/share?body=".concat(encodeURIComponent("".concat(this.shareTitle,"\n").concat(s)),"&route=").concat(s));break;case"LIN":this.open("http://line.me/R/msg/text/?".concat(encodeURIComponent("".concat(this.shareTitle,"\n").concat(s))));break;case"FAB":this.open("http://facebook.com/sharer/sharer.php?u=".concat(s));break;case"TWI":this.open("http://twitter.com/intent/tweet?text=".concat(this.shareTitle,"&url=").concat(s));break;case"URL":if(this.shareUrl){const t=document.createElement("input");t.style="position: absolute; left: -1000px; top: -1000px",t.value=this.shareUrl,$(e?e.target:"body").append(t),t.select(),document.execCommand("copy"),t.remove(),this.ui.toast("URL이 복사되었습니다.")}break;case"MORE":this.showAppShare();break;case"MSG":this.messageLink()}}messageLink(){const t=this.shareUrl;"win16|win32|win64|mac".indexOf(window.navigator.platform.toLowerCase())<0&&(window.navigator.userAgent.match(/iPhone|iPad|iPod/i)?window.location.href="sms:&body="+encodeURIComponent(t):navigator.userAgent.match(/Android/i)&&(window.location.href="sms:?body="+encodeURIComponent(t)))}snsShareToggle(t,e){const{elements:s}=this.elOpt;this._targetWrap=$(t.target.closest(null==s?void 0:s.root)),this.active=e}kakaoInit(){const{dev:t,prod:e}=(0,r._7)("vendors.kakao.apikey"),s=this.isDevHost?t:e;return null!==Kakao&&(Kakao.isInitialized()||Kakao.init(s),Kakao.isInitialized())}open(t){if(this.ua.isMobileApp)return this.outLink(t),void(this.active=!1);window.open(t),this.active=!1}showAppShare(){this.mobi.request("showAppShare",{title:this.shareTitle,contents:this.shareUrl})}outLink(t){this.mobi.request("outLink",{url:t})}}},69639:function(t,e,s){s.r(e);var a=s(35820),n=s.n(a),i=s(82324),r=s(13792),o=s(83649);class c extends i.YZ{constructor(){super("sns-share"),this._list=[]}get list(){return this._list}createDialog(t){if(!this.initialized)return this.ready((()=>this.createDialog(t)));let e=(0,r.U2)(t,"trigger");if(null==e)return n().reject(new Error("[".concat(e,"] undefined trigger element selector!")));if(!(0,r.HD)(e)){const t="trigger_"+this.list.length;$(e).data("kbbfn-sid",t),e=t}const s=this.getInstance(e);if(null!=s)return n().resolve(s);const a=new o.R(this,e,t);return this.list.push(a),n().resolve(a)}exists(t){return null!=this.getInstance(t)}getInstance(t){return this.list.find((e=>{let{id:s}=e;return s===t}))}}e.default=new c}},function(t){return t.O(0,[321,160,712],(function(){return e=69639,t(t.s=e);var e})),t.O()}])}));